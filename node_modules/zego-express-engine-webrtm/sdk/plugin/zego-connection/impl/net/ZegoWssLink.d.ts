/// <reference types="node" />
import { LinkedList, ListNode } from '../../entity/linkNode';
import { AccessHubMessageType, ConnectEvent, DestroyType } from '../../entity/AccessHubDefine';
import { AccessHubProtoBuf } from '../../protocol/AccessHubProtoBuf';
import { ZegoLink } from './ZegoLink';
import { NetSocketService } from './NetSocketService';
import { StateCenter } from '../stateCenter';
import { ZegoLogger } from '../../util/logger';
declare type MessageItem = {
    data: any;
    txid: number;
    sendTime: number;
    timeOut: number;
    ack: boolean;
    type: AccessHubMessageType;
    streamID: number;
    success: Function | null;
    error: Function | null;
    ackFunc: Function | null;
    isSend: boolean;
    isCheck: boolean;
};
export declare class ZegoWssLink extends ZegoLink {
    private appID;
    private env;
    private protobuf;
    private logger;
    protected stateCenter: StateCenter;
    socketService: NetSocketService;
    urlIndex: number;
    servers: string[];
    updatedMsgTime: number;
    unUpdateMsgTimeTypes: AccessHubMessageType[];
    netLinkState: number;
    sendCommandList: LinkedList<MessageItem>;
    unSendCommandList: LinkedList<MessageItem>;
    sendCommandMap: {
        [index: number]: ListNode<MessageItem>;
    };
    unSendCommandMap: {
        [index: number]: ListNode<MessageItem>;
    };
    private sendDataCheckOnceCount;
    private sendDataDropTimeout;
    private sendDataCheckTimer;
    private sendDataCheckInterval;
    private timeout;
    private onConnectedEvent;
    private onConnectingEvent;
    private onDisConnectedEvent;
    private onPushEvent;
    connectInterval: number;
    connectTimer: NodeJS.Timeout | null | number;
    connectRsp: {
        suc?: Function;
        fail?: Function;
    };
    unlogTypes: number[];
    tryServers: string[];
    tryConnectEvents: ConnectEvent[];
    connectStartTime: number;
    constructor(appID: number, env: number, protobuf: AccessHubProtoBuf, logger: ZegoLogger, stateCenter: StateCenter);
    initEvent(onConnectedEvent: (servers: string[], connectEvents: ConnectEvent[]) => void, onDisConnectedEvent: (isReconnect: boolean) => void, onConnectingEvent: (isReconnect: boolean) => void, onPushEvent: (streamID: number, msgType: number, msg: any) => void): void;
    createSocket(servers: string[]): void;
    destroySocket(type: DestroyType): void;
    refreshServers(servers: string[]): void;
    connectSocket(isNext?: boolean, success?: Function, failCB?: Function): boolean;
    bindSocketEvent(): void;
    closeSocket(): void;
    private connectEvent;
    resetConnect(): void;
    isConnect(): boolean;
    isDisConnect(): boolean;
    isConnecting(): boolean;
    setState(state: number): void;
    closeHandler(handler: (evt: any) => void): void;
    openHandler(handler: () => void): void;
    errorHandler(handler: (evt: Event) => void): void;
    updateMsgTime(): void;
    sendMessage(type: AccessHubMessageType, streamID: number, body: any, isFirst?: boolean, success?: Function | null, error?: Function | null, ackFunc?: Function | null, option?: {
        timeout?: number;
        isInSendMap?: boolean;
    }): void;
    checkUnSendMsgs(messageList: LinkedList<MessageItem>): void;
    sendUint8Data(type: AccessHubMessageType, reqBody: any, streamID: number): void;
    onMessage(): void;
    isRspMsg(txid: number): boolean;
    startCheck(): void;
    stopCheck(): void;
    private checkMessageListTimeout;
    private checkSendMessageList;
    protected handleSendCommandMsgRsp(streamID: number, msgType: number, txid: number, body: any): void;
}
export {};
