!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("protobufjs/minimal"),require("localforage"));else if("function"==typeof define&&define.amd)define(["protobufjs/minimal","localforage"],t);else{var n,r="object"==typeof exports?t(require("protobufjs/minimal"),require("localforage")):t(e["protobufjs/minimal"],e.localforage);for(n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,(function(e,t){return r=[function(e,t,n){"use strict";var r,o,i=(n=n(7)).Reader,s=n.Writer,a=n.util,c=n.roots.default||(n.roots.default={});function u(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function l(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function h(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function p(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function d(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function _(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function f(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function g(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function m(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function y(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function v(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function b(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function E(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function O(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function S(e){if(this.redirect_server=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function T(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function k(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function R(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function C(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function w(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function N(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function I(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function M(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function L(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function P(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function A(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function D(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function H(e){if(this.trans_seqs=[],this.user_trans_seqs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function U(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function j(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function x(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function B(e){if(this.user_basic_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function q(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function G(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function z(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function V(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function F(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Z(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function K(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Y(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function W(e){if(this.stream_info=[],this.stream_mix_info=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function X(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function J(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Q(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function $(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ee(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function te(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ne(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function re(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function oe(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ie(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function se(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ae(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ce(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ue(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function le(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function he(e){if(this.msg_data=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function pe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function de(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function _e(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function fe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ge(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function me(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ye(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ve(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function be(e){if(this.room_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ee(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Oe(e){if(this.stream_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Se(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Te(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ke(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Re(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ce(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function we(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ne(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ie(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Me(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Le(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Pe(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ae(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function De(e){if(this.msgs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function He(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ue(e){if(this.msgs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function je(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function xe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Be(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function qe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ge(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function ze(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ve(e){if(this.user_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Fe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ze(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ke(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Ye(e){if(this.stream_id_list=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function We(e){if(this.stream_info=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Xe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Je(e){if(this.msg_data=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function Qe(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function $e(e){if(this.msg_data=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function et(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function tt(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function nt(e){if(this.trans_array=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function rt(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}c.proto_switch=((n={}).CommonRsp=(u.prototype.rsp_head=null,u.create=function(e){return new u(e)},u.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},u.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.CommonRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},u),n.RspHead=(l.prototype.code=0,l.prototype.message="",l.create=function(e){return new l(e)},l.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},l.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.RspHead;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.code=e.uint32();break;case 2:r.message=e.string();break;default:e.skipType(7&o)}}return r},l),n.LoginRoomReq=(h.prototype.app_id=0,h.prototype.id_name=a.newBuffer([]),h.prototype.device_id="",h.prototype.term_type=0,h.prototype.net_type=0,h.prototype.sdk_ver=0,h.prototype.proto_ver=0,h.prototype.nick_name=a.newBuffer([]),h.prototype.client_stamp=a.newBuffer([]),h.prototype.crypt_version=0,h.prototype.k1_sign=a.newBuffer([]),h.prototype.login_token=a.newBuffer([]),h.prototype.relogin_token=a.newBuffer([]),h.prototype.role=0,h.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,h.prototype.room_id=a.newBuffer([]),h.prototype.room_name=a.newBuffer([]),h.prototype.biz_type=0,h.prototype.room_create_flag=0,h.prototype.user_state_flag=0,h.prototype.lv_key="",h.prototype.third_token=a.newBuffer([]),h.prototype.cluster_req=0,h.prototype.user_count_limit=0,h.prototype.relate_service="",h.prototype.biz_version="",h.prototype.login_logic=0,h.prototype.sdk_conn_type=0,h.create=function(e){return new h(e)},h.encode=function(e,t){return t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(26).string(e.device_id),null!=e.term_type&&Object.hasOwnProperty.call(e,"term_type")&&t.uint32(32).int32(e.term_type),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).int32(e.net_type),null!=e.sdk_ver&&Object.hasOwnProperty.call(e,"sdk_ver")&&t.uint32(48).uint32(e.sdk_ver),null!=e.proto_ver&&Object.hasOwnProperty.call(e,"proto_ver")&&t.uint32(56).int32(e.proto_ver),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(66).bytes(e.nick_name),null!=e.client_stamp&&Object.hasOwnProperty.call(e,"client_stamp")&&t.uint32(74).bytes(e.client_stamp),null!=e.crypt_version&&Object.hasOwnProperty.call(e,"crypt_version")&&t.uint32(80).uint32(e.crypt_version),null!=e.k1_sign&&Object.hasOwnProperty.call(e,"k1_sign")&&t.uint32(90).bytes(e.k1_sign),null!=e.login_token&&Object.hasOwnProperty.call(e,"login_token")&&t.uint32(98).bytes(e.login_token),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(106).bytes(e.relogin_token),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(112).uint32(e.role),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(120).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(130).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(138).bytes(e.room_name),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(144).uint32(e.biz_type),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(152).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(160).uint32(e.user_state_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(170).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(178).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(184).uint32(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(192).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(202).string(e.relate_service),null!=e.biz_version&&Object.hasOwnProperty.call(e,"biz_version")&&t.uint32(210).string(e.biz_version),null!=e.login_logic&&Object.hasOwnProperty.call(e,"login_logic")&&t.uint32(216).uint32(e.login_logic),null!=e.sdk_conn_type&&Object.hasOwnProperty.call(e,"sdk_conn_type")&&t.uint32(224).int32(e.sdk_conn_type),t},h.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.LoginRoomReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.app_id=e.uint32();break;case 2:r.id_name=e.bytes();break;case 3:r.device_id=e.string();break;case 4:r.term_type=e.int32();break;case 5:r.net_type=e.int32();break;case 6:r.sdk_ver=e.uint32();break;case 7:r.proto_ver=e.int32();break;case 8:r.nick_name=e.bytes();break;case 9:r.client_stamp=e.bytes();break;case 10:r.crypt_version=e.uint32();break;case 11:r.k1_sign=e.bytes();break;case 12:r.login_token=e.bytes();break;case 13:r.relogin_token=e.bytes();break;case 14:r.role=e.uint32();break;case 15:r.liveroom_session_id=e.uint64();break;case 16:r.room_id=e.bytes();break;case 17:r.room_name=e.bytes();break;case 18:r.biz_type=e.uint32();break;case 19:r.room_create_flag=e.uint32();break;case 20:r.user_state_flag=e.uint32();break;case 21:r.lv_key=e.string();break;case 22:r.third_token=e.bytes();break;case 23:r.cluster_req=e.uint32();break;case 24:r.user_count_limit=e.uint32();break;case 25:r.relate_service=e.string();break;case 26:r.biz_version=e.string();break;case 27:r.login_logic=e.uint32();break;case 28:r.sdk_conn_type=e.int32();break;default:e.skipType(7&o)}}return r},h),n.LoginRoomRsp=(p.prototype.rsp_head=null,p.prototype.room_id=a.newBuffer([]),p.prototype.heartbeat_interval=0,p.prototype.heartbeat_timeout=0,p.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,p.prototype.crypt_option=0,p.prototype.k2_sign=a.newBuffer([]),p.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.liveroom_hb_interval=0,p.prototype.liveroom_hb_timeout=0,p.prototype.anchor_info=null,p.prototype.stream_seq=0,p.prototype.stream_info=a.emptyArray,p.prototype.stream_fetch_flag=0,p.prototype.lv_key="",p.prototype.zp_key="",p.prototype.online_count=0,p.prototype.bigim_time_window=0,p.prototype.dati_time_window=0,p.prototype.cluster_name="",p.prototype.relogin_token=a.newBuffer([]),p.prototype.stream_mix_info=a.emptyArray,p.prototype.userlist_merge_timeout=0,p.prototype.userlist_interval=0,p.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.trans_seqs=a.emptyArray,p.prototype.stream_list_push_merge_timeout=0,p.prototype.stream_list_hb_wait_merge_time=0,p.prototype.trans_list_seq=0,p.prototype.token_remain_time=0,p.create=function(e){return new p(e)},p.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(24).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(32).uint32(e.heartbeat_timeout),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(40).int64(e.ret_timestamp),null!=e.crypt_option&&Object.hasOwnProperty.call(e,"crypt_option")&&t.uint32(48).uint32(e.crypt_option),null!=e.k2_sign&&Object.hasOwnProperty.call(e,"k2_sign")&&t.uint32(58).bytes(e.k2_sign),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(64).uint64(e.liveroom_session_id),null!=e.liveroom_hb_interval&&Object.hasOwnProperty.call(e,"liveroom_hb_interval")&&t.uint32(72).uint32(e.liveroom_hb_interval),null!=e.liveroom_hb_timeout&&Object.hasOwnProperty.call(e,"liveroom_hb_timeout")&&t.uint32(80).uint32(e.liveroom_hb_timeout),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&c.proto_switch.StAnchorInfo.encode(e.anchor_info,t.uint32(90).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(96).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var n=0;n<e.stream_info.length;++n)c.proto_switch.StStreamInfo.encode(e.stream_info[n],t.uint32(106).fork()).ldelim();if(null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(112).uint32(e.stream_fetch_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(122).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(130).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(136).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(144).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(152).uint32(e.dati_time_window),null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(162).string(e.cluster_name),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(170).bytes(e.relogin_token),null!=e.stream_mix_info&&e.stream_mix_info.length)for(n=0;n<e.stream_mix_info.length;++n)c.proto_switch.StStreamInfo.encode(e.stream_mix_info[n],t.uint32(178).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(184).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(192).uint32(e.userlist_interval),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(200).uint64(e.room_session_id),null!=e.trans_seqs&&e.trans_seqs.length)for(n=0;n<e.trans_seqs.length;++n)c.proto_switch.StTransInfo.encode(e.trans_seqs[n],t.uint32(210).fork()).ldelim();return null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(216).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(224).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(232).uint32(e.trans_list_seq),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(240).uint32(e.token_remain_time),t},p.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.LoginRoomRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32());break;case 2:r.room_id=e.bytes();break;case 3:r.heartbeat_interval=e.uint32();break;case 4:r.heartbeat_timeout=e.uint32();break;case 5:r.ret_timestamp=e.int64();break;case 6:r.crypt_option=e.uint32();break;case 7:r.k2_sign=e.bytes();break;case 8:r.liveroom_session_id=e.uint64();break;case 9:r.liveroom_hb_interval=e.uint32();break;case 10:r.liveroom_hb_timeout=e.uint32();break;case 11:r.anchor_info=c.proto_switch.StAnchorInfo.decode(e,e.uint32());break;case 12:r.stream_seq=e.uint32();break;case 13:r.stream_info&&r.stream_info.length||(r.stream_info=[]),r.stream_info.push(c.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 14:r.stream_fetch_flag=e.uint32();break;case 15:r.lv_key=e.string();break;case 16:r.zp_key=e.string();break;case 17:r.online_count=e.uint32();break;case 18:r.bigim_time_window=e.uint32();break;case 19:r.dati_time_window=e.uint32();break;case 20:r.cluster_name=e.string();break;case 21:r.relogin_token=e.bytes();break;case 22:r.stream_mix_info&&r.stream_mix_info.length||(r.stream_mix_info=[]),r.stream_mix_info.push(c.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 23:r.userlist_merge_timeout=e.uint32();break;case 24:r.userlist_interval=e.uint32();break;case 25:r.room_session_id=e.uint64();break;case 26:r.trans_seqs&&r.trans_seqs.length||(r.trans_seqs=[]),r.trans_seqs.push(c.proto_switch.StTransInfo.decode(e,e.uint32()));break;case 27:r.stream_list_push_merge_timeout=e.uint32();break;case 28:r.stream_list_hb_wait_merge_time=e.uint32();break;case 29:r.trans_list_seq=e.uint32();break;case 30:r.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return r},p),n.StAnchorInfo=(d.prototype.anchor_id_name=a.newBuffer([]),d.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,d.prototype.anchor_nick_name=a.newBuffer([]),d.create=function(e){return new d(e)},d.encode=function(e,t){return t=t||s.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},d.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.StAnchorInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.anchor_id_name=e.bytes();break;case 2:r.anchor_id=e.uint64();break;case 3:r.anchor_nick_name=e.bytes();break;default:e.skipType(7&o)}}return r},d),n.StStreamInfo=(_.prototype.stream_id=a.newBuffer([]),_.prototype.stream_sid="",_.prototype.id_name=a.newBuffer([]),_.prototype.nick_name=a.newBuffer([]),_.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,_.prototype.extra_info=a.newBuffer([]),_.prototype.title=a.newBuffer([]),_.prototype.stream_ver=0,_.prototype.stream_attr=a.newBuffer([]),_.prototype.stream_src=0,_.prototype.stream_state=0,_.prototype.stream_type=0,_.prototype.stream_nid=0,_.create=function(e){return new _(e)},_.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(41).fixed64(e.create_time),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(58).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(64).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(74).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(88).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},_.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.StStreamInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.stream_id=e.bytes();break;case 2:r.stream_sid=e.string();break;case 3:r.id_name=e.bytes();break;case 4:r.nick_name=e.bytes();break;case 5:r.create_time=e.fixed64();break;case 6:r.extra_info=e.bytes();break;case 7:r.title=e.bytes();break;case 8:r.stream_ver=e.uint32();break;case 9:r.stream_attr=e.bytes();break;case 10:r.stream_src=e.uint32();break;case 11:r.stream_state=e.uint32();break;case 12:r.stream_type=e.uint32();break;case 13:r.stream_nid=e.uint32();break;default:e.skipType(7&o)}}return r},_),n.StTransSeqInfo=(f.prototype.trans_type=a.newBuffer([]),f.prototype.trans_seq=0,f.create=function(e){return new f(e)},f.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},f.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.StTransSeqInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return r},f),n.StTransInfo=(g.prototype.trans_channel=a.newBuffer([]),g.prototype.trans_seq_array=a.emptyArray,g.create=function(e){return new g(e)},g.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var n=0;n<e.trans_seq_array.length;++n)c.proto_switch.StTransSeqInfo.encode(e.trans_seq_array[n],t.uint32(18).fork()).ldelim();return t},g.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.StTransInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_channel=e.bytes();break;case 2:r.trans_seq_array&&r.trans_seq_array.length||(r.trans_seq_array=[]),r.trans_seq_array.push(c.proto_switch.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},g),n.LogoutRoomReq=(m.prototype.logout_code=0,m.prototype.logout_check=a.newBuffer([]),m.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,m.prototype.room_id=a.newBuffer([]),m.prototype.role=0,m.prototype.nickname=a.newBuffer([]),m.prototype.logout_logic=0,m.create=function(e){return new m(e)},m.encode=function(e,t){return t=t||s.create(),null!=e.logout_code&&Object.hasOwnProperty.call(e,"logout_code")&&t.uint32(8).uint32(e.logout_code),null!=e.logout_check&&Object.hasOwnProperty.call(e,"logout_check")&&t.uint32(18).bytes(e.logout_check),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(24).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(34).bytes(e.room_id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(50).bytes(e.nickname),null!=e.logout_logic&&Object.hasOwnProperty.call(e,"logout_logic")&&t.uint32(56).uint32(e.logout_logic),t},m.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.LogoutRoomReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.logout_code=e.uint32();break;case 2:r.logout_check=e.bytes();break;case 3:r.liveroom_session_id=e.uint64();break;case 4:r.room_id=e.bytes();break;case 5:r.role=e.uint32();break;case 6:r.nickname=e.bytes();break;case 7:r.logout_logic=e.uint32();break;default:e.skipType(7&o)}}return r},m),n.LogoutRoomRsp=(y.prototype.rsp_head=null,y.create=function(e){return new y(e)},y.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},y.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.LogoutRoomRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},y),n.TcpHbReq=(v.prototype.id_name=a.newBuffer([]),v.create=function(e){return new v(e)},v.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),t},v.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.TcpHbReq;e.pos<n;){var o=e.uint32();o>>>3==1?r.id_name=e.bytes():e.skipType(7&o)}return r},v),n.TcpHbRsp=(b.prototype.rsp_head=null,b.prototype.heartbeat_interval=0,b.prototype.heartbeat_timeout=0,b.prototype.server_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,b.create=function(e){return new b(e)},b.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(16).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(24).uint32(e.heartbeat_timeout),null!=e.server_timestamp&&Object.hasOwnProperty.call(e,"server_timestamp")&&t.uint32(32).int64(e.server_timestamp),t},b.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.TcpHbRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32());break;case 2:r.heartbeat_interval=e.uint32();break;case 3:r.heartbeat_timeout=e.uint32();break;case 4:r.server_timestamp=e.int64();break;default:e.skipType(7&o)}}return r},b),n.TermType=(o={},(r=Object.create(o))[o[0]="TT_NONE"]=0,r[o[1]="TT_PC"]=1,r[o[2]="TT_IOS"]=2,r[o[3]="TT_ANDROID"]=3,r[o[4]="TT_MAC"]=4,r[o[5]="TT_LINUX"]=5,r[o[6]="TT_WEB"]=6,r[o[7]="TT_MINIPROGRAM"]=7,r[o[32]="TT_UNKNOWN"]=32,r),n.NetType=(o={},(r=Object.create(o))[o[0]="NT_NONE"]=0,r[o[1]="NT_LINE"]=1,r[o[2]="NT_WIFI"]=2,r[o[3]="NT_2G"]=3,r[o[4]="NT_3G"]=4,r[o[5]="NT_4G"]=5,r[o[32]="NT_UNKNOWN"]=32,r),n.ProductType=(o={},(r=Object.create(o))[o[0]="PRODUCT_TYPE_NONE"]=0,r[o[1]="PRODUCT_TYPE_LIVEROOM"]=1,r[o[2]="PRODUCT_TYPE_IM"]=2,r),n.LiveroomProtoVersion=(o={},(r=Object.create(o))[o[0]="PROTO_VERSION_NONE"]=0,r[o[131072]="RPOTO_V020000"]=131072,r),n.SdkConnType=(o={},(r=Object.create(o))[o[0]="SdkConnType_None"]=0,r[o[1]="SdkConnType_Tcp"]=1,r[o[2]="SdkConnType_Websocket"]=2,r),n.Header=(E.prototype.cmd="",E.prototype.seq=0,E.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,E.prototype.app_id=0,E.prototype.user_id="",E.prototype.session_id=a.Long?a.Long.fromBits(0,0,!1):0,E.prototype.user_nid=a.Long?a.Long.fromBits(0,0,!1):0,E.prototype.controls=a.newBuffer([]),E.prototype.product=0,E.prototype.flags=a.newBuffer([]),E.create=function(e){return new E(e)},E.encode=function(e,t){return t=t||s.create(),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(10).string(e.cmd),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint32(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(32).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(48).int64(e.session_id),null!=e.user_nid&&Object.hasOwnProperty.call(e,"user_nid")&&t.uint32(56).int64(e.user_nid),null!=e.controls&&Object.hasOwnProperty.call(e,"controls")&&t.uint32(66).bytes(e.controls),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(72).int32(e.product),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(82).bytes(e.flags),t},E.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.Header;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cmd=e.string();break;case 2:r.seq=e.uint32();break;case 3:r.timestamp=e.int64();break;case 4:r.app_id=e.uint32();break;case 5:r.user_id=e.string();break;case 6:r.session_id=e.int64();break;case 7:r.user_nid=e.int64();break;case 8:r.controls=e.bytes();break;case 9:r.product=e.int32();break;case 10:r.flags=e.bytes();break;default:e.skipType(7&o)}}return r},E),n.PushKickout=(O.prototype.reason=0,O.prototype.message="",O.prototype.need_relogin=0,O.create=function(e){return new O(e)},O.encode=function(e,t){return t=t||s.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).uint32(e.reason),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.need_relogin&&Object.hasOwnProperty.call(e,"need_relogin")&&t.uint32(24).uint32(e.need_relogin),t},O.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.PushKickout;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.reason=e.uint32();break;case 2:r.message=e.string();break;case 3:r.need_relogin=e.uint32();break;default:e.skipType(7&o)}}return r},O),n.PushRedirect2Sdk=(S.prototype.redirect_server=a.emptyArray,S.create=function(e){return new S(e)},S.encode=function(e,t){if(t=t||s.create(),null!=e.redirect_server&&e.redirect_server.length)for(var n=0;n<e.redirect_server.length;++n)t.uint32(10).string(e.redirect_server[n]);return t},S.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.PushRedirect2Sdk;e.pos<n;){var o=e.uint32();o>>>3==1?(r.redirect_server&&r.redirect_server.length||(r.redirect_server=[]),r.redirect_server.push(e.string())):e.skipType(7&o)}return r},S),n.PushReq=(T.prototype.head=null,T.prototype.msg_body=a.newBuffer([]),T.create=function(e){return new T(e)},T.encode=function(e,t){return t=t||s.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&c.proto_switch.PushReqHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(18).bytes(e.msg_body),t},T.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.PushReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.head=c.proto_switch.PushReqHead.decode(e,e.uint32());break;case 2:r.msg_body=e.bytes();break;default:e.skipType(7&o)}}return r},T),n.PushReqHead=(k.prototype.sub_cmd="",k.prototype.sender_user_id="",k.prototype.qos_flag=0,k.prototype.msg_id="",k.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,k.prototype.room_id=a.newBuffer([]),k.prototype.sender_user_nid=a.Long?a.Long.fromBits(0,0,!0):0,k.create=function(e){return new k(e)},k.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sender_user_id&&Object.hasOwnProperty.call(e,"sender_user_id")&&t.uint32(18).string(e.sender_user_id),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(24).uint32(e.qos_flag),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(40).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(50).bytes(e.room_id),null!=e.sender_user_nid&&Object.hasOwnProperty.call(e,"sender_user_nid")&&t.uint32(56).uint64(e.sender_user_nid),t},k.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.PushReqHead;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.sub_cmd=e.string();break;case 2:r.sender_user_id=e.string();break;case 3:r.qos_flag=e.uint32();break;case 4:r.msg_id=e.string();break;case 5:r.send_time=e.int64();break;case 6:r.room_id=e.bytes();break;case 7:r.sender_user_nid=e.uint64();break;default:e.skipType(7&o)}}return r},k),n.PushRsp=(R.prototype.code=0,R.prototype.message="",R.prototype.sub_cmd="",R.prototype.msg_id="",R.prototype.server_send_time=a.Long?a.Long.fromBits(0,0,!1):0,R.create=function(e){return new R(e)},R.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(26).string(e.sub_cmd),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.server_send_time&&Object.hasOwnProperty.call(e,"server_send_time")&&t.uint32(40).int64(e.server_send_time),t},R.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.PushRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.code=e.uint32();break;case 2:r.message=e.string();break;case 3:r.sub_cmd=e.string();break;case 4:r.msg_id=e.string();break;case 5:r.server_send_time=e.int64();break;default:e.skipType(7&o)}}return r},R),n.MergePushHead=(C.prototype.qos_flag=0,C.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,C.prototype.room_id=a.newBuffer([]),C.create=function(e){return new C(e)},C.encode=function(e,t){return t=t||s.create(),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(8).uint32(e.qos_flag),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(16).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(26).bytes(e.room_id),t},C.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.MergePushHead;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.qos_flag=e.uint32();break;case 2:r.send_time=e.int64();break;case 3:r.room_id=e.bytes();break;default:e.skipType(7&o)}}return r},C),n.MergePushInfo=(w.prototype.sub_cmd="",w.prototype.sub_seq=0,w.prototype.sender_nid=a.Long?a.Long.fromBits(0,0,!0):0,w.prototype.msg_id=a.newBuffer([]),w.prototype.msg_body=a.newBuffer([]),w.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,w.create=function(e){return new w(e)},w.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.sender_nid&&Object.hasOwnProperty.call(e,"sender_nid")&&t.uint32(24).uint64(e.sender_nid),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).bytes(e.msg_id),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(42).bytes(e.msg_body),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(48).int64(e.msg_timestamp),t},w.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.MergePushInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.sub_cmd=e.string();break;case 2:r.sub_seq=e.uint32();break;case 3:r.sender_nid=e.uint64();break;case 4:r.msg_id=e.bytes();break;case 5:r.msg_body=e.bytes();break;case 6:r.msg_timestamp=e.int64();break;default:e.skipType(7&o)}}return r},w),n.CmdMergePushReq=(N.prototype.head=null,N.prototype.messages=a.emptyArray,N.create=function(e){return new N(e)},N.encode=function(e,t){if(t=t||s.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&c.proto_switch.MergePushHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)c.proto_switch.MergePushInfo.encode(e.messages[n],t.uint32(18).fork()).ldelim();return t},N.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.CmdMergePushReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.head=c.proto_switch.MergePushHead.decode(e,e.uint32());break;case 2:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(c.proto_switch.MergePushInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},N),n.CmdMergePushRspInfo=(I.prototype.sub_cmd="",I.prototype.sub_seq=0,I.prototype.msg_id=a.newBuffer([]),I.create=function(e){return new I(e)},I.encode=function(e,t){return t=t||s.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(26).bytes(e.msg_id),t},I.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.CmdMergePushRspInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.sub_cmd=e.string();break;case 2:r.sub_seq=e.uint32();break;case 3:r.msg_id=e.bytes();break;default:e.skipType(7&o)}}return r},I),n.CmdMergePushRsp=(M.prototype.messages=a.emptyArray,M.create=function(e){return new M(e)},M.encode=function(e,t){if(t=t||s.create(),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)c.proto_switch.CmdMergePushRspInfo.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},M.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.proto_switch.CmdMergePushRsp;e.pos<n;){var o=e.uint32();o>>>3==1?(r.messages&&r.messages.length||(r.messages=[]),r.messages.push(c.proto_switch.CmdMergePushRspInfo.decode(e,e.uint32()))):e.skipType(7&o)}return r},M),n),c.liveroom_cs=((o={}).ReqHead=(L.prototype.room_id="",L.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,L.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,L.create=function(e){return new L(e)},L.encode=function(e,t){return t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(16).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(24).uint64(e.room_session_id),t},L.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.ReqHead;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_id=e.string();break;case 2:r.user_session_id=e.uint64();break;case 3:r.room_session_id=e.uint64();break;default:e.skipType(7&o)}}return r},L),o.RspHead=(P.prototype.code=0,P.prototype.message="",P.create=function(e){return new P(e)},P.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},P.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RspHead;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.code=e.uint32();break;case 2:r.message=e.string();break;default:e.skipType(7&o)}}return r},P),o.CommonRsp=(A.prototype.rsp_head=null,A.create=function(e){return new A(e)},A.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},A.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.CommonRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},A),o.HbReq=(D.prototype.req_head=null,D.prototype.role=0,D.prototype.lv_key="",D.create=function(e){return new D(e)},D.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(16).uint32(e.role),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(26).string(e.lv_key),t},D.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.HbReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.role=e.uint32();break;case 3:r.lv_key=e.string();break;default:e.skipType(7&o)}}return r},D),o.HbRsp=(H.prototype.rsp_head=null,H.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,H.prototype.hb_interval=0,H.prototype.hb_timeout=0,H.prototype.stream_seq=0,H.prototype.user_seq=a.Long?a.Long.fromBits(0,0,!1):0,H.prototype.online_count=0,H.prototype.bigim_time_window=0,H.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,H.prototype.trans_seqs=a.emptyArray,H.prototype.user_trans_seqs=a.emptyArray,H.prototype.StreamRefresh=0,H.prototype.trans_list_seq=0,H.create=function(e){return new H(e)},H.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(16).int64(e.ret_timestamp),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(24).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(32).uint32(e.hb_timeout),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(40).uint32(e.stream_seq),null!=e.user_seq&&Object.hasOwnProperty.call(e,"user_seq")&&t.uint32(48).int64(e.user_seq),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(56).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(64).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(72).int64(e.dati_time_window),null!=e.trans_seqs&&e.trans_seqs.length)for(var n=0;n<e.trans_seqs.length;++n)c.liveroom_cs.StTransChannelSeq.encode(e.trans_seqs[n],t.uint32(82).fork()).ldelim();if(null!=e.user_trans_seqs&&e.user_trans_seqs.length)for(n=0;n<e.user_trans_seqs.length;++n)c.liveroom_cs.StTransChannelSeq.encode(e.user_trans_seqs[n],t.uint32(90).fork()).ldelim();return null!=e.StreamRefresh&&Object.hasOwnProperty.call(e,"StreamRefresh")&&t.uint32(96).uint32(e.StreamRefresh),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(104).uint32(e.trans_list_seq),t},H.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.HbRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.ret_timestamp=e.int64();break;case 3:r.hb_interval=e.uint32();break;case 4:r.hb_timeout=e.uint32();break;case 5:r.stream_seq=e.uint32();break;case 6:r.user_seq=e.int64();break;case 7:r.online_count=e.uint32();break;case 8:r.bigim_time_window=e.uint32();break;case 9:r.dati_time_window=e.int64();break;case 10:r.trans_seqs&&r.trans_seqs.length||(r.trans_seqs=[]),r.trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 11:r.user_trans_seqs&&r.user_trans_seqs.length||(r.user_trans_seqs=[]),r.user_trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 12:r.StreamRefresh=e.uint32();break;case 13:r.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return r},H),o.StTransSeq=(U.prototype.trans_type=a.newBuffer([]),U.prototype.trans_seq=0,U.create=function(e){return new U(e)},U.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},U.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StTransSeq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return r},U),o.StTransChannelSeq=(j.prototype.trans_channel=a.newBuffer([]),j.prototype.trans_seq_array=a.emptyArray,j.create=function(e){return new j(e)},j.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var n=0;n<e.trans_seq_array.length;++n)c.liveroom_cs.StTransSeq.encode(e.trans_seq_array[n],t.uint32(18).fork()).ldelim();return t},j.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StTransChannelSeq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_channel=e.bytes();break;case 2:r.trans_seq_array&&r.trans_seq_array.length||(r.trans_seq_array=[]),r.trans_seq_array.push(c.liveroom_cs.StTransSeq.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},j),o.UserlistReq=(x.prototype.req_head=null,x.prototype.sort_type=0,x.prototype.user_index=0,x.create=function(e){return new x(e)},x.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(16).uint32(e.sort_type),null!=e.user_index&&Object.hasOwnProperty.call(e,"user_index")&&t.uint32(24).uint32(e.user_index),t},x.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.UserlistReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.sort_type=e.uint32();break;case 3:r.user_index=e.uint32();break;default:e.skipType(7&o)}}return r},x),o.UserlistRsp=(B.prototype.rsp_head=null,B.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!0):0,B.prototype.server_user_index=a.Long?a.Long.fromBits(0,0,!1):0,B.prototype.ret_user_index=a.Long?a.Long.fromBits(0,0,!1):0,B.prototype.user_basic_list=a.emptyArray,B.create=function(e){return new B(e)},B.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).uint64(e.server_user_seq),null!=e.server_user_index&&Object.hasOwnProperty.call(e,"server_user_index")&&t.uint32(24).int64(e.server_user_index),null!=e.ret_user_index&&Object.hasOwnProperty.call(e,"ret_user_index")&&t.uint32(32).int64(e.ret_user_index),null!=e.user_basic_list&&e.user_basic_list.length)for(var n=0;n<e.user_basic_list.length;++n)c.liveroom_cs.StUserBasicDef.encode(e.user_basic_list[n],t.uint32(42).fork()).ldelim();return t},B.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.UserlistRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.server_user_seq=e.uint64();break;case 3:r.server_user_index=e.int64();break;case 4:r.ret_user_index=e.int64();break;case 5:r.user_basic_list&&r.user_basic_list.length||(r.user_basic_list=[]),r.user_basic_list.push(c.liveroom_cs.StUserBasicDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},B),o.StUserBasicDef=(q.prototype.id_name=a.newBuffer([]),q.prototype.nick_name=a.newBuffer([]),q.prototype.role=0,q.create=function(e){return new q(e)},q.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),t},q.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StUserBasicDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.id_name=e.bytes();break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;default:e.skipType(7&o)}}return r},q),o.StreamAddReq=(G.prototype.req_head=null,G.prototype.stream_id=a.newBuffer([]),G.prototype.title=a.newBuffer([]),G.prototype.stream_attr=a.newBuffer([]),G.prototype.extra_info=a.newBuffer([]),G.prototype.client_req_seq=0,G.prototype.nickname=a.newBuffer([]),G.prototype.login_mode=0,G.prototype.stream_type=0,G.prototype.third_token=a.newBuffer([]),G.create=function(e){return new G(e)},G.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(34).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(48).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(58).bytes(e.nickname),null!=e.login_mode&&Object.hasOwnProperty.call(e,"login_mode")&&t.uint32(64).uint32(e.login_mode),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(72).uint32(e.stream_type),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(82).bytes(e.third_token),t},G.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamAddReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.stream_id=e.bytes();break;case 3:r.title=e.bytes();break;case 4:r.stream_attr=e.bytes();break;case 5:r.extra_info=e.bytes();break;case 6:r.client_req_seq=e.uint32();break;case 7:r.nickname=e.bytes();break;case 8:r.login_mode=e.uint32();break;case 9:r.stream_type=e.uint32();break;case 10:r.third_token=e.bytes();break;default:e.skipType(7&o)}}return r},G),o.StreamAddRsp=(z.prototype.rsp_head=null,z.prototype.stream_seq=0,z.prototype.stream_sid="",z.prototype.stream_ver=0,z.prototype.stream_nid=0,z.prototype.token_remain_time=0,z.create=function(e){return new z(e)},z.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(26).string(e.stream_sid),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(32).uint32(e.stream_ver),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(40).uint32(e.stream_nid),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(48).uint32(e.token_remain_time),t},z.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamAddRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.stream_seq=e.uint32();break;case 3:r.stream_sid=e.string();break;case 4:r.stream_ver=e.uint32();break;case 5:r.stream_nid=e.uint32();break;case 6:r.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return r},z),o.StreamDeleteReq=(V.prototype.req_head=null,V.prototype.stream_sid="",V.prototype.stream_id=a.newBuffer([]),V.prototype.client_req_seq=0,V.create=function(e){return new V(e)},V.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(32).uint32(e.client_req_seq),t},V.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamDeleteReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.stream_sid=e.string();break;case 3:r.stream_id=e.bytes();break;case 4:r.client_req_seq=e.uint32();break;default:e.skipType(7&o)}}return r},V),o.StreamDeleteRsp=(F.prototype.rsp_head=null,F.prototype.stream_seq=0,F.prototype.stream_ver=0,F.create=function(e){return new F(e)},F.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},F.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamDeleteRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.stream_seq=e.uint32();break;case 3:r.stream_ver=e.uint32();break;default:e.skipType(7&o)}}return r},F),o.StreamUpdateReq=(Z.prototype.req_head=null,Z.prototype.stream_sid="",Z.prototype.stream_id=a.newBuffer([]),Z.prototype.title=a.newBuffer([]),Z.prototype.stream_attr=a.newBuffer([]),Z.prototype.extra_info=a.newBuffer([]),Z.prototype.client_req_seq=0,Z.prototype.nickname=a.newBuffer([]),Z.create=function(e){return new Z(e)},Z.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(34).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(42).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(56).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(66).bytes(e.nickname),t},Z.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamUpdateReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.stream_sid=e.string();break;case 3:r.stream_id=e.bytes();break;case 4:r.title=e.bytes();break;case 5:r.stream_attr=e.bytes();break;case 6:r.extra_info=e.bytes();break;case 7:r.client_req_seq=e.uint32();break;case 8:r.nickname=e.bytes();break;default:e.skipType(7&o)}}return r},Z),o.StreamUpdateRsp=(K.prototype.rsp_head=null,K.prototype.stream_seq=0,K.prototype.stream_ver=0,K.create=function(e){return new K(e)},K.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},K.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamUpdateRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.stream_seq=e.uint32();break;case 3:r.stream_ver=e.uint32();break;default:e.skipType(7&o)}}return r},K),o.StreamListReq=(Y.prototype.req_head=null,Y.create=function(e){return new Y(e)},Y.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},Y.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamListReq;e.pos<n;){var o=e.uint32();o>>>3==1?r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&o)}return r},Y),o.StreamListRsp=(W.prototype.rsp_head=null,W.prototype.stream_seq=0,W.prototype.stream_info=a.emptyArray,W.prototype.stream_refresh=0,W.prototype.stream_mix_info=a.emptyArray,W.create=function(e){return new W(e)},W.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var n=0;n<e.stream_info.length;++n)c.liveroom_cs.StStreamInfo.encode(e.stream_info[n],t.uint32(26).fork()).ldelim();if(null!=e.stream_refresh&&Object.hasOwnProperty.call(e,"stream_refresh")&&t.uint32(32).uint32(e.stream_refresh),null!=e.stream_mix_info&&e.stream_mix_info.length)for(n=0;n<e.stream_mix_info.length;++n)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[n],t.uint32(42).fork()).ldelim();return t},W.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StreamListRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.stream_seq=e.uint32();break;case 3:r.stream_info&&r.stream_info.length||(r.stream_info=[]),r.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 4:r.stream_refresh=e.uint32();break;case 5:r.stream_mix_info&&r.stream_mix_info.length||(r.stream_mix_info=[]),r.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},W),o.StStreamInfo=(X.prototype.stream_sid="",X.prototype.stream_id=a.newBuffer([]),X.prototype.id_name=a.newBuffer([]),X.prototype.nick_name=a.newBuffer([]),X.prototype.extra_info=a.newBuffer([]),X.prototype.title=a.newBuffer([]),X.prototype.stream_ver=0,X.prototype.stream_attr=a.newBuffer([]),X.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,X.prototype.stream_src=0,X.prototype.state=0,X.prototype.stream_type=0,X.prototype.stream_nid=0,X.create=function(e){return new X(e)},X.encode=function(e,t){return t=t||s.create(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(10).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(56).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(66).bytes(e.stream_attr),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(72).int64(e.create_time),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(88).uint32(e.state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},X.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StStreamInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.stream_sid=e.string();break;case 2:r.stream_id=e.bytes();break;case 3:r.id_name=e.bytes();break;case 4:r.nick_name=e.bytes();break;case 5:r.extra_info=e.bytes();break;case 6:r.title=e.bytes();break;case 7:r.stream_ver=e.uint32();break;case 8:r.stream_attr=e.bytes();break;case 9:r.create_time=e.int64();break;case 10:r.stream_src=e.uint32();break;case 11:r.state=e.uint32();break;case 12:r.stream_type=e.uint32();break;case 13:r.stream_nid=e.uint32();break;default:e.skipType(7&o)}}return r},X),o.StDstUser=(J.prototype.id_name=a.newBuffer([]),J.prototype.id=a.Long?a.Long.fromBits(0,0,!0):0,J.create=function(e){return new J(e)},J.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).uint64(e.id),t},J.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StDstUser;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.id_name=e.bytes();break;case 2:r.id=e.uint64();break;default:e.skipType(7&o)}}return r},J),o.SignalLiveReq=(Q.prototype.req_head=null,Q.prototype.push_message=a.newBuffer([]),Q.prototype.dst_userlist=a.emptyArray,Q.create=function(e){return new Q(e)},Q.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var n=0;n<e.dst_userlist.length;++n)c.liveroom_cs.StDstUser.encode(e.dst_userlist[n],t.uint32(26).fork()).ldelim();return t},Q.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.push_message=e.bytes();break;case 3:r.dst_userlist&&r.dst_userlist.length||(r.dst_userlist=[]),r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Q),o.SignalLiveRsp=($.prototype.rsp_head=null,$.create=function(e){return new $(e)},$.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},$.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},$),o.SignalLiveResultReq=(ee.prototype.req_head=null,ee.prototype.push_message=a.newBuffer([]),ee.prototype.dst_userlist=a.emptyArray,ee.create=function(e){return new ee(e)},ee.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var n=0;n<e.dst_userlist.length;++n)c.liveroom_cs.StDstUser.encode(e.dst_userlist[n],t.uint32(26).fork()).ldelim();return t},ee.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveResultReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.push_message=e.bytes();break;case 3:r.dst_userlist&&r.dst_userlist.length||(r.dst_userlist=[]),r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},ee),o.SignalLiveResulRsp=(te.prototype.rsp_head=null,te.create=function(e){return new te(e)},te.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},te.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveResulRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},te),o.SignalLiveInviteReq=(ne.prototype.req_head=null,ne.prototype.push_message=a.newBuffer([]),ne.prototype.dst_userlist=a.emptyArray,ne.create=function(e){return new ne(e)},ne.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var n=0;n<e.dst_userlist.length;++n)c.liveroom_cs.StDstUser.encode(e.dst_userlist[n],t.uint32(26).fork()).ldelim();return t},ne.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveInviteReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.push_message=e.bytes();break;case 3:r.dst_userlist&&r.dst_userlist.length||(r.dst_userlist=[]),r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},ne),o.SignalLiveInviteRsp=(re.prototype.rsp_head=null,re.create=function(e){return new re(e)},re.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},re.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveInviteRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},re),o.SignalLiveStopReq=(oe.prototype.req_head=null,oe.prototype.push_message=a.newBuffer([]),oe.prototype.dst_userlist=a.emptyArray,oe.create=function(e){return new oe(e)},oe.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var n=0;n<e.dst_userlist.length;++n)c.liveroom_cs.StDstUser.encode(e.dst_userlist[n],t.uint32(26).fork()).ldelim();return t},oe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveStopReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.push_message=e.bytes();break;case 3:r.dst_userlist&&r.dst_userlist.length||(r.dst_userlist=[]),r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},oe),o.SignalLiveStopRsp=(ie.prototype.rsp_head=null,ie.create=function(e){return new ie(e)},ie.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ie.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveStopRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},ie),o.SignalLiveCustomReq=(se.prototype.req_head=null,se.prototype.push_message=a.newBuffer([]),se.prototype.dst_userlist=a.emptyArray,se.create=function(e){return new se(e)},se.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var n=0;n<e.dst_userlist.length;++n)c.liveroom_cs.StDstUser.encode(e.dst_userlist[n],t.uint32(26).fork()).ldelim();return t},se.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveCustomReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.push_message=e.bytes();break;case 3:r.dst_userlist&&r.dst_userlist.length||(r.dst_userlist=[]),r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},se),o.SignalLiveCustomRsp=(ae.prototype.rsp_head=null,ae.create=function(e){return new ae(e)},ae.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ae.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.SignalLiveCustomRsp;e.pos<n;){var o=e.uint32();o>>>3==1?r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return r},ae),o.ImChatReq=(ce.prototype.req_head=null,ce.prototype.msg_category=0,ce.prototype.msg_type=0,ce.prototype.msg_priority=0,ce.prototype.msg_content=a.newBuffer([]),ce.prototype.dst_userlist=a.emptyArray,ce.create=function(e){return new ce(e)},ce.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(16).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(24).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(32).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(42).bytes(e.msg_content),null!=e.dst_userlist&&e.dst_userlist.length)for(var n=0;n<e.dst_userlist.length;++n)c.liveroom_cs.StDstUser.encode(e.dst_userlist[n],t.uint32(50).fork()).ldelim();return t},ce.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.ImChatReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.msg_category=e.uint32();break;case 3:r.msg_type=e.uint32();break;case 4:r.msg_priority=e.uint32();break;case 5:r.msg_content=e.bytes();break;case 6:r.dst_userlist&&r.dst_userlist.length||(r.dst_userlist=[]),r.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},ce),o.ImChatRsp=(ue.prototype.rsp_head=null,ue.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,ue.create=function(e){return new ue(e)},ue.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(16).uint64(e.msg_id),t},ue.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.ImChatRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.msg_id=e.uint64();break;default:e.skipType(7&o)}}return r},ue),o.ImGethatReq=(le.prototype.req_head=null,le.prototype.msg_priority=0,le.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,le.prototype.sort_type=0,le.prototype.msg_count=0,le.create=function(e){return new le(e)},le.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(16).uint32(e.msg_priority),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(24).uint64(e.msg_id),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(32).uint32(e.sort_type),null!=e.msg_count&&Object.hasOwnProperty.call(e,"msg_count")&&t.uint32(40).uint32(e.msg_count),t},le.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.ImGethatReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.msg_priority=e.uint32();break;case 3:r.msg_id=e.uint64();break;case 4:r.sort_type=e.uint32();break;case 5:r.msg_count=e.uint32();break;default:e.skipType(7&o)}}return r},le),o.ImGetChatRsp=(he.prototype.rsp_head=null,he.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,he.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,he.prototype.msg_data=a.emptyArray,he.create=function(e){return new he(e)},he.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var n=0;n<e.msg_data.length;++n)c.liveroom_cs.StMsgData.encode(e.msg_data[n],t.uint32(34).fork()).ldelim();return t},he.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.ImGetChatRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.server_msg_id=e.uint64();break;case 3:r.ret_msg_id=e.uint64();break;case 4:r.msg_data&&r.msg_data.length||(r.msg_data=[]),r.msg_data.push(c.liveroom_cs.StMsgData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},he),o.StMsgData=(pe.prototype.id_name=a.newBuffer([]),pe.prototype.nick_name=a.newBuffer([]),pe.prototype.role=0,pe.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,pe.prototype.msg_category=0,pe.prototype.msg_type=0,pe.prototype.msg_priority=0,pe.prototype.msg_content=a.newBuffer([]),pe.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,pe.create=function(e){return new pe(e)},pe.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},pe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StMsgData;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.id_name=e.bytes();break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.msg_id=e.uint64();break;case 5:r.msg_category=e.uint32();break;case 6:r.msg_type=e.uint32();break;case 7:r.msg_priority=e.uint32();break;case 8:r.msg_content=e.bytes();break;case 9:r.send_time=e.int64();break;default:e.skipType(7&o)}}return r},pe),o.EnterReq=(de.prototype.req_head=null,de.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.nick_name=a.newBuffer([]),de.prototype.role=0,de.prototype.net_type=0,de.prototype.config=null,de.prototype.lv_key="",de.prototype.third_token=a.newBuffer([]),de.prototype.cluster_req=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.user_count_limit=0,de.prototype.relate_service="",de.prototype.conn_type=0,de.prototype.room_name=a.newBuffer([]),de.create=function(e){return new de(e)},de.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).uint32(e.net_type),null!=e.config&&Object.hasOwnProperty.call(e,"config")&&c.liveroom_cs.StConfigList.encode(e.config,t.uint32(50).fork()).ldelim(),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(58).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(66).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(72).uint64(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(80).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(90).string(e.relate_service),null!=e.conn_type&&Object.hasOwnProperty.call(e,"conn_type")&&t.uint32(96).uint32(e.conn_type),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(106).bytes(e.room_name),t},de.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.EnterReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.switch_session_id=e.uint64();break;case 3:r.nick_name=e.bytes();break;case 4:r.role=e.uint32();break;case 5:r.net_type=e.uint32();break;case 6:r.config=c.liveroom_cs.StConfigList.decode(e,e.uint32());break;case 7:r.lv_key=e.string();break;case 8:r.third_token=e.bytes();break;case 9:r.cluster_req=e.uint64();break;case 10:r.user_count_limit=e.uint32();break;case 11:r.relate_service=e.string();break;case 12:r.conn_type=e.uint32();break;case 13:r.room_name=e.bytes();break;default:e.skipType(7&o)}}return r},de),o.EnterRsp=(_e.prototype.rsp_head=null,_e.prototype.room_id=a.newBuffer([]),_e.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,_e.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,_e.prototype.user_id=a.Long?a.Long.fromBits(0,0,!0):0,_e.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,_e.prototype.bigim_time_window=0,_e.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,_e.prototype.room_id32=0,_e.prototype.hb_interval=0,_e.prototype.hb_timeout=0,_e.prototype.lv_key="",_e.prototype.zp_key="",_e.prototype.online_count=0,_e.prototype.anchor_info=null,_e.prototype.stream_seq=0,_e.prototype.stream_info=a.emptyArray,_e.prototype.stream_mix_info=a.emptyArray,_e.prototype.userlist_merge_timeout=0,_e.prototype.userlist_interval=0,_e.prototype.stream_list_push_merge_timeout=0,_e.prototype.stream_list_hb_wait_merge_time=0,_e.prototype.trans_list_seq=0,_e.prototype.trans_seqs=a.emptyArray,_e.prototype.cluster_name="",_e.prototype.token_remain_time=0,_e.prototype.stream_fetch_flag=0,_e.create=function(e){return new _e(e)},_e.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(24).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(32).uint64(e.room_session_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(40).uint64(e.user_id),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(49).fixed64(e.ret_timestamp),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(56).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(64).int64(e.dati_time_window),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(72).uint32(e.room_id32),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(80).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(88).uint32(e.hb_timeout),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(98).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(106).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(112).uint32(e.online_count),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&c.liveroom_cs.StAnchorInfo.encode(e.anchor_info,t.uint32(122).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(128).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var n=0;n<e.stream_info.length;++n)c.liveroom_cs.StStreamInfo.encode(e.stream_info[n],t.uint32(138).fork()).ldelim();if(null!=e.stream_mix_info&&e.stream_mix_info.length)for(n=0;n<e.stream_mix_info.length;++n)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[n],t.uint32(146).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(152).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(160).uint32(e.userlist_interval),null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(168).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(176).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(184).uint32(e.trans_list_seq),null!=e.trans_seqs&&e.trans_seqs.length)for(n=0;n<e.trans_seqs.length;++n)c.liveroom_cs.StTransInfo.encode(e.trans_seqs[n],t.uint32(194).fork()).ldelim();return null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(202).string(e.cluster_name),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(208).uint32(e.token_remain_time),null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(216).uint32(e.stream_fetch_flag),t},_e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.EnterRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.room_id=e.bytes();break;case 3:r.user_session_id=e.uint64();break;case 4:r.room_session_id=e.uint64();break;case 5:r.user_id=e.uint64();break;case 6:r.ret_timestamp=e.fixed64();break;case 7:r.bigim_time_window=e.uint32();break;case 8:r.dati_time_window=e.int64();break;case 9:r.room_id32=e.uint32();break;case 10:r.hb_interval=e.uint32();break;case 11:r.hb_timeout=e.uint32();break;case 12:r.lv_key=e.string();break;case 13:r.zp_key=e.string();break;case 14:r.online_count=e.uint32();break;case 15:r.anchor_info=c.liveroom_cs.StAnchorInfo.decode(e,e.uint32());break;case 16:r.stream_seq=e.uint32();break;case 17:r.stream_info&&r.stream_info.length||(r.stream_info=[]),r.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 18:r.stream_mix_info&&r.stream_mix_info.length||(r.stream_mix_info=[]),r.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 19:r.userlist_merge_timeout=e.uint32();break;case 20:r.userlist_interval=e.uint32();break;case 21:r.stream_list_push_merge_timeout=e.uint32();break;case 22:r.stream_list_hb_wait_merge_time=e.uint32();break;case 23:r.trans_list_seq=e.uint32();break;case 24:r.trans_seqs&&r.trans_seqs.length||(r.trans_seqs=[]),r.trans_seqs.push(c.liveroom_cs.StTransInfo.decode(e,e.uint32()));break;case 25:r.cluster_name=e.string();break;case 26:r.token_remain_time=e.uint32();break;case 27:r.stream_fetch_flag=e.uint32();break;default:e.skipType(7&o)}}return r},_e),o.StAnchorInfo=(fe.prototype.anchor_id_name=a.newBuffer([]),fe.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.anchor_nick_name=a.newBuffer([]),fe.create=function(e){return new fe(e)},fe.encode=function(e,t){return t=t||s.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},fe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StAnchorInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.anchor_id_name=e.bytes();break;case 2:r.anchor_id=e.uint64();break;case 3:r.anchor_nick_name=e.bytes();break;default:e.skipType(7&o)}}return r},fe),o.QuitReq=(ge.prototype.req_head=null,ge.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,ge.prototype.room_id32=0,ge.prototype.nick_name=a.newBuffer([]),ge.prototype.role=0,ge.prototype.net_type=0,ge.prototype.config_list=null,ge.create=function(e){return new ge(e)},ge.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(48).uint32(e.net_type),null!=e.config_list&&Object.hasOwnProperty.call(e,"config_list")&&c.liveroom_cs.StConfigList.encode(e.config_list,t.uint32(58).fork()).ldelim(),t},ge.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.QuitReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.switch_session_id=e.uint64();break;case 3:r.room_id32=e.uint32();break;case 4:r.nick_name=e.bytes();break;case 5:r.role=e.uint32();break;case 6:r.net_type=e.uint32();break;case 7:r.config_list=c.liveroom_cs.StConfigList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},ge),o.StConfigList=(me.prototype.room_create_flag=0,me.prototype.user_state_flag=0,me.create=function(e){return new me(e)},me.encode=function(e,t){return t=t||s.create(),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(8).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(16).uint32(e.user_state_flag),t},me.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StConfigList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_create_flag=e.uint32();break;case 2:r.user_state_flag=e.uint32();break;default:e.skipType(7&o)}}return r},me),o.QuitRsp=(ye.prototype.rsp_head=null,ye.prototype.room_id=a.newBuffer([]),ye.prototype.room_id32=0,ye.create=function(e){return new ye(e)},ye.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),t},ye.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.QuitRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.room_id=e.bytes();break;case 3:r.room_id32=e.uint32();break;default:e.skipType(7&o)}}return r},ye),o.RoomListReq=(ve.prototype.req_head=null,ve.create=function(e){return new ve(e)},ve.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},ve.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RoomListReq;e.pos<n;){var o=e.uint32();o>>>3==1?r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&o)}return r},ve),o.RoomListRsp=(be.prototype.rsp_head=null,be.prototype.room_list=a.emptyArray,be.create=function(e){return new be(e)},be.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_list&&e.room_list.length)for(var n=0;n<e.room_list.length;++n)c.liveroom_cs.StRoomListRoom.encode(e.room_list[n],t.uint32(18).fork()).ldelim();return t},be.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RoomListRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.room_list&&r.room_list.length||(r.room_list=[]),r.room_list.push(c.liveroom_cs.StRoomListRoom.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},be),o.StRoomListStream=(Ee.prototype.stream_id=a.newBuffer([]),Ee.create=function(e){return new Ee(e)},Ee.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),t},Ee.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StRoomListStream;e.pos<n;){var o=e.uint32();o>>>3==1?r.stream_id=e.bytes():e.skipType(7&o)}return r},Ee),o.StRoomListRoom=(Oe.prototype.room_id=a.newBuffer([]),Oe.prototype.room_name=a.newBuffer([]),Oe.prototype.anchor_id_name=a.newBuffer([]),Oe.prototype.anchor_nick_name=a.newBuffer([]),Oe.prototype.stream_list=a.emptyArray,Oe.create=function(e){return new Oe(e)},Oe.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(18).bytes(e.room_name),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(26).bytes(e.anchor_id_name),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(34).bytes(e.anchor_nick_name),null!=e.stream_list&&e.stream_list.length)for(var n=0;n<e.stream_list.length;++n)c.liveroom_cs.StRoomListStream.encode(e.stream_list[n],t.uint32(42).fork()).ldelim();return t},Oe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StRoomListRoom;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_id=e.bytes();break;case 2:r.room_name=e.bytes();break;case 3:r.anchor_id_name=e.bytes();break;case 4:r.anchor_nick_name=e.bytes();break;case 5:r.stream_list&&r.stream_list.length||(r.stream_list=[]),r.stream_list.push(c.liveroom_cs.StRoomListStream.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Oe),o.StTransSeqInfo=(Se.prototype.trans_type=a.newBuffer([]),Se.prototype.trans_seq=0,Se.create=function(e){return new Se(e)},Se.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},Se.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StTransSeqInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return r},Se),o.StTransInfo=(Te.prototype.trans_channel=a.newBuffer([]),Te.prototype.trans_seq_array=a.emptyArray,Te.create=function(e){return new Te(e)},Te.encode=function(e,t){if(t=t||s.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var n=0;n<e.trans_seq_array.length;++n)c.liveroom_cs.StTransSeqInfo.encode(e.trans_seq_array[n],t.uint32(18).fork()).ldelim();return t},Te.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StTransInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_channel=e.bytes();break;case 2:r.trans_seq_array&&r.trans_seq_array.length||(r.trans_seq_array=[]),r.trans_seq_array.push(c.liveroom_cs.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Te),o.TransReq=(ke.prototype.req_head=null,ke.prototype.nick_name=a.newBuffer([]),ke.prototype.role=0,ke.prototype.trans_type=a.newBuffer([]),ke.prototype.trans_data=a.newBuffer([]),ke.prototype.trans_local_seq=0,ke.prototype.trans_channel=a.newBuffer([]),ke.create=function(e){return new ke(e)},ke.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(34).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(42).bytes(e.trans_data),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(48).uint32(e.trans_local_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(58).bytes(e.trans_channel),t},ke.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.TransReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.trans_type=e.bytes();break;case 5:r.trans_data=e.bytes();break;case 6:r.trans_local_seq=e.uint32();break;case 7:r.trans_channel=e.bytes();break;default:e.skipType(7&o)}}return r},ke),o.TransRsp=(Re.prototype.rsp_head=null,Re.prototype.trans_type=a.newBuffer([]),Re.prototype.trans_seq=0,Re.prototype.trans_list_seq=0,Re.prototype.trans_channel=a.newBuffer([]),Re.create=function(e){return new Re(e)},Re.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(18).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(42).bytes(e.trans_channel),t},Re.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.TransRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.trans_type=e.bytes();break;case 3:r.trans_seq=e.uint32();break;case 4:r.trans_list_seq=e.uint32();break;case 5:r.trans_channel=e.bytes();break;default:e.skipType(7&o)}}return r},Re),o.TransFetchReq=(Ce.prototype.req_head=null,Ce.prototype.trans_channel=a.newBuffer([]),Ce.prototype.fetch_array=a.emptyArray,Ce.create=function(e){return new Ce(e)},Ce.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var n=0;n<e.fetch_array.length;++n)c.liveroom_cs.StTransFetch.encode(e.fetch_array[n],t.uint32(26).fork()).ldelim();return t},Ce.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.TransFetchReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.trans_channel=e.bytes();break;case 3:r.fetch_array&&r.fetch_array.length||(r.fetch_array=[]),r.fetch_array.push(c.liveroom_cs.StTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Ce),o.StTransFetch=(we.prototype.trans_type=a.newBuffer([]),we.prototype.trans_local_seq=0,we.create=function(e){return new we(e)},we.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},we.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StTransFetch;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_local_seq=e.uint32();break;default:e.skipType(7&o)}}return r},we),o.TransFetchRsp=(Ne.prototype.rsp_head=null,Ne.prototype.trans_channel=a.newBuffer([]),Ne.prototype.trans_fetch_results=a.emptyArray,Ne.prototype.trans_list_seq=0,Ne.create=function(e){return new Ne(e)},Ne.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var n=0;n<e.trans_fetch_results.length;++n)c.liveroom_cs.TransFetchResult.encode(e.trans_fetch_results[n],t.uint32(26).fork()).ldelim();return null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),t},Ne.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.TransFetchRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.trans_channel=e.bytes();break;case 3:r.trans_fetch_results&&r.trans_fetch_results.length||(r.trans_fetch_results=[]),r.trans_fetch_results.push(c.liveroom_cs.TransFetchResult.decode(e,e.uint32()));break;case 4:r.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return r},Ne),o.TransFetchResult=(Ie.prototype.trans_type=a.newBuffer([]),Ie.prototype.trans_data=a.newBuffer([]),Ie.prototype.trans_idname=a.newBuffer([]),Ie.prototype.trans_nickname=a.newBuffer([]),Ie.prototype.trans_role=0,Ie.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,Ie.prototype.trans_seq=0,Ie.prototype.err_code=0,Ie.create=function(e){return new Ie(e)},Ie.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},Ie.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.TransFetchResult;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_data=e.bytes();break;case 3:r.trans_idname=e.bytes();break;case 4:r.trans_nickname=e.bytes();break;case 5:r.trans_role=e.uint32();break;case 6:r.trans_send_time=e.int64();break;case 7:r.trans_seq=e.uint32();break;case 8:r.err_code=e.int32();break;default:e.skipType(7&o)}}return r},Ie),o.UserTransFetchReq=(Me.prototype.req_head=null,Me.prototype.nick_name=a.newBuffer([]),Me.prototype.role=0,Me.prototype.trans_channel=a.newBuffer([]),Me.prototype.fetch_array=a.emptyArray,Me.create=function(e){return new Me(e)},Me.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(34).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var n=0;n<e.fetch_array.length;++n)c.liveroom_cs.StUserTransFetch.encode(e.fetch_array[n],t.uint32(42).fork()).ldelim();return t},Me.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.UserTransFetchReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.trans_channel=e.bytes();break;case 5:r.fetch_array&&r.fetch_array.length||(r.fetch_array=[]),r.fetch_array.push(c.liveroom_cs.StUserTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Me),o.StUserTransFetch=(Le.prototype.trans_type=a.newBuffer([]),Le.prototype.trans_local_seq=0,Le.create=function(e){return new Le(e)},Le.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},Le.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StUserTransFetch;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_local_seq=e.uint32();break;default:e.skipType(7&o)}}return r},Le),o.UserTransFetchRsp=(Pe.prototype.rsp_head=null,Pe.prototype.trans_channel=a.newBuffer([]),Pe.prototype.trans_fetch_results=a.emptyArray,Pe.create=function(e){return new Pe(e)},Pe.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var n=0;n<e.trans_fetch_results.length;++n)c.liveroom_cs.StUserTransFetchResult.encode(e.trans_fetch_results[n],t.uint32(26).fork()).ldelim();return t},Pe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.UserTransFetchRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.trans_channel=e.bytes();break;case 3:r.trans_fetch_results&&r.trans_fetch_results.length||(r.trans_fetch_results=[]),r.trans_fetch_results.push(c.liveroom_cs.StUserTransFetchResult.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Pe),o.StUserTransFetchResult=(Ae.prototype.trans_type=a.newBuffer([]),Ae.prototype.trans_data=a.newBuffer([]),Ae.prototype.trans_idname=a.newBuffer([]),Ae.prototype.trans_nickname=a.newBuffer([]),Ae.prototype.trans_role=0,Ae.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,Ae.prototype.trans_seq=0,Ae.prototype.err_code=0,Ae.create=function(e){return new Ae(e)},Ae.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},Ae.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StUserTransFetchResult;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_data=e.bytes();break;case 3:r.trans_idname=e.bytes();break;case 4:r.trans_nickname=e.bytes();break;case 5:r.trans_role=e.uint32();break;case 6:r.trans_send_time=e.int64();break;case 7:r.trans_seq=e.uint32();break;case 8:r.err_code=e.int32();break;default:e.skipType(7&o)}}return r},Ae),o.BigimChatReq=(De.prototype.req_head=null,De.prototype.nick_name=a.newBuffer([]),De.prototype.role=0,De.prototype.msgs=a.emptyArray,De.create=function(e){return new De(e)},De.encode=function(e,t){if(t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msgs&&e.msgs.length)for(var n=0;n<e.msgs.length;++n)c.liveroom_cs.StBigimChatData.encode(e.msgs[n],t.uint32(34).fork()).ldelim();return t},De.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.BigimChatReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.msgs&&r.msgs.length||(r.msgs=[]),r.msgs.push(c.liveroom_cs.StBigimChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},De),o.StBigimChatData=(He.prototype.msg_category=0,He.prototype.msg_type=0,He.prototype.msg_content=a.newBuffer([]),He.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,He.prototype.bigmsg_client_id=a.newBuffer([]),He.create=function(e){return new He(e)},He.encode=function(e,t){return t=t||s.create(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(8).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(16).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(26).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(32).int64(e.msg_timestamp),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(42).bytes(e.bigmsg_client_id),t},He.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StBigimChatData;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.msg_category=e.uint32();break;case 2:r.msg_type=e.uint32();break;case 3:r.msg_content=e.bytes();break;case 4:r.msg_timestamp=e.int64();break;case 5:r.bigmsg_client_id=e.bytes();break;default:e.skipType(7&o)}}return r},He),o.BigimChatRsp=(Ue.prototype.rsp_head=null,Ue.prototype.bigim_time_window=0,Ue.prototype.msgs=a.emptyArray,Ue.create=function(e){return new Ue(e)},Ue.encode=function(e,t){if(t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(16).uint32(e.bigim_time_window),null!=e.msgs&&e.msgs.length)for(var n=0;n<e.msgs.length;++n)c.liveroom_cs.StBigimChatRspData.encode(e.msgs[n],t.uint32(26).fork()).ldelim();return t},Ue.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.BigimChatRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.bigim_time_window=e.uint32();break;case 3:r.msgs&&r.msgs.length||(r.msgs=[]),r.msgs.push(c.liveroom_cs.StBigimChatRspData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Ue),o.StBigimChatRspData=(je.prototype.bigmsg_id=a.newBuffer([]),je.prototype.bigmsg_client_id=a.newBuffer([]),je.create=function(e){return new je(e)},je.encode=function(e,t){return t=t||s.create(),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(10).bytes(e.bigmsg_id),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(18).bytes(e.bigmsg_client_id),t},je.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StBigimChatRspData;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.bigmsg_id=e.bytes();break;case 2:r.bigmsg_client_id=e.bytes();break;default:e.skipType(7&o)}}return r},je),o.RelayReq=(xe.prototype.req_head=null,xe.prototype.nick_name=a.newBuffer([]),xe.prototype.role=0,xe.prototype.relay_type=a.newBuffer([]),xe.prototype.relay_data=a.newBuffer([]),xe.create=function(e){return new xe(e)},xe.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.relay_type&&Object.hasOwnProperty.call(e,"relay_type")&&t.uint32(34).bytes(e.relay_type),null!=e.relay_data&&Object.hasOwnProperty.call(e,"relay_data")&&t.uint32(42).bytes(e.relay_data),t},xe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RelayReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.relay_type=e.bytes();break;case 5:r.relay_data=e.bytes();break;default:e.skipType(7&o)}}return r},xe),o.RelayRsp=(Be.prototype.rsp_head=null,Be.prototype.reley_type=a.newBuffer([]),Be.prototype.relay_result=a.newBuffer([]),Be.create=function(e){return new Be(e)},Be.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.reley_type&&Object.hasOwnProperty.call(e,"reley_type")&&t.uint32(18).bytes(e.reley_type),null!=e.relay_result&&Object.hasOwnProperty.call(e,"relay_result")&&t.uint32(26).bytes(e.relay_result),t},Be.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RelayRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.reley_type=e.bytes();break;case 3:r.relay_result=e.bytes();break;default:e.skipType(7&o)}}return r},Be),o.RenewTokenReq=(qe.prototype.req_head=null,qe.prototype.token="",qe.create=function(e){return new qe(e)},qe.encode=function(e,t){return t=t||s.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),t},qe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RenewTokenReq;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:r.token=e.string();break;default:e.skipType(7&o)}}return r},qe),o.RenewTokenRsp=(Ge.prototype.rsp_head=null,Ge.prototype.token_remain_time=0,Ge.create=function(e){return new Ge(e)},Ge.encode=function(e,t){return t=t||s.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(16).uint32(e.token_remain_time),t},Ge.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.RenewTokenRsp;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:r.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return r},Ge),o.UserAction=(ze.prototype.action=0,ze.prototype.id_name=a.newBuffer([]),ze.prototype.nick_name=a.newBuffer([]),ze.prototype.role=0,ze.prototype.login_time=a.Long?a.Long.fromBits(0,0,!1):0,ze.create=function(e){return new ze(e)},ze.encode=function(e,t){return t=t||s.create(),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.login_time&&Object.hasOwnProperty.call(e,"login_time")&&t.uint32(40).int64(e.login_time),t},ze.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.UserAction;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.action=e.uint32();break;case 2:r.id_name=e.bytes();break;case 3:r.nick_name=e.bytes();break;case 4:r.role=e.uint32();break;case 5:r.login_time=e.int64();break;default:e.skipType(7&o)}}return r},ze),o.PushUserInfoUpdated=(Ve.prototype.room_id=a.newBuffer([]),Ve.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!1):0,Ve.prototype.user_list=a.emptyArray,Ve.create=function(e){return new Ve(e)},Ve.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).int64(e.server_user_seq),null!=e.user_list&&e.user_list.length)for(var n=0;n<e.user_list.length;++n)c.liveroom_cs.UserAction.encode(e.user_list[n],t.uint32(26).fork()).ldelim();return t},Ve.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushUserInfoUpdated;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_id=e.bytes();break;case 2:r.server_user_seq=e.int64();break;case 3:r.user_list&&r.user_list.length||(r.user_list=[]),r.user_list.push(c.liveroom_cs.UserAction.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Ve),o.PushUserKickout=(Fe.prototype.id_name=a.newBuffer([]),Fe.prototype.room_id=a.newBuffer([]),Fe.prototype.session_id=a.Long?a.Long.fromBits(0,0,!0):0,Fe.prototype.kickout_reason=0,Fe.prototype.custom_reason=a.newBuffer([]),Fe.create=function(e){return new Fe(e)},Fe.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(24).uint64(e.session_id),null!=e.kickout_reason&&Object.hasOwnProperty.call(e,"kickout_reason")&&t.uint32(32).int32(e.kickout_reason),null!=e.custom_reason&&Object.hasOwnProperty.call(e,"custom_reason")&&t.uint32(42).bytes(e.custom_reason),t},Fe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushUserKickout;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.id_name=e.bytes();break;case 2:r.room_id=e.bytes();break;case 3:r.session_id=e.uint64();break;case 4:r.kickout_reason=e.int32();break;case 5:r.custom_reason=e.bytes();break;default:e.skipType(7&o)}}return r},Fe),o.PushUserLogReport=(Ze.create=function(e){return new Ze(e)},Ze.encode=function(e,t){return t||s.create()},Ze.decode=function(e,t){e instanceof i||(e=i.create(e));var n=void 0===t?e.len:e.pos+t;for(t=new c.liveroom_cs.PushUserLogReport;e.pos<n;){var r=e.uint32();e.skipType(7&r)}return t},Ze),o.PushUserTokenExpire=(Ke.prototype.room_id=a.newBuffer([]),Ke.prototype.token="",Ke.prototype.stop_stream=null,Ke.create=function(e){return new Ke(e)},Ke.encode=function(e,t){return t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),null!=e.stop_stream&&Object.hasOwnProperty.call(e,"stop_stream")&&c.liveroom_cs.StopStream.encode(e.stop_stream,t.uint32(26).fork()).ldelim(),t},Ke.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushUserTokenExpire;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_id=e.bytes();break;case 2:r.token=e.string();break;case 3:r.stop_stream=c.liveroom_cs.StopStream.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},Ke),o.StopStream=(Ye.prototype.stream_id_list=a.emptyArray,Ye.create=function(e){return new Ye(e)},Ye.encode=function(e,t){if(t=t||s.create(),null!=e.stream_id_list&&e.stream_id_list.length)for(var n=0;n<e.stream_id_list.length;++n)t.uint32(10).bytes(e.stream_id_list[n]);return t},Ye.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StopStream;e.pos<n;){var o=e.uint32();o>>>3==1?(r.stream_id_list&&r.stream_id_list.length||(r.stream_id_list=[]),r.stream_id_list.push(e.bytes())):e.skipType(7&o)}return r},Ye),o.PushStream=(We.prototype.room_id=a.newBuffer([]),We.prototype.stream_seq=0,We.prototype.stream_info=a.emptyArray,We.create=function(e){return new We(e)},We.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var n=0;n<e.stream_info.length;++n)c.liveroom_cs.StPushStreamInfo.encode(e.stream_info[n],t.uint32(26).fork()).ldelim();return t},We.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushStream;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_id=e.bytes();break;case 2:r.stream_seq=e.uint32();break;case 3:r.stream_info&&r.stream_info.length||(r.stream_info=[]),r.stream_info.push(c.liveroom_cs.StPushStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},We),o.StPushStreamInfo=(Xe.prototype.stream_id=a.newBuffer([]),Xe.prototype.stream_sid="",Xe.prototype.id_name=a.newBuffer([]),Xe.prototype.nick_name=a.newBuffer([]),Xe.prototype.extra_info=a.newBuffer([]),Xe.prototype.title=a.newBuffer([]),Xe.prototype.third_define_data=a.newBuffer([]),Xe.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,Xe.prototype.req_seq=0,Xe.prototype.stream_ver=0,Xe.prototype.stream_attr=a.newBuffer([]),Xe.prototype.stream_src=0,Xe.prototype.stream_state=0,Xe.prototype.stream_type=0,Xe.prototype.stream_nid=0,Xe.prototype.close_type=0,Xe.create=function(e){return new Xe(e)},Xe.encode=function(e,t){return t=t||s.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.third_define_data&&Object.hasOwnProperty.call(e,"third_define_data")&&t.uint32(58).bytes(e.third_define_data),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(64).int64(e.create_time),null!=e.req_seq&&Object.hasOwnProperty.call(e,"req_seq")&&t.uint32(72).uint32(e.req_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(80).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(90).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(96).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(104).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(112).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(120).uint32(e.stream_nid),null!=e.close_type&&Object.hasOwnProperty.call(e,"close_type")&&t.uint32(128).uint32(e.close_type),t},Xe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StPushStreamInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.stream_id=e.bytes();break;case 2:r.stream_sid=e.string();break;case 3:r.id_name=e.bytes();break;case 4:r.nick_name=e.bytes();break;case 5:r.extra_info=e.bytes();break;case 6:r.title=e.bytes();break;case 7:r.third_define_data=e.bytes();break;case 8:r.create_time=e.int64();break;case 9:r.req_seq=e.uint32();break;case 10:r.stream_ver=e.uint32();break;case 11:r.stream_attr=e.bytes();break;case 12:r.stream_src=e.uint32();break;case 13:r.stream_state=e.uint32();break;case 14:r.stream_type=e.uint32();break;case 15:r.stream_nid=e.uint32();break;case 16:r.close_type=e.uint32();break;default:e.skipType(7&o)}}return r},Xe),o.PushImChat=(Je.prototype.room_id=a.newBuffer([]),Je.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Je.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Je.prototype.msg_data=a.emptyArray,Je.create=function(e){return new Je(e)},Je.encode=function(e,t){if(t=t||s.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var n=0;n<e.msg_data.length;++n)c.liveroom_cs.StImChatData.encode(e.msg_data[n],t.uint32(34).fork()).ldelim();return t},Je.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushImChat;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.room_id=e.bytes();break;case 2:r.server_msg_id=e.uint64();break;case 3:r.ret_msg_id=e.uint64();break;case 4:r.msg_data&&r.msg_data.length||(r.msg_data=[]),r.msg_data.push(c.liveroom_cs.StImChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},Je),o.StImChatData=(Qe.prototype.id_name=a.newBuffer([]),Qe.prototype.nick_name=a.newBuffer([]),Qe.prototype.role=0,Qe.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Qe.prototype.msg_category=0,Qe.prototype.msg_type=0,Qe.prototype.msg_priority=0,Qe.prototype.msg_content=a.newBuffer([]),Qe.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,Qe.create=function(e){return new Qe(e)},Qe.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},Qe.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StImChatData;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.id_name=e.bytes();break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.msg_id=e.uint64();break;case 5:r.msg_category=e.uint32();break;case 6:r.msg_type=e.uint32();break;case 7:r.msg_priority=e.uint32();break;case 8:r.msg_content=e.bytes();break;case 9:r.send_time=e.int64();break;default:e.skipType(7&o)}}return r},Qe),o.PushBigImChat=($e.prototype.app_id=0,$e.prototype.room_id=a.newBuffer([]),$e.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,$e.prototype.msg_data=a.emptyArray,$e.create=function(e){return new $e(e)},$e.encode=function(e,t){if(t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg_data&&e.msg_data.length)for(var n=0;n<e.msg_data.length;++n)c.liveroom_cs.StBigImChatData.encode(e.msg_data[n],t.uint32(34).fork()).ldelim();return t},$e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushBigImChat;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.app_id=e.uint32();break;case 2:r.room_id=e.bytes();break;case 3:r.timestamp=e.int64();break;case 4:r.msg_data&&r.msg_data.length||(r.msg_data=[]),r.msg_data.push(c.liveroom_cs.StBigImChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},$e),o.StBigImChatData=(et.prototype.id_name=a.newBuffer([]),et.prototype.nick_name=a.newBuffer([]),et.prototype.role=0,et.prototype.bigmsg_id=a.newBuffer([]),et.prototype.msg_category=0,et.prototype.msg_type=0,et.prototype.msg_content=a.newBuffer([]),et.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,et.create=function(e){return new et(e)},et.encode=function(e,t){return t=t||s.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(34).bytes(e.bigmsg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(58).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(64).int64(e.msg_timestamp),t},et.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StBigImChatData;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.id_name=e.bytes();break;case 2:r.nick_name=e.bytes();break;case 3:r.role=e.uint32();break;case 4:r.bigmsg_id=e.bytes();break;case 5:r.msg_category=e.uint32();break;case 6:r.msg_type=e.uint32();break;case 7:r.msg_content=e.bytes();break;case 8:r.msg_timestamp=e.int64();break;default:e.skipType(7&o)}}return r},et),o.PushTrans=(tt.prototype.app_id=0,tt.prototype.room_id=a.newBuffer([]),tt.prototype.trans_idname=a.newBuffer([]),tt.prototype.trans_nickname=a.newBuffer([]),tt.prototype.trans_role=0,tt.prototype.trans_type=a.newBuffer([]),tt.prototype.trans_data=a.newBuffer([]),tt.prototype.trans_seq=0,tt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,tt.prototype.trans_channel=a.newBuffer([]),tt.prototype.trans_list_seq=0,tt.create=function(e){return new tt(e)},tt.encode=function(e,t){return t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(50).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(58).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(64).uint32(e.trans_seq),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(88).uint32(e.trans_list_seq),t},tt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushTrans;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.app_id=e.uint32();break;case 2:r.room_id=e.bytes();break;case 3:r.trans_idname=e.bytes();break;case 4:r.trans_nickname=e.bytes();break;case 5:r.trans_role=e.uint32();break;case 6:r.trans_type=e.bytes();break;case 7:r.trans_data=e.bytes();break;case 8:r.trans_seq=e.uint32();break;case 9:r.trans_send_time=e.int64();break;case 10:r.trans_channel=e.bytes();break;case 11:r.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return r},tt),o.PushUserTrans=(nt.prototype.app_id=0,nt.prototype.room_id=a.newBuffer([]),nt.prototype.trans_idname=a.newBuffer([]),nt.prototype.trans_nickname=a.newBuffer([]),nt.prototype.trans_role=0,nt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,nt.prototype.trans_channel=a.newBuffer([]),nt.prototype.trans_array=a.emptyArray,nt.create=function(e){return new nt(e)},nt.encode=function(e,t){if(t=t||s.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_array&&e.trans_array.length)for(var n=0;n<e.trans_array.length;++n)c.liveroom_cs.StTransSimple.encode(e.trans_array[n],t.uint32(90).fork()).ldelim();return t},nt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.PushUserTrans;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.app_id=e.uint32();break;case 2:r.room_id=e.bytes();break;case 3:r.trans_idname=e.bytes();break;case 4:r.trans_nickname=e.bytes();break;case 5:r.trans_role=e.uint32();break;case 9:r.trans_send_time=e.int64();break;case 10:r.trans_channel=e.bytes();break;case 11:r.trans_array&&r.trans_array.length||(r.trans_array=[]),r.trans_array.push(c.liveroom_cs.StTransSimple.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},nt),o.StTransSimple=(rt.prototype.trans_type=a.newBuffer([]),rt.prototype.trans_data=a.newBuffer([]),rt.prototype.trans_seq=0,rt.create=function(e){return new rt(e)},rt.encode=function(e,t){return t=t||s.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),t},rt.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.liveroom_cs.StTransSimple;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.trans_type=e.bytes();break;case 2:r.trans_data=e.bytes();break;case 3:r.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return r},rt),o),e.exports=c},function(e,t,n){var r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},s={};function a(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=u(e,0,!0),o&&(s[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=u(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function c(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(_<=e)return S}else{if(e<=-f)return T;if(f<=e+1)return O}return e<0?c(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=c,n.fromBits=u;var l=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(n=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?y:m;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var o=c(l(n,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),n);i=a<8?(a=c(l(n,a)),i.mul(a).add(c(u))):(i=i.mul(o)).add(c(u))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?h(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=p;var d=4294967296,_=d*d,f=_/2,g=a(1<<24),m=a(0),y=(n.ZERO=m,a(0,!0)),v=(n.UZERO=y,a(1)),b=(n.ONE=v,a(1,!0)),E=(n.UONE=b,a(-1)),O=(n.NEG_ONE=E,u(-1,2147483647,!1)),S=(n.MAX_VALUE=O,u(-1,-1,!0)),T=(n.MAX_UNSIGNED_VALUE=S,u(0,-2147483648,!1)),k=(n.MIN_VALUE=T,n.prototype);return k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,n;if(this.isNegative())return this.eq(T)?(n=c(e),n=(t=this.div(n)).mul(n).sub(this),t.toString(e)+n.toInt().toString(e)):"-"+this.neg().toString(e);for(var r=c(l(e,6),this.unsigned),o=this,i="";;){var s=o.div(r),a=(o.sub(s.mul(r)).toInt()>>>0).toString(e);if((o=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||0<=this.high},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return r(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return 0<this.comp(e)},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return 0<=this.comp(e)},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(r(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(v)},k.neg=k.negate,k.add=function(e){r(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,h=0,d=0,_=0;return h+=(d=d+((_+=i+(65535&e.low))>>>16)+(o+c))>>>16,u((d&=65535)<<16|(_&=65535),((l+=(h+=n+a)>>>16)+(t+s)&65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(e){return r(e)||(e=p(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return this;if(r(e)||(e=p(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?y:m;if(this.eq(T))return e.isOdd()?T:m;if(e.eq(T))return this.isOdd()?T:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,h=e.low>>>16,d=0,_=0,f=0,v=(v=0)+((_=_+((f+=s*(e=65535&e.low))>>>16)+i*e)>>>16)+((_=(65535&_)+s*h)>>>16);return u((_&=65535)<<16|(f&=65535),((d+=(v+=o*e)>>>16)+((v=(65535&v)+i*h)>>>16)+((v=(65535&v)+s*l)>>>16)+(n*e+o*h+i*l+s*a)&65535)<<16|(v&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if((e=r(e)?e:p(e)).isZero())throw Error("division by zero");var n,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return y;if(e.gt(this.shru(1)))return b;o=y}else{if(this.eq(T))return e.eq(v)||e.eq(E)?T:e.eq(T)?v:(i=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:E:(n=this.sub(e.mul(i)),i.add(n.div(e)));if(e.eq(T))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(n=this;n.gte(e);){i=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:l(2,s-48),h=c(i),d=h.mul(e);d.isNegative()||d.gt(n);)d=(h=c(i-=a,this.unsigned)).mul(e);h.isZero()&&(h=v),o=o.add(h),n=n.sub(d)}return o},k.div=k.divide,k.modulo=function(e){return r(e)||(e=p(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return u(~this.low,~this.high,this.unsigned)},k.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},k.clz=k.countLeadingZeros,k.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},k.ctz=k.countTrailingZeros,k.and=function(e){return r(e)||(e=p(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return r(e)||(e=p(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return r(e)||(e=p(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.rotateLeft=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):u(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},k.rotl=k.rotateLeft,k.rotateRight=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?u(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):u(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},k.rotr=k.rotateRight,k.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=n,"default"in e?e.default:e}({});void 0!==(t=function(){return r}.apply(t,[]))&&(e.exports=t)},function(e,t,n){(function(t){var r;e.exports=(r=function(e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),!(r=!(r=!(r="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:r)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:r)&&void 0!==t&&t.crypto?t.crypto:r))try{r=n(17)}catch(s){}var o=Object.create||function(e){return i.prototype=e,e=new i,i.prototype=null,e};function i(){}var s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new u.init(t,e)}}),l=s.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},_=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;t=e.min(4*c,i);if(c){for(var l=0;l<c;l+=s)this._doProcessBlock(o,l);n=o.splice(0,c),r.sigBytes-=t}return new u.init(n,t)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(a.Hasher=_.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)}).call(this,n(16))},function(e,t,n){e.exports=function(e){for(var t=e,n=t.lib.BlockCipher,r=t.algo,o=[],i=[],s=[],a=[],c=[],u=[],l=[],h=[],p=[],d=[],_=[],f=0;f<256;f++)_[f]=f<128?f<<1:f<<1^283;var g=0,m=0;for(f=0;f<256;f++){var y=m^m<<1^m<<2^m<<3^m<<4;y=y>>>8^255&y^99,o[g]=y,i[y]=g;var v=_[g],b=_[v],E=_[b],O=257*_[y]^16843008*y;s[g]=O<<24|O>>>8,a[g]=O<<16|O>>>16,c[g]=O<<8|O>>>24,u[g]=O;O=16843009*E^65537*b^257*v^16843008*g;l[y]=O<<24|O>>>8,h[y]=O<<16|O>>>16,p[y]=O<<8|O>>>24,d[y]=O,g?(g=v^_[_[_[E^v]]],m^=_[_[m]]):g=m=1}var S=[0,1,2,4,8,16,32,64,128,27,54],T=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;s<r;s++)s<n?i[s]=t[s]:(u=i[s-1],s%n?n>6&&s%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=S[s/n|0]<<24),i[s]=i[s-n]^u);for(var a=this._invKeySchedule=[],c=0;c<r;c++){s=r-c;if(c%4)var u=i[s];else u=i[s-4];a[c]=c<4||s<=4?u:l[o[u>>>24]]^h[o[u>>>16&255]]^p[o[u>>>8&255]]^d[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,p,d,i);n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,s,a){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],p=e[t+3]^n[3],d=4,_=1;_<c;_++){var f=r[u>>>24]^o[l>>>16&255]^i[h>>>8&255]^s[255&p]^n[d++],g=r[l>>>24]^o[h>>>16&255]^i[p>>>8&255]^s[255&u]^n[d++],m=r[h>>>24]^o[p>>>16&255]^i[u>>>8&255]^s[255&l]^n[d++],y=r[p>>>24]^o[u>>>16&255]^i[l>>>8&255]^s[255&h]^n[d++];u=f,l=g,h=m,p=y}f=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^n[d++],g=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&u])^n[d++],m=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[d++],y=(a[p>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++];e[t]=f,e[t+1]=g,e[t+2]=m,e[t+3]=y},keySize:8});return t.AES=n._createHelper(T),e.AES}(n(2),(n(18),n(4),n(12),n(21)))},function(e,t,n){e.exports=function(e){for(var t=Math,n=e,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.algo,a=[],c=0;c<64;c++)a[c]=4294967296*t.abs(t.sin(c+1))|0;var u=s.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],u=e[t+2],_=e[t+3],f=e[t+4],g=e[t+5],m=e[t+6],y=e[t+7],v=e[t+8],b=e[t+9],E=e[t+10],O=e[t+11],S=e[t+12],T=e[t+13],k=e[t+14],R=e[t+15],C=i[0],w=i[1],N=i[2],I=i[3];C=l(C,w,N,I,s,7,a[0]),I=l(I,C,w,N,c,12,a[1]),N=l(N,I,C,w,u,17,a[2]),w=l(w,N,I,C,_,22,a[3]),C=l(C,w,N,I,f,7,a[4]),I=l(I,C,w,N,g,12,a[5]),N=l(N,I,C,w,m,17,a[6]),w=l(w,N,I,C,y,22,a[7]),C=l(C,w,N,I,v,7,a[8]),I=l(I,C,w,N,b,12,a[9]),N=l(N,I,C,w,E,17,a[10]),w=l(w,N,I,C,O,22,a[11]),C=l(C,w,N,I,S,7,a[12]),I=l(I,C,w,N,T,12,a[13]),N=l(N,I,C,w,k,17,a[14]),C=h(C,w=l(w,N,I,C,R,22,a[15]),N,I,c,5,a[16]),I=h(I,C,w,N,m,9,a[17]),N=h(N,I,C,w,O,14,a[18]),w=h(w,N,I,C,s,20,a[19]),C=h(C,w,N,I,g,5,a[20]),I=h(I,C,w,N,E,9,a[21]),N=h(N,I,C,w,R,14,a[22]),w=h(w,N,I,C,f,20,a[23]),C=h(C,w,N,I,b,5,a[24]),I=h(I,C,w,N,k,9,a[25]),N=h(N,I,C,w,_,14,a[26]),w=h(w,N,I,C,v,20,a[27]),C=h(C,w,N,I,T,5,a[28]),I=h(I,C,w,N,u,9,a[29]),N=h(N,I,C,w,y,14,a[30]),C=p(C,w=h(w,N,I,C,S,20,a[31]),N,I,g,4,a[32]),I=p(I,C,w,N,v,11,a[33]),N=p(N,I,C,w,O,16,a[34]),w=p(w,N,I,C,k,23,a[35]),C=p(C,w,N,I,c,4,a[36]),I=p(I,C,w,N,f,11,a[37]),N=p(N,I,C,w,y,16,a[38]),w=p(w,N,I,C,E,23,a[39]),C=p(C,w,N,I,T,4,a[40]),I=p(I,C,w,N,s,11,a[41]),N=p(N,I,C,w,_,16,a[42]),w=p(w,N,I,C,m,23,a[43]),C=p(C,w,N,I,b,4,a[44]),I=p(I,C,w,N,S,11,a[45]),N=p(N,I,C,w,R,16,a[46]),C=d(C,w=p(w,N,I,C,u,23,a[47]),N,I,s,6,a[48]),I=d(I,C,w,N,y,10,a[49]),N=d(N,I,C,w,k,15,a[50]),w=d(w,N,I,C,g,21,a[51]),C=d(C,w,N,I,S,6,a[52]),I=d(I,C,w,N,_,10,a[53]),N=d(N,I,C,w,E,15,a[54]),w=d(w,N,I,C,c,21,a[55]),C=d(C,w,N,I,v,6,a[56]),I=d(I,C,w,N,R,10,a[57]),N=d(N,I,C,w,m,15,a[58]),w=d(w,N,I,C,T,21,a[59]),C=d(C,w,N,I,f,6,a[60]),I=d(I,C,w,N,O,10,a[61]),N=d(N,I,C,w,u,15,a[62]),w=d(w,N,I,C,b,21,a[63]),i[0]=i[0]+C|0,i[1]=i[1]+w|0,i[2]=i[2]+N|0,i[3]=i[3]+I|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296),s=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,o,i,s){var a=e+(t&n|~t&r)+o+s;return(a<<i|a>>>32-i)+t}function h(e,t,n,r,o,i,s){var a=e+(t&r|n&~r)+o+s;return(a<<i|a>>>32-i)+t}function p(e,t,n,r,o,i,s){var a=e+(t^n^r)+o+s;return(a<<i|a>>>32-i)+t}function d(e,t,n,r,o,i,s){var a=e+(n^(t|~r))+o+s;return(a<<i|a>>>32-i)+t}return n.MD5=i._createHelper(u),n.HmacMD5=i._createHmacHelper(u),e.MD5}(n(2))},function(e,t,n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var o,i;e.exports=(o=[function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,(r=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[r.IE=0]="IE",r[r.FIREFOX=1]="FIREFOX",r[r.CHROME=2]="CHROME",r[r.SAFARI=3]="SAFARI",r[r.OPERA=4]="OPERA",r[r.WEIXIN=5]="WEIXIN",r[r.WEIXINMINI=6]="WEIXINMINI",r[r.UNKOWN=7]="UNKOWN",(r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[r.BROWSER=0]="BROWSER",r[r.WEIXINMINI=1]="WEIXINMINI",(r=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[r.DISABLE=0]="DISABLE",r[r.WEBSOCKET=1]="WEBSOCKET",r[r.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(r=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[r.ClientType_None=0]="ClientType_None",r[r.ClientType_H5=1]="ClientType_H5",r[r.ClientType_SmallPragram=2]="ClientType_SmallPragram",r[r.ClientType_Webrtc=3]="ClientType_Webrtc"},function(e,t,n){"use strict";function r(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0,r.getInstance=function(){return r.instance||(r.instance=new r).init(),r.instance},r.prototype.init=function(){},Object.defineProperty(r.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),r.instance=new r,t.LoggerStateCenter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var r=n(0),o=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=o,t.createZegoWebSocket=function(e,t){return new(t%2===r.ZEGO_ENV.BROWSER?WebSocket:o)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=t.createZegoWebSocket=t.ZegoDataReport=t.ZegoLogger=void 0;var r=n(1),o=(Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return r.LoggerStateCenter}}),n(2)),i=(Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return o.createZegoWebSocket}}),n(4)),s=(Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return i.ZegoDataReport}}),n(5));Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,i.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},i.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},i.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn(e+" not exist")},i.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},i.prototype.eventEnd=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r&&0!==r.length){for(var o=r.length-1;0<=o;o--)if(r[o].event==t&&0==r[o].time_consumed){r[o].time_consumed=Date.now()-r[o].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},i.prototype.eventEndWithMsg=function(e,t,n){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(o){for(var i=o.length-1;0<=i;i--)if(o[i].event==t&&0==o[i].time_consumed){o[i].time_consumed=Date.now()-o[i].event_time,null==o[i].msg_ext&&(o[i].msg_ext={}),o[i].msg_ext=r({},n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},i.prototype.eventEndWithMsgInfo=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r){for(var o=r.length-1;0<=o;o--)if(r[o].event==t&&0==r[o].time_consumed){r[o].time_consumed=Date.now()-r[o].event_time,Object.assign(r[o],n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},i.prototype.addEventInfo=function(e,t,n,r){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(null!=o){for(var i=o.length-1;0<=i;i--)if(o[i].event==t&&null!=o[i].time_consumed){null==o[i].msg_ext?o[i].msg_ext={}:o[i].msg_ext&&(o[i].msg_ext[n]=r);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},i.prototype.addEventMsg=function(e,t,n,r){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(null!=o){for(var i=o.length-1;0<=i;i--)if(o[i].event==t){o[i][n]=r;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},i.prototype.addEvent=function(e,t,n){this.dataStatistics[e]?this.dataStatistics[e].events&&(n?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),msg_ext:n}):this.dataStatistics[e].events.push({event:t,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},i.prototype.uploadReport=function(e,t,n,r){var o=this.dataStatistics[e];null!=o&&(t&&(o.event=t),o.time_consumed=Date.now()-o.event_time,n&&this.addMsgInfo(e,{error:n.code,message:n.message||n.msg+" "+(r||"")}),this.logger.report(o),delete this.dataStatistics[e])},i);function i(e){this.dataStatistics={},this.logger=e}t.ZegoDataReport=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,n(0)),i=n(2),s=n(1),a=n(6);function c(e){this.logLevel=o.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=8192,this.existUserID=!1,this.stateCenter=s.LoggerStateCenter.getInstance(),this.env=e}c.prototype.setLogLevel=function(e){return void 0!==(e=o.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},c.prototype.setRemoteLogLevel=function(e){return void 0!==(e=o.ENUM_LOG_LEVEL[e])&&(this.logRemoteLevel=e,!0)},c.prototype.setSessionInfo=function(e,t,n,r,o,i){this.appid=e,this.roomid=t,this.sessionid=n,this.userid=r,this.userName=o,this.version=i},c.prototype.report=function(e){e=this.logReportParamList(o.ENUM_LOG_LEVEL.REPORT,e),this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.REPORT&&console.debug(e),this.RemoteLog(o.ENUM_LOG_LEVEL.REPORT,e,!0)},c.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(o.ENUM_LOG_LEVEL.DEBUG,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.DEBUG&&console.debug(n),this.log(o.ENUM_LOG_LEVEL.DEBUG,n)},c.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(o.ENUM_LOG_LEVEL.INFO,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.INFO&&console.info(n),this.log(o.ENUM_LOG_LEVEL.INFO,n)},c.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(o.ENUM_LOG_LEVEL.WARN,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.WARN&&console.warn(n),this.log(o.ENUM_LOG_LEVEL.WARN,n)},c.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(o.ENUM_LOG_LEVEL.ERROR,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.ERROR&&(console.error(n),this.env%2===o.ZEGO_ENV.BROWSER&&window?this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500)):this.env%2===o.ZEGO_ENV.WEIXINMINI&&wx&&this.stateCenter.debug&&wx.showModal({title:"",content:e.join("").substr(e.join("").indexOf(" ")+1,4500)})),this.log(o.ENUM_LOG_LEVEL.ERROR,n)},c.prototype.log=function(e,t){this.logRemoteLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},c.prototype.setLogServer=function(e){try{return e.startsWith("wss:")?(this.logType=o.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=o.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=o.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},c.prototype.stopLogServer=function(){this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==o.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=o.ENUM_REMOTE_TYPE.DISABLE},c.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},c.prototype.openHttpsLogServer=function(e){var t=this;(this.url=e)&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},c.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},c.prototype.RemoteLog=function(e,t,n){if(void 0===n&&(n=!1),""!=this.url)if(this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==o.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(e,t,n);else if(this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=e)for(this.logCacheSend.push(t);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()},c.prototype.RemoteWebSocketLog=function(e,t){if("string"==typeof t&&4e3<t.length)console.info("log over maximum, ignore");else if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var n=this.url;this.url="",this.setLogServer(n),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(0<this.logCacheSend.length){for(var o="",i=0;i<this.logCacheSend.length;i++){4e3<(o+this.logCacheSend[i]).length&&(this.websocket.send(o),o="");var s=JSON.parse(this.logCacheSend[i]);s=r(r({},s),{userid:s.userid||this.userid,roomid:s.roomid||this.roomid,userName:s.userName||this.userName}),o=o+JSON.stringify(s)+"\n"}t=o+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},c.prototype.RemoteHttpsLog=function(e,t,n){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===n)&&this.SendHttpsLog()},c.prototype.logParamList=function(e,t){var n={time:n=a.getCurrentTime(),level:e,action:(t=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t])[0],content:t[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(n)},c.prototype.logReportParamList=function(e,t){var n=a.getCurrentTime();return t=r(r({},t),{time:n,level:e,console:this.env%2===o.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},c.prototype.openWebSocketLogServer=function(e){this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.websocket=i.createZegoWebSocket(e,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("onclose   websocket error:",e)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("open log websocket error:",e)})},c.prototype.SendHttpsLog=function(){0!=this.logCacheSend.length&&(this.env%2===o.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},c.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCacheSend.join("\n"),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){if(0!=n.responseText.length)try{var t=JSON.parse(n.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(t){console.log("send result failed "+t)}}else console.log("send failed "+n.status)},n.open("POST",this.url,!0),0==this.env?n.send(t):2==this.env&&(n.setRequestHeader("content-type","application/json"),n.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCacheSend=[]},c.prototype.SendHttpsLogWeChatMini=function(){var e=this;if(!this.existUserID){if(!this.userid)return void console.log("no userid");this.logCacheSend.forEach((function(t,n){(t=JSON.parse(t))&&""==t.userid?(t.userid=e.userid,t.id_name=t.id_name||e.userid,t.roomid=t.roomid||e.roomid,t.userName=t.userName||e.userName,e.logCacheSend[n]=JSON.stringify(t)):e.existUserID=!0}))}var t=this.logCacheSend.join("\n");t=1==this.env?t:JSON.stringify({user_id:this.userid,log:t});wx.request({url:this.url,data:t,method:"POST",success:function(t){0!=t.data.length&&"number"==typeof(t=t&&t.data&&t.data.interval)&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))},fail:function(e){console.log("send failed "+e.statusCode)}}),this.logCacheSend=[]},t.ZegoLogger=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var r=n(0),o=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),o=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?r.ZEGO_BROWSER_TYPE.IE:n?r.ZEGO_BROWSER_TYPE.FIREFOX:o?r.ZEGO_BROWSER_TYPE.OPERA:i?r.ZEGO_BROWSER_TYPE.CHROME:s?r.ZEGO_BROWSER_TYPE.SAFARI:e?r.ZEGO_BROWSER_TYPE.WEIXIN:r.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(r.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}}],i={},r.m=o,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3))},function(e,t,n){e.exports=n(2).enc.Utf8},function(t,n){t.exports=e},function(e,t,n){"use strict";t.byteLength=function(e){return 3*((e=u(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,n,r=(s=u(e))[0],s=s[1],a=new i(function(e,t){return 3*(e+t)/4-t}(r,s)),c=0,l=0<s?r-4:r;for(n=0;n<l;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,a[c++]=255&t),1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(function(e,t,n){for(var o,i=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}(o));return i.join("")}(e,s,a<s+16383?a:s+16383));return 1==o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t,n){function r(e){var t;return(u[e]||(t=u[e]={i:e,l:!1,exports:{}},c[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var o,i,s,a,c,u;e.exports=(o=n(11),i=n(4),s=n(3),a=n(6),c=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=t.ENUM_CONNECT_STATE=t.ENUM_NETWORK_STATE=t.SOCKET_DISCONNECT=t.errorList=t.Queue=t.getSeq=t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.1",(o=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",(o=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[o.IE=0]="IE",o[o.FIREFOX=1]="FIREFOX",o[o.CHROME=2]="CHROME",o[o.SAFARI=3]="SAFARI",o[o.OPERA=4]="OPERA",o[o.WEIXIN=5]="WEIXIN",o[o.WEIXINMINI=6]="WEIXINMINI",o[o.UNKOWN=7]="UNKOWN",(o=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[o.DISABLE=0]="DISABLE",o[o.WEBSOCKET=1]="WEBSOCKET",o[o.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(o=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[o.ClientType_None=0]="ClientType_None",o[o.ClientType_H5=1]="ClientType_H5",o[o.ClientType_SmallPragram=2]="ClientType_SmallPragram",o[o.ClientType_Webrtc=3]="ClientType_Webrtc",t.getSeq=(r=1,function(){return r++}),i.prototype.isEmpty=function(){return 0==this.items.length},i.prototype.enqueue=function(e){this.items.push(e)},i.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},i.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},i.prototype.size=function(){return this.items.length},i.prototype.clear=function(){this.items=[]},i.prototype.all=function(){return this.items};var r,o=i;function i(){this.items=[],this.items=[]}t.Queue=o,t.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},t.SOCKET_DISCONNECT=-1,(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.ENUM_CONNECT_STATE||(t.ENUM_CONNECT_STATE={}))[o.disconnected=0]="disconnected",o[o.connecting=1]="connecting",o[o.connected=2]="connected",Object.defineProperty(a.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),a.prototype.hasNext=function(){return this.next&&this.next.id},a.prototype.hasPrev=function(){return this.prev&&this.prev.id};var s=a;function a(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function c(){this.start=new s,this.end=new s,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=s,c.prototype.insertBefore=function(e,t){return(t=new s(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},c.prototype.addLast=function(e){return this.insertBefore(this.end,e)},c.prototype.add=function(e){return this.addLast(e)},c.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},c.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},c.prototype.size=function(){return this._numNodes},c.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},c.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},c.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},c.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},c.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},c.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},c.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},c.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},c.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},c.prototype.push=function(e){return this.addLast(e)},c.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},c.prototype.pop=function(){return this.removeLast()},c.prototype.shift=function(){return this.removeFirst()},t.LinkedList=c},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=t.suppressInstrumentation=t.ROOT_CONTEXT=t.BaseContext=t.setSpan=t.getSpanContext=t.getSpan=t.createContextKey=void 0,n(16));function s(e){return Symbol.for(e)}var a=(t.createContextKey=s)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),c=s("OpenTelemetry Context Key SPAN");function u(e){return e.getValue(c)||void 0}function l(e){this.name=e,this.contextManager=new i.StackContextManager}t.getSpan=u,t.getSpanContext=function(e){return null==(e=u(e))?void 0:e.context()},t.setSpan=function(e,t){return e.setValue(c,t)},t.BaseContext=n=function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},t.ROOT_CONTEXT=new n,t.suppressInstrumentation=function(e){return e.setValue(a,!0)},l.getInstance=function(e){return void 0===e&&(e="context"),this._instance||(this._instance=new l(e)),this._instance},l.prototype.active=function(){return this.contextManager.active()},l.prototype.with=function(e,t,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,o([e,t,n],i))},l.prototype._getContextManager=function(){return this.contextManager},t.ContextAPI=l},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.TraceFlags=t.SpanKind=t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR",(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER",(o=r=t.TraceFlags||(t.TraceFlags={}))[o.NONE=0]="NONE",o[o.SAMPLED=1]="SAMPLED",t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.NONE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ZegoLog=void 0,o.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.log(n)},o.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.debug(n)},o.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.info(n)},o.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.warn(n)},o.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.error(n)};var r=o;function o(){}r=new(t.ZegoLog=r),t.log=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAIL_TIME=t.FAIL_MAX_COUNT=t.FAIL_COUNT=t.STORE_SIZE=t.CACHE_SIZE=t.BUCKET_CONFIG=t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:10},t.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},t.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},t.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},t.FAIL_COUNT=5,t.FAIL_MAX_COUNT=10,t.FAIL_TIME=30},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.calculateMemSize=t.analyzeKey=t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0,n(0)),i=r(n(31)),s=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?o.ZEGO_BROWSER_TYPE.IE:n?o.ZEGO_BROWSER_TYPE.FIREFOX:r?o.ZEGO_BROWSER_TYPE.OPERA:i?o.ZEGO_BROWSER_TYPE.CHROME:s?o.ZEGO_BROWSER_TYPE.SAFARI:e?o.ZEGO_BROWSER_TYPE.WEIXIN:o.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(o.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(s[e.getMonth()+1]||e.getMonth()+1)+"/",(s[e.getDate()]||e.getDate())+" ",(s[e.getHours()]||e.getHours())+":",(s[e.getMinutes()]||e.getMinutes())+":",s[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.calculateMemSize=function(e){return i.default(e)},t.uuid=function(e,t){var n,r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(r=0|16*Math.random(),i[n]=o[19==n?3&r|8:r]);return i.join("")}},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};function i(e){var t,n,o;if(null!=e&&Array.isArray(e))try{for(var i=r(e),s=i.next();!s.done;s=i.next()){var a=s.value;if(null!=a)if(o){if(typeof a!==o)return!1}else o=typeof a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAttributes=t.isAttributeValue=void 0,t.isAttributeValue=i,t.sanitizeAttributes=function(e){var t,n,s={};if(null!=e&&"object"==typeof e)try{for(var a=r(Object.entries(e)),c=a.next();!c.done;c=a.next()){var u=o(c.value,2),l=u[0],h=u[1];i(h)&&(Array.isArray(h)?s[l]=h.slice():s[l]=h)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGenerator=void 0;var r=Array(32);function o(e){return function(){for(var t=0;t<2*e;t++)r[t]=Math.floor(16*Math.random())+48,58<=r[t]&&(r[t]+=39);return String.fromCharCode.apply(null,r.slice(0,2*e))}}t.IdGenerator=function(){this.generateTraceId=o(16),this.generateSpanId=o(8),this.generateEventId=o(4)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=t.SDK_INFO=t.SemanticResourceAttributes=void 0,t.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},t.SDK_INFO=((r={})[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",r[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",r[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",r[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.VERSION,r),o.empty=function(){return o.EMPTY},o.createTelemetrySDKResource=function(){var e;return new o(((e={})[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],e[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME],e[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],e))},o.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new o(Object.assign({},this.attributes,e.attributes)):this},o.EMPTY=new o({});var r=o;function o(e){this.attributes=e}t.Resource=r},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0,n(6)),s=n(1),a=n(2),c=n(7),u=n(17);function l(e,t,n,r,o,i,s,u){void 0===u&&(u=[]),this.attributes={},this.links=[],this.events=[],this.status={code:a.SpanStatusCode.UNSET},this.endTime=0,this._ended=!1,this._duration=0,this.exported=!0,this.contextAPI=e.context,this.reporter=e.reporter,this.spanProcessor=e.spanProcessor,this.parentTracer=e,this.name=n,this.level=r,this.spanContext=o,this.parentSpanId=s,this.kind=i,this.links=u,this.startTime=Date.now(),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._traceParams=e.getActiveTraceParams(),this._idGenerator=new c.IdGenerator}l.prototype.context=function(){return this.spanContext},l.prototype.setAttribute=function(e,t){return null==t||0===e.length||!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=t),this},l.prototype.appendAttribute=function(e,t){return null==t||0===e.length||!i.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]&&Array.isArray(this.attributes[e])?this.attributes[e].push(t):this.attributes[e]=[t]),this},l.prototype.setAttributes=function(e){var t,n;try{for(var i=r(Object.entries(e)),s=i.next();!s.done;s=i.next()){var a=o(s.value,2),c=a[0],u=a[1];this.setAttribute(c,u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},l.prototype.addEvent=function(e,t,n){this.events.length>=this._traceParams.numberOfEventsPerSpan&&this.events.shift();var r=this._idGenerator.generateEventId();return u.isTimeInput(t)&&(void 0===n&&(n=t),t=void 0),void 0===n&&(n=u.hrTime()),this.events.push({name:e,attributes:t,time:u.timeInputToHrTime(n),event_id:r}),this},l.prototype.setStatus=function(e){return this.status=e,this},l.prototype.updateName=function(e){return this.name=e,this},l.prototype.end=function(e){var t,n=this;this._isSpanEnded()||(this._ended=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),t=u.getCurrentTime(),this.setAttribute("e_time_s",t),this.endTime=Date.now(),this._duration=this.endTime-this.startTime,this.contextAPI.with(s.suppressInstrumentation(this.contextAPI.active()),(function(){var t=n.toReporterSpan(n);n.spanProcessor.spanEnd&&n.spanProcessor.spanEnd(t,n.level),t.droped||!1===e||(delete t.droped,n.reporter.report(JSON.stringify(t),n.level))})))},l.prototype.spanReport=function(){var e=this.toReporterSpan(this);this.reporter.report(JSON.stringify(e),this.level)},l.prototype.isRecording=function(){return!1===this._ended},Object.defineProperty(l.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),l.prototype._isSpanEnded=function(){return this._ended,this._ended},l.prototype.toReporterSpan=function(e){var t=[],n=(e.events.forEach((function(e){var n={};Object.keys(e).forEach((function(t){"name"===t&&(n[t]=e[t]),"time"===t&&(n.timestamp=u.hrTimeToMilliseconds(e[t])),"attributes"===t&&(n.tags=e[t])})),t.push(n)})),[]);return e.links.forEach((function(e){n.push({span_id:e.context.spanId,trace_id:e.context.traceId})})),{trace_id:e.spanContext.traceId,parent_span_id:e.parentSpanId,name:e.name,span_id:e.spanContext.spanId,kind:e.kind,start_time:e.startTime,end_time:e.endTime,duration:e.duration,logs:t,tags:e.attributes,links:n}},t.Span=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSpan=void 0;var r=n(3),o=n(9);function i(e,t){this.spanId=e,this.span=t}i.prototype.setAttribute=function(e,t){var n=this;return this.span?this.span.setAttribute(e,t):this._activeSpan().then((function(){n.span&&n.span.setAttribute(e,t)})),this},i.prototype.setAttributes=function(e){var t=this;return this.span?this.span.setAttributes(e):this._activeSpan().then((function(){t.span&&t.span.setAttributes(e)})),this},i.prototype.appendAttribute=function(e,t){var n=this;return this.span?this.span.appendAttribute(e,t):this._activeSpan().then((function(){n.span&&n.span.appendAttribute(e,t)})),this},i.prototype.addEvent=function(e,t,n){var r=this;return this.span?this.span.addEvent(e,t,n):this._activeSpan().then((function(){r.span&&r.span.addEvent(e,t,n)})),this},i.prototype.setStatus=function(e){var t=this;return this.span?this.span.setStatus(e):this._activeSpan().then((function(){t.span&&t.span.setStatus(e)})),this},i.prototype.updateName=function(e){var t=this;return this.span?this.span.updateName(e):this._activeSpan().then((function(){t.span&&t.span.updateName(e)})),this},i.prototype.end=function(e){var t=this;void 0===e&&(e=!0),this.span?this.span.end(e):this._activeSpan(!0).then((function(){t.span&&t.span.end(e),t._spanEnd()}))},i.prototype.setSpanActive=function(e){this.activeCallback=e},i.prototype.setSpanEnd=function(e){this.endCallback=e},i.prototype.spanReport=function(){var e;null!=(e=this.span)&&e.spanReport()},i.prototype._spanEnd=function(){this._isSpanNoop()||(this.removeStoreItem(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},i.prototype._isSpanNoop=function(){return"noop"===this.spanId},i.prototype._activeSpan=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(n,r){t.store.getItem(t.spanId).then((function(r){var s=new o.Span(i.tracer,i.tracer.context.active(),r.name,r.level,r.spanContext,r.kind,r.parentSpanId,r.links);s.setStatus(r.status),s.setAttributes(r.attributes),t.span=s,t.activeCallback&&t.activeCallback(t.spanId,e),n()})).catch((function(e){r(e)}))}))},i.prototype.removeStoreItem=function(e){var t=this;this.store.getItem(e).then((function(n){n&&t.store.removeItem(e).then((function(){r.log.log("remove suc")})).catch((function(e){r.log.warn("remove fail")}))}))},t.ZegoSpan=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=t.ZEGO_ENV=void 0;var r,o,i=n(12),s=((o=r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",n(3)),a=(c.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.getStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},c.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,o){try{wx.setStorageSync(n.keyPrefix+e,t),r()}catch(r){o(r)}}))},c.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.removeStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},c.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},c.prototype.keys=function(){var e=this;return new Promise((function(t,n){try{var r=wx.getStorageInfoSync().keys,o=(s.log.warn("keys",r),[]);r.forEach((function(t){0==t.indexOf(e.keyPrefix)&&o.push(t.replace(e.keyPrefix,""))})),s.log.warn("keyArr",JSON.stringify(o)),o.sort(),t(o)}catch(t){n(t)}}))},c);function c(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=a,t.createZegoStore=function(e,t,n){return t===r.BROWSER?i.createInstance({name:e+":"+(n||"store")}):new a(e)}},function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=t.ZegoTracer=t.ZegoSpan=void 0;var r=n(14),o=(Object.defineProperty(t,"ZegoTracer",{enumerable:!0,get:function(){return r.ZegoTracer}}),n(46)),i=(Object.defineProperty(t,"DynamicCode",{enumerable:!0,get:function(){return o.DynamicCode}}),n(10));Object.defineProperty(t,"ZegoSpan",{enumerable:!0,get:function(){return i.ZegoSpan}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoTracer=void 0;var r=n(15),o=n(21),i=n(10),s=n(22),a=n(3),c=n(1),u=n(8),l=n(23),h=n(39),p=n(11),d=n(44),_=n(45);function f(){this.tracingSpans=[],this._maxTracingSpanSize=s.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new d.ZegoLog,this.stateCenter=new _.StateCenter(this.log)}f.prototype.init=function(e){this.options=e,this.name=e.product,this.reporter=new l.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:e.appID,env:e.env||0,importantLevel:e.importantLevel,levels:e.levels,deviceID:e.deviceID,bps:e.bps,serverUrl:e.serverUrl}),this.tracer=new r.Tracer({name:this.name,version:e.version},{resource:new u.Resource(e.resources)},this.reporter,{spanStart:e.spanStart,spanBeforeEnd:e.spanBeforeEnd,spanEnd:e.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.initRoot(this.options),this.dyStore=p.createZegoStore(e.product+"_"+e.appID+"_dy",e.env||0)},f.prototype.initRoot=function(e){this.rootSpan=this.tracer.startSpan("root",0);var t=c.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context._getContextManager()._currentContext=t,this.rootSpan.end()},f.prototype.createSpan=function(e,t,n){var r,u;return e<=this.level?(r=n&&n.parent?c.setSpan(this.tracer.context.active(),n.parent.span):c.setSpan(this.tracer.context.active(),this.rootSpan),u=[],n&&n.linkSpans&&(n.linkSpans.forEach((function(e){u.push({context:e.span.context()})})),delete n.linkSpans),t=this.tracer.startSpan(t,e,Object.assign({},n,{links:u}),r),this.tracingSpans.length>=this._maxTracingSpanSize&&a.log.warn("max to limit"),e=new i.ZegoSpan(t.spanContext.spanId,t),i.ZegoSpan.tracer=this.tracer,this.tracingSpans.push(e),e):(a.log.warn("createSpan level not fix"),new i.ZegoSpan(s.NOOP_SPAN_ID,new o.NoopSpan))},f.prototype.setLogger=function(e){this.stateCenter.logger=e},f.prototype.setTimeOffset=function(e){this.reporter.setTimeOffset(e)},f.prototype.setWaitNtpTimeout=function(e){this.reporter.setWaitNtpTimeout(e)},f.prototype.setLogLevel=function(e){return this.stateCenter._log.setLogLevel(e)},f.prototype.startReport=function(e){return this.reporter.startReport(e)},f.prototype.setConfig=function(e){this.reporter.setConfig(e)},f.prototype.loadJs=function(e,t,n,r,o,i){return h.loadJS(e,this.dyStore,t,n,r,o,i)},f.prototype.flush=function(e){this.reporter.flush(e)},f.prototype.setUnloadState=function(e){this.reporter.setUnloadState(e)},f.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},f.prototype.setProcessorCallBack=function(e,t){},f.prototype.setSampleConfig=function(e){this.level=e.level||this.level},f.prototype.setResource=function(e){this.tracer.setResource(e),this.reporter.setProcessData(this.tracer.resource.attributes)},f.prototype.setNetStateCheck=function(){this.reporter.setNetStateCheck()},t.ZegoTracer=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var r=n(6),o=n(1),i=n(2),s=n(7),a=n(8),c=n(9),u=n(18),l=n(19);function h(e,t,n,r){var i=l.mergeConfig(t);this._traceParams=i.traceParams,this._idGenerator=new s.IdGenerator,this.resource=null!=(i=t.resource)?i:a.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=e,t=Math.random().toString(36).slice(-6),this.context=new o.ContextAPI(t),this.reporter=n,this.spanProcessor=r||{}}h.prototype.startSpan=function(e,t,n,s){var a,l,h,p=function(e,t){if(!e.root)return o.getSpanContext(t)}(n=void 0===n?{}:n,s=void 0===s?this.context.active():s),d=this._idGenerator.generateSpanId(),_=(p&&u.isSpanContextValid(p)?(a=p.traceId,l=p.traceState,h=p.spanId):a=this._idGenerator.generateTraceId(),p=null!=(p=n.kind)?p:i.SpanKind.INTERNAL,null!=(_=n.links)?_:[]),f=(n=r.sanitizeAttributes(n.attributes),i.TraceFlags.NONE);return(s=new c.Span(this,s,e,t,{traceId:a,spanId:d,traceFlags:f,traceState:l},p,h,_)).setAttributes(n),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(s),s},h.prototype.setResource=function(e){this.resource=this.resource.merge(new a.Resource(e))},h.prototype.getActiveTraceParams=function(){return this._traceParams},t.Tracer=h},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.StackContextManager=void 0,n(1));function s(){this._enabled=!1,this._currentContext=i.ROOT_CONTEXT}s.prototype._bindFunction=function(e,t){function n(){for(var n=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r.with(t,(function(){return e.apply(n,o)}))}void 0===t&&(t=i.ROOT_CONTEXT);var r=this;return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),n},s.prototype.active=function(){return this._currentContext},s.prototype.bind=function(e,t){return void 0===(t=void 0===t?i.ROOT_CONTEXT:t)&&(t=this.active()),"function"==typeof e?this._bindFunction(e,t):e},s.prototype.disable=function(){return this._currentContext=i.ROOT_CONTEXT,this._enabled=!1,this},s.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=i.ROOT_CONTEXT),this},s.prototype.with=function(e,t,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];var a=this._currentContext;this._currentContext=e||i.ROOT_CONTEXT;try{return t.call.apply(t,o([n],r))}finally{this._currentContext=a}},t.StackContextManager=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.isTimeInput=t.hrTimeToMilliseconds=t.hrTimeDuration=t.timeInputToHrTime=t.isTimeInputHrTime=t.hrTime=void 0;var r=Math.pow(10,9),o=["00","01","02","03","04","05","06","07","08","09"];function i(e){e/=1e3;var t=Math.trunc(e);return[t,Number((e-t).toFixed(9))*r]}function s(){var e,t=performance.timeOrigin;return"number"!=typeof t?(e=performance).timing&&e.timing.fetchStart:t}function a(e){var t=i(s()),n=(e=i("number"==typeof e?e:performance.now()),t[0]+e[0]);t=t[1]+e[1];return r<t&&(t-=r,n+=1),[n,t]}function c(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.hrTime=a,t.isTimeInputHrTime=c,t.timeInputToHrTime=function(e){if(c(e))return e;if("number"==typeof e)return(e<s()?a:i)(e);if(e instanceof Date)return i(e.getTime());throw TypeError("Invalid input type")},t.hrTimeDuration=function(e,t){var n=t[0]-e[0];return(t=t[1]-e[1])<0&&(--n,t+=r),[n,t]},t.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},t.isTimeInput=function(e){return c(e)||"number"==typeof e||e instanceof Date},t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0,n=n(2);var r=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(e){return r.test(e)&&e!==t.INVALID_TRACEID}function s(e){return o.test(e)&&e!==t.INVALID_SPANID}t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE},t.isValidTraceId=i,t.isValidSpanId=s,t.isSpanContextValid=function(e){return i(e.traceId)&&s(e.spanId)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var r=n(20);t.mergeConfig=function(e){var t=Object.assign({},r.DEFAULT_CONFIG,e);return t.traceParams=Object.assign({},r.DEFAULT_CONFIG.traceParams,e.traceParams||{}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpan=void 0;var r=n(2);function o(e){void 0===e&&(e=r.INVALID_SPAN_CONTEXT),this._spanContext=e}o.prototype.context=function(){return this._spanContext},o.prototype.setAttribute=function(e,t){return this},o.prototype.appendAttribute=function(e,t){return this},o.prototype.setAttributes=function(e){return this},o.prototype.addEvent=function(e,t,n){return this},o.prototype.setStatus=function(e){return this},o.prototype.updateName=function(e){return this},o.prototype.end=function(e){},o.prototype.isRecording=function(){return!1},o.prototype.spanReport=function(){},o.prototype.recordException=function(e,t){},t.NoopSpan=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_SPAN_ID=t.SCHEDULED_DELAY_MILLIS=t.DEFAULT_MAX_SPAN_SIZE=t.readSpanKeys=void 0,t.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],t.DEFAULT_MAX_SPAN_SIZE=1e3,t.SCHEDULED_DELAY_MILLIS=3e3,t.NOOP_SPAN_ID="noop"},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))i.label=c[1];else if(6===c[0]&&i.label<o[1])i.label=o[1],o=c;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(c)}}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,n(0)),l=n(24),h=n(30),p=n(38),d=n(5),_=n(4);function f(e,t){this.stateCenter=t,this.QUEUE_MAX=100,this.cacheMaxSize=_.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=_.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:_.CACHE_SIZE.totalAvailCache,totalDBSize:_.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.postDataState="",this.product=e,this.reporterCommonField=new Map,this.reportMap=new Map}f.prototype.init=function(e){return o(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){switch(n.label){case 0:return this.config=r(r({},_.DEFAULT_CONFIG),e),this.config.env%2!=1&&this.bindWindowListener(),this.zegoService=new l.ZegoService(this.config.env||u.ZEGO_ENV.BROWSER,this.config.bps||_.DEFAULT_CONFIG.bps,this.product,this.pro,this.stateCenter),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.zegoService.setPostFailCallback(this.product,(function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.stateCenter.logger.warn("zt.zd.i fail"),this.postDataState="fail",this.dropCount++,this.storePackagesDataToDB(e),[4,this.storePendingDataToDB(1)];case 1:return t.sent(),this._actionListener("postFail"),[2]}}))}))})),this.initPendingQueue(),this.storeHandler=new h.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",d.uuid(6),this.config,this.traceType,this.staticConfig,this.stateCenter),this.storeHandler.setDropCallBack((function(e){t.traceType.DB_O_DROP+=d.calculateMemSize(e),t._actionListener("dataDroped",e)})),[4,this.storeHandler.loadPendingData()];case 1:return n.sent(),this.storeHandler.init().then((function(){t.loadReportData()})).catch((function(e){console.warn(e)})),this.startReportTimer(),this.setWaitNtpTimer(),this.checkCacheDataTimer(),[2]}}))}))},f.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null)},f.prototype.setConfig=function(e){"object"==typeof e&&"number"==typeof e.bps&&(this.config.bps=e.bps,this.zegoService.setBps(this.config.bps)),"object"==typeof e&&"number"==typeof e.totalDBSize&&(this.staticConfig.totalDBSize=e.totalDBSize),"object"==typeof e&&"string"==typeof e.serverUrl&&""!==e.serverUrl&&(this.config.serverUrl=e.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},f.prototype.pause=function(){this.isPaused=!0},f.prototype.resume=function(){this.isPaused=!1;var e=(t=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=t.size;this.checkPendingQueue(e,t)},f.prototype.startReport=function(e){var t=e.get("userID"),n=e.get("token");return!(!t||"string"!=typeof t||!n||"string"!=typeof n||(this.startCommonField=e,this.config.userID=t,this.config.token=n,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.isWithNtp()&&this.bufferDump(),(t=e.get("serverUrl"))&&(this.config.serverUrl=t,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(e=(n=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=n.size,this.checkPendingQueue(e,t)),0))},f.prototype.setTimeOffset=function(e){var t=this;this.clientTimeOffset=e,this.tempBuffer.forEach((function(e){(e=e.data).tags.time_offset||(e.tags.time_offset=t.clientTimeOffset)})),this.config.userID&&this.bufferDump()},f.prototype.setProcessData=function(e){this.stateCenter.processData=e},f.prototype.on=function(e,t){return this._bindListener(e,t)},f.prototype.off=function(e,t){return this._deleteListener(e,t)},f.prototype.report=function(e,t){var n;if(15e3<e.length)return!1;try{n=JSON.parse(e)}catch(e){return!1}return this.stateCenter._log.debug(e+" "+t),(null!=n&&n.id_name||null!=(e=null==n?void 0:n.tags)&&e.id_name||this.config.userID)&&this.isWithNtp()?(null!=n&&n.id_name||null!=(e=null==n?void 0:n.tags)&&e.id_name?this.clientTimeOffset&&(n.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(n.tags.time_offset=this.clientTimeOffset),n.tags.id_name=this.config.userID),this.dumpData(JSON.stringify(n),t)):this.tempBuffer.push({data:n,level:t}),!0},f.prototype.setUnloadState=function(e){this.unloadLevel=e,this.state="unload"},f.prototype.dumpData=function(e,t){var n=this,r=d.calculateMemSize(e),o=(this.traceType.MEM_I_API+=r,u.getSeq()),i=(new Date).getTime(),s={seq:o,content:e,level:t,timestamp:i,packagedContent:""};"unload"===this.state?void 0!==this.unloadLevel&&t<=this.unloadLevel?(this.storeHandler.saveDataToStorage(s),this.pendingQueue.enqueue(s,t)):this.stateCenter._log.debug("level is low"):t<=this.config.importantLevel?(s.key=t+"_"+i+"_"+o,this.dataInDb.push(s.key),this.storeHandler.storeData(s).then((function(e){n.pendingQueue.enqueue(s,t),n.traceType.DB_I_BACKUP+=r})).catch((function(e){var r=n.dataInDb.findIndex((function(e){return e===s.key}));-1<r&&n.dataInDb.splice(r,1),n.pendingQueue.enqueue(s,t)}))):this.pendingQueue.enqueue(s,t),"force"===this.state&&(i=d.calculateMemSize(e),this.forceDataTotalLen+=i)},f.prototype.isWithNtp=function(){return this.isWaitNtpTimeout||void 0!==this.clientTimeOffset},f.prototype.bufferDump=function(){var e,t=this.tempBuffer.shift();t&&(e=t.data,t=t.level,e.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(e),t),this.bufferDump())},f.prototype.isConfigOK=function(e){return""!==e.userID&&""!==e.token&&""!==e.server},f.prototype.testSize=function(e){},f.prototype.flush=function(e){var t;"force"!==this.state&&(this.state="force",t=16e6,"object"==typeof e&&"number"==typeof e.bps&&(t=e.bps),this.zegoService.setBps(t),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,0<t?this.checkPendingQueue(t,e):this.loadReportData())},f.prototype.setWaitNtpTimeout=function(e){this.waitNtpTimeout=e},f.prototype.setWaitNtpTimer=function(){var e=this;this.ntpTimer=setTimeout((function(){e.isWaitNtpTimeout=!0,e.config.userID&&e.bufferDump()}),this.waitNtpTimeout)},f.prototype.startReportTimer=function(){var e=this,t=(this.stateCenter._log.debug("startReportTimer "+new Date),this.timeInterval=!0,(n=this.pendingQueue.getPendingDataInfo()).pendingDataSize),n=n.size;this.checkPendingQueue(t,n),this.reportTimer=window.setTimeout((function(){e.startReportTimer()}),3e4)},f.prototype.checkCacheDataTimer=function(){return o(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:return t=this.pendingQueue.getPendingDataInfo(),e=t.pendingDataSize,t=t.size,e>this.config.reportSize||t>this.config.reportNum?[4,this.checkPendingQueue(e,t)]:[3,2];case 1:return r.sent(),[3,3];case 2:this.loadReportData(),r.label=3;case 3:return this.checkDataTimer=window.setTimeout((function(){n.checkCacheDataTimer()}),15e3),[2]}}))}))},f.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(t?"pagehide":"beforeunload",(function(){window.event&&(window.event.cancelBubble=!0),e.saveDataBeforeUnload()}))},f.prototype.saveDataBeforeUnload=function(){(e=this.pendingQueue.readStoreData(1)).totalLen;var e=e.storeArr,t=(this.storeHandler.resetCommonStore(),[]);t.push.apply(t,a(e)),e=this.zegoService.readReportQueueData(),t.push.apply(t,a(e)),0<t.length&&this.storeHandler.storePendingData(t)},f.prototype.setNetStateCheck=function(){"fail"===this.postDataState&&this.zegoService.handleNetConnect()},f.prototype.postSucHandler=function(e,t,n){return o(this,void 0,void 0,(function(){var n,r,o,s,a,c=this;return i(this,(function(i){switch(i.label){case 0:for(this.stateCenter._log.debug("post suc"),this.postDataState="suc",e.forEach((function(e){c.traceType.MEM_O_DONE+=d.calculateMemSize(e.content)})),n=function(t){var n=e[t];r.storeHandler.removeDataItem(n).then((function(e){n.key&&c.reportMap.delete(n.key)})).catch((function(e){}))},r=this,o=0;o<e.length;o++)n(o);return this.reportPackagesSize-=t,a=this.pendingQueue.getPendingDataInfo(),s=a.pendingDataSize,a=a.size,s>this.config.reportSize||a>this.config.reportNum?[4,this.checkPendingQueue(s,a)]:[3,2];case 1:return i.sent(),[3,3];case 2:this.loadReportData(),i.label=3;case 3:return"force"===this.state&&0==this.reportPackagesSize&&(s=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,a=1-Number((s/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",a),0<this.storeHandler.storeSize)&&this.loadReportData((function(e){0===e&&(c.state="normal",c.zegoService.setBps(c.config.bps||_.DEFAULT_CONFIG.bps),c.listenerList.forceSuccessCallback)&&c._actionListener("forceResult","SUCCESS")})),[2]}}))}))},f.prototype.checkPendingQueue=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return e>this.config.reportSize||t>this.config.reportNum||["force","unload"].includes(this.state)||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:(this.stateCenter._log.debug("isPaused "+this.isPaused+" "+this.userID+" "+this.config.token+" "+this.config.serverUrl),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,2])):[3,7];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,5]);case 4:i.sent(),i.label=5;case 5:return[2];case 6:if(o=this.pendingQueue.readReportData(this.config.reportSize),n=o.totalLen,o=o.reportDataArr,n<=0)return[2];for(o=this.setCommonField(o),r=o.packageArr,o=o.packageLen,this.zegoService.report(r,o,this.product,"unload"===this.state),s=0;s<r.length;s++)a=r[s],this.reportMap.set(a.key,a);this.reportPackagesSize+=o,this.pendingQueue.refresh(n),i.label=7;case 7:return[2]}}))}))},f.prototype.initPendingQueue=function(){var e=this;this.pendingQueue=new p.PendingQueue(this.config.levels,this.product,this.staticConfig,this.stateCenter),this.pendingQueue.setListener({enCallback:function(t,n,r){return o(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.checkPendingQueue(r,n)];case 1:return e.sent(),[2]}}))}))}})},f.prototype.loadDBDataToMem=function(){var e=this;this.storeHandler.readStoreDataItem().then((function(t){var n=d.calculateMemSize(t.content);e.traceType.MEM_I_LOAD+=n,e.pendingQueue.enqueue(t,t.level)})).catch((function(e){}))},f.prototype.storePendingDataToDB=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,u,l,h;return i(this,(function(p){switch(p.label){case 0:n=this.pendingQueue.readStoreData(e),t=n.totalLen,n=n.storeArr,r=function(e){var n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,o.storeDataItem(e,t)];case 1:return i.sent(),n=e.level+"_"+e.timestamp+"_"+e.seq,-1<(r=o.dataInDb.findIndex((function(e){return e===n})))&&o.dataInDb.splice(r,1),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))},o=this,p.label=1;case 1:p.trys.push([1,6,7,8]),s=c(n),a=s.next(),p.label=2;case 2:return a.done?[3,5]:(u=a.value,[5,r(u)]);case 3:p.sent(),p.label=4;case 4:return a=s.next(),[3,2];case 5:return[3,8];case 6:return u=p.sent(),l={error:u},[3,8];case 7:try{a&&!a.done&&(h=s.return)&&h.call(s)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}))},f.prototype.storePackagesDataToDB=function(e){var t=this;e.length&&e.forEach((function(e){t.storeHandler.storeData(e).then((function(n){var r=d.calculateMemSize(e.content);t.traceType.MEM_O_DUMP+=r})).catch((function(e){}))}))},f.prototype.storeDataItem=function(e,t){var n=this;return new Promise((function(t,r){return o(n,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.storeHandler.storeData(e)];case 1:return o.sent(),n=d.calculateMemSize(e.content),this.traceType.MEM_O_DUMP+=n,t(),[3,3];case 2:return n=o.sent(),r(n),[3,3];case 3:return[2]}}))}))}))},f.prototype.loadReportData=function(e){var t=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),(function(e){return-1<t.dataInDb.indexOf(e)})).then((function(n){t.isLoadReportData=!1,n.datas.forEach((function(e){var n;t.reportMap.has(e.key)||t.pendingQueue.findInQueue(e)||(n=d.calculateMemSize(e.content),t.traceType.MEM_I_LOAD+=n,t.pendingQueue.enqueue(e,e.level),t.dataInDb.push(e.key))})),e&&e(n.len)})).catch((function(e){t.isLoadReportData=!1})))},f.prototype.setCommonField=function(e){var t=this,n=0;return e.forEach((function(e){var r,o,i,a,u,l;if(e.packagedContent=JSON.parse(e.content),t.config.initCommonField)try{for(var h=c(t.config.initCommonField),p=h.next();!p.done;p=h.next()){var _=s(p.value,2),f=_[0],g=_[1];(O=JSON.parse(e.content))[f]=g,e.packagedContent=O}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}if(t.startCommonField)try{for(var m=c(t.startCommonField),y=m.next();!y.done;y=m.next()){var v=s(y.value,2);f=v[0],g=v[1];"userID"!==f&&"token"!==f&&"serverUrl"!==f&&((O=JSON.parse(e.content))[f]=g,e.packagedContent=O)}}catch(e){i={error:e}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(t.reporterCommonField)try{for(var b=c(t.reporterCommonField),E=b.next();!E.done;E=b.next()){var O,S=s(E.value,2);f=S[0],g=S[1],(O=JSON.parse(e.content))[f]=g,e.packagedContent=O}}catch(e){u={error:e}}finally{try{E&&!E.done&&(l=b.return)&&l.call(b)}finally{if(u)throw u.error}}n+=d.calculateMemSize(JSON.stringify(e.packagedContent))})),{packageArr:e,packageLen:n}},f.prototype._bindListener=function(e,t){return!!this.listenerList[e]&&"function"==typeof t&&(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0)},f.prototype._deleteListener=function(e,t){var n;return!!this.listenerList[e]&&(n=this.listenerList[e],t?n.splice(n.indexOf(t),1):this.listenerList[e]=[],!0)},f.prototype._actionListener=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.listenerList[e]&&this.listenerList[e].forEach((function(e){try{e.apply(void 0,a(t))}catch(e){}}))},t.ZegoDataReport=f},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoService=void 0,n(0)),s=n(25),a=n(29),c=n(4);function u(e,t,n,r,o){var a,c,u,l=this;this.env=e,this.product=n,this.pro=r,this.stateCenter=o,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=i.ENUM_NETWORK_STATE.online,this.state=i.ENUM_CONNECT_STATE.disconnected,this.wsFrequentShutdownCounter=(c=a=0,u=function(){c=a=0},{onOpen:function(){a=performance.now()},onClose:function(){0<a&&(performance.now()-a<100?(c++,l.stateCenter.logger.info("zt.rzs.wfsc frequently shutdown.")):u())},isOutOfMaxTimes:function(){return 10<=c}}),this.bindWindowListener(),this.networkState=i.ENUM_NETWORK_STATE.online,this.service=new s.LogService(e,n,r,o),this.setBps(t),this.reportQueue=new i.Queue}u.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.networkState=i.ENUM_NETWORK_STATE.offline})),window.addEventListener("online",(function(t){e.handleNetConnect()}))},u.prototype.handleNetConnect=function(){this.networkState=i.ENUM_NETWORK_STATE.online;var e=this.url;this.url="",this.setLogServer(e),this.netWorkFail=!1},u.prototype.setLogServer=function(e){try{return e.startsWith("wss:")||e.startsWith("ws:")?(this.logType=i.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")||e.startsWith("http:")?(this.logType=i.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=i.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return!1}},u.prototype.setLogUrlParams=function(e){this.logParams=e},u.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.logParams.id_name)&&(this.wsFrequentShutdownCounter.isOutOfMaxTimes()?(this.stateCenter.logger.warn("zt.rzs.owsls frequently shutdown too many times. cannot create socket anymore."),this.state=i.ENUM_CONNECT_STATE.disconnected):(this.state=i.ENUM_CONNECT_STATE.connecting,e=e+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(e),this.service.openHandler((function(){t.service.onPush(),t.service.startCheck(),t.stateCenter.logger.info("zt.rzs.owsls socket open"),t.openHandler(),t.wsFrequentShutdownCounter.onOpen()})),this.service.closeHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket(),t.wsFrequentShutdownCounter.onClose()})),this.service.errorHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(e.code||e)),t.state=i.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()}))))},u.prototype.stopWebSocketServer=function(){this.service.closeSocket()},u.prototype.openHttpsLogServer=function(e){(this.url=e)&&this.stopHttpsServer()},u.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},u.prototype.SendHttpsLog=function(e,t,n,r){this.env===i.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb(e,t,n,r):this.SendHttpsLogWeChatMini(e,t,n,r)},u.prototype.SendHttpsLogWeb=function(e,t,n,r){var o=this,i=(e=JSON.stringify({body:{data:e}}),new XMLHttpRequest);i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(0!=i.responseText.length)try{var e=JSON.parse(i.responseText).interval;"number"==typeof e&&o.logUploadInterval!==e&&o.openHttpsLogServer(o.url),n&&n()}catch(e){r&&r()}}else r&&r()},i.open("POST",this.url,!0),i.send(e)},u.prototype.SendHttpsLogWeChatMini=function(e,t,n,r){var o=this;e={appid:this.logParams.appid+"",timestamp:(new Date).getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:e})},wx.request({url:this.url,data:JSON.stringify(e),method:"POST",success:function(e){0!=e.data.length&&("number"==typeof(e=e&&e.data&&e.data.interval)&&o.logUploadInterval!==e&&o.openHttpsLogServer(o.url),n)&&n()},fail:function(e){r&&r()}})},u.prototype.openHandler=function(){this.state=i.ENUM_CONNECT_STATE.connected,this.startReport()},u.prototype.setPostSucCallback=function(e,t){this.postSucCallbackList[e]=t},u.prototype.setPostFailCallback=function(e,t){this.postFailCallbackList[e]=t},u.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},u.prototype.report=function(e,t,n,r){this.packageLen++,this.packagesDataSize+=t,this.reportQueue.enqueue({reportDatas:e,dataLen:t,product:n}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport(r)},u.prototype.setBps=function(e){this.tokenBucket=new a.TokenBucket(c.BUCKET_CONFIG.bucketSize,e/8,"sec")},u.prototype.startReport=function(e){var t,n,r,o,s=this;this.logType===i.ENUM_REMOTE_TYPE.WEBSOCKET&&this.state===i.ENUM_CONNECT_STATE.disconnected?(t=this.url,this.url="",this.setLogServer(t)):0<this.reportQueue.size()&&(t=this.reportQueue.dequeue(),n=t.reportDatas,r=t.dataLen,o=t.product,new Date,e?this.sendReport(n,r,o):this.tokenBucket.removeTokens(r,(function(){s.sendReport(n,r,o)})))},u.prototype.failTooMuch=function(){if(this.failCount<=0)return!1;1==this.failCount&&(this.failStartTime=Date.now());var e=(Date.now()-this.failStartTime)/1e3;return this.failCount>=c.FAIL_COUNT&&e>c.FAIL_TIME||this.failCount>=c.FAIL_MAX_COUNT},u.prototype.sendReport=function(e,t,n){var r=this;this.reportData(e,t,n,(function(){r.failCount=0,r.failStartTime=0,r.packageLen--,r.packagesDataSize-=t,r.postSucCallbackList[n]&&r.postSucCallbackList[n](e,t,n)}),(function(o){var i;r.reportQueue.enqueue({reportDatas:e,dataLen:t,product:n}),r.failCount++,r.failTooMuch()?(r.netWorkFail=!0,i=r.decodeReportQueue(),Object.keys(r.postFailCallbackList).forEach((function(e){r.postFailCallbackList[n](i[e])}))):r.startReport()}))},u.prototype.resumeReport=function(){!0===this.netWorkFail&&this.networkState===i.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},u.prototype.reportData=function(e,t,n,r,o){var s=this,a=[];e.forEach((function(e){a.push(e.packagedContent)})),this.logType==i.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState===i.ENUM_NETWORK_STATE.offline?o&&o(i.errorList.BROKEN):this.service.sendMessage("report",a,r,(function(e){var t;s.state===i.ENUM_CONNECT_STATE.disconnected&&e===i.SOCKET_DISCONNECT&&(t=s.url,s.url="",s.setLogServer(t)),o&&o(e)})):this.logType==i.ENUM_REMOTE_TYPE.HTTPS&&this.SendHttpsLog(a,t,r,(function(){o&&o()}))},u.prototype.unsigned2signed=function(e){var t=parseInt(e,10);if(256<t)return t%256;for(var n=[];0<t;)t%2!=0?n.push(1):n.push(0),t=Number(t/2);for(n.reverse();n.length<8;)n.unshift(0);var r="";if(1==(n=n.join("")).substr(0,1)){for(var o=1;o<n.length;o++)1==n.substr(o,1)?r+=0:r+=1;return"-"+(parseInt(r,2)+1)}for(o=0;o<n.length;o++)r+=n.substr(o,1);return parseInt(r,2)},u.prototype.decodeReportQueue=function(){for(var e={},t=this.reportQueue.size(),n=0;n<t;n++){var r,i=(r=this.reportQueue.dequeue()).reportDatas,s=r.dataLen;e[r=r.product]||(e[r]=[]),e[r]=o(e[r],i),this.reportQueue.enqueue({reportDatas:i,dataLen:s,product:r})}return e},u.prototype.readReportQueueData=function(){for(var e=[],t=this.reportQueue.size(),n=0;n<t;n++){var r=this.reportQueue.dequeue(),i=r.reportDatas;r.dataLen,r.product,e.push.apply(e,o(i))}return e},t.ZegoService=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var r=n(26),o=n(4),i=n(0);function s(e,t,n,o){this.env=e,this.product=t,this.pro=n,this.stateCenter=o,this.service=new r.ZegoSocketService(this.env,this.product,this.pro,this.stateCenter),this.cmdSeq=0,this.responseRouters={}}s.prototype.handleSendCommandMsgRsp=function(e){var t,n,r=this,o=this.service.sendCommandMap[e.messageId||(null==(o=null==e?void 0:e.data)?void 0:o.message_id)];null!=o&&(n=o._data,delete this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)],this.service.sendCommandList.remove(o),0===e.code?setTimeout((function(){n&&null!=n.success&&n.success(e,r.cmdSeq)}),0):setTimeout((function(){n&&null!=n.error&&n.error(e,r.cmdSeq)}),0))},s.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){e.handleSendCommandMsgRsp(t)}},s.prototype.closeHandler=function(e){this.service.closeHandler(e)},s.prototype.openHandler=function(e){this.service.openHandler(e)},s.prototype.errorHandler=function(e){this.service.errorHandler(e)},s.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:123,seq:++this.cmdSeq,session_id:""}},s.prototype.startCheck=function(){this.service.startCheck()},s.prototype.stopCheck=function(){this.service.stopCheck()},s.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},s.prototype.createSocket=function(e){this.service.createSocket(e),this.responseRouters={}},s.prototype.closeSocket=function(){this.service.closeSocket()},s.prototype.sendMessage=function(e,t,n,r,s,a){return this.service.isDisConnect()?(r&&r(i.SOCKET_DISCONNECT),0):(s=s||this.getHeader(e),this.service.sendMessage(s,t,n,r,{timeOut:1e3*o.DEFAULT_CONFIG.netTimeout}))},s.prototype.on=function(e,t){this.responseRouters[e]=t},t.LogService=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0,n(27)),i=n(0),s=n(28);function a(e,t,n,r){this.product=t,this.pro=n,this.stateCenter=r,this.socket=null,this.sendCommandList=new i.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=3e4,this.sendDataCheckInterval=2e3,this.ENV=e}a.prototype.createSocket=function(e){this.socket=o.createZegoWebSocket(e,this.ENV),this.socket.binaryType="arraybuffer"},a.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},a.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},a.prototype.sendMessage=function(e,t,n,o,i){void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i={timeOut:6e3});var a=r(r({},this.stateCenter.processData),{time_upload:Date.now()});a={data:t={message_id:e.seq,product:this.product,s:JSON.stringify({speed_detail:t,process:a})},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:i.timeOut,success:n,error:o};return i=this.sendCommandList.push(a),this.sendCommandMap[a.seq]=i,this.socket&&"pb"!==this.pro&&(this.stateCenter._log.debug("upload data",JSON.stringify(t)),n=s.deflate(JSON.stringify(t),{to:"string"}),this.socket.send(n)),e.seq},a.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(i.errorList.TIMEOUT,t._data.data.message_id,t._data.data.s)}),0),t=e.getFirst()},a.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),o=0;!(null==n||n._data&&n._data.sendTime+n._data.timeOut>r||(n._data&&delete t[n._data.data.message_id],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+this.sendDataDropTimeout<r||n&&n._data&&n._data.error&&n._data.error(i.errorList.TIMEOUT,n._data.data.message_id,n._data.data.s),++o>=this.sendDataCheckOnceCount));)n=e.getFirst()},a.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},a.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},a.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.responseHandler(),e(n)})},a.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.data))),e.onMessage(t)})},a.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},a.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},a.prototype.onMessage=function(e){},t.ZegoSocketService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var r=n(0),o=(i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()},i);function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=o,t.createZegoWebSocket=function(e,t){return new(t===r.ZEGO_ENV.BROWSER?WebSocket:o)(e)}},function(e,t,n){!function(e){"use strict";function t(e){for(var t=e.length;0<=--t;)e[t]=0}var n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576),a=(t(s),new Array(60)),c=(t(a),new Array(512)),u=(t(c),new Array(256)),l=(t(u),new Array(29));t(l);var h,p,d,_=new Array(30);function f(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function g(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function m(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0}function y(e){8<e.bi_valid?D(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function b(e,t,o){var i,s,a,c,h=0;if(0!==e.sym_next)for(;i=255&e.pending_buf[e.sym_buf+h++],i+=(255&e.pending_buf[e.sym_buf+h++])<<8,s=e.pending_buf[e.sym_buf+h++],0==i?U(e,s,t):(a=u[s],U(e,a+256+1,t),0!==(c=n[a])&&(s-=l[a],H(e,s,c)),a=A(--i),U(e,a,o),0!==(c=r[a])&&(i-=_[a],H(e,i,c))),h<e.sym_next;);U(e,256,t)}function E(e,t){var n,r,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)B(e,i,n);for(o=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],B(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,B(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var l,h,p,d,_,f=e,g=t.dyn_tree,m=t.max_code,y=t.stat_desc.static_tree,v=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,E=t.stat_desc.extra_base,O=t.stat_desc.max_length,S=0,T=0;T<=15;T++)f.bl_count[T]=0;for(g[2*f.heap[f.heap_max]+1]=0,l=f.heap_max+1;l<573;l++)(T=g[2*g[2*(h=f.heap[l])+1]+1]+1)>O&&(T=O,S++),g[2*h+1]=T,m<h||(f.bl_count[T]++,d=0,E<=h&&(d=b[h-E]),_=g[2*h],f.opt_len+=_*(T+d),v&&(f.static_len+=_*(y[2*h+1]+d)));if(0!==S){do{for(T=O-1;0===f.bl_count[T];)T--}while(f.bl_count[T]--,f.bl_count[T+1]+=2,f.bl_count[O]--,0<(S-=2));for(T=O;0!==T;T--)for(h=f.bl_count[T];0!==h;)(p=f.heap[--l])>m||(g[2*p+1]!==T&&(f.opt_len+=(T-g[2*p+1])*g[2*p],g[2*p+1]=T),h--)}x(i,u,e.bl_count)}function O(e,t,n){var r,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],++a<c&&o===s||(a<u?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=o,u=(a=0)===s?(c=138,3):o===s?(c=6,3):(c=7,4))}function S(e,t,n){var r,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<c&&o===s)){if(a<u)for(;U(e,o,e.bl_tree),0!=--a;);else 0!==o?(o!==i&&(U(e,o,e.bl_tree),a--),U(e,16,e.bl_tree),H(e,a-3,2)):a<=10?(U(e,17,e.bl_tree),H(e,a-3,3)):(U(e,18,e.bl_tree),H(e,a-11,7));i=o,u=(a=0)===s?(c=138,3):o===s?(c=6,3):(c=7,4)}}function T(e,t,n,r){H(e,0+(r?1:0),3),y(e),D(e,n),D(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n}function k(e,t){return e.msg=Z[t],t}function R(e){return 2*e-(4<e?9:0)}function C(e,t){W(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Se(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function I(e,t){var n,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-ge?e.strstart-(e.w_size-ge):0,u=e.window,l=e.w_mask,h=e.prev,p=e.strstart+fe,d=u[i+s-1],_=u[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(n=t)+s]===_&&u[n+s-1]===d&&u[n]===u[i]&&u[++n]===u[i+1]){for(i+=2,n++;u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<p;);if(r=fe-(p-i),i=p-fe,s<r){if(e.match_start=t,a<=(s=r))break;d=u[i+s-1],_=u[i+s]}}}while((t=h[t&l])>c&&0!=--o);return s<=e.lookahead?s:e.lookahead}function M(e,t){for(var n,r,o,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;n=65535,o=e.bi_valid+42>>3,!(e.strm.avail_out<o||(n=(o=e.strm.avail_out-o)<(n=n>(r=e.strstart-e.block_start)+e.strm.avail_in?r+e.strm.avail_in:n)?o:n)<i&&(0===n&&t!==te||t===Q||n!==r+e.strm.avail_in)||(s=t===te&&n===r+e.strm.avail_in?1:0,Y(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Se(e.strm),r&&(n<r&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Te(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n),0!==s)););return(a-=e.strm.avail_in)&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==Q&&t!==te&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),(o=o>e.strm.avail_in?e.strm.avail_in:o)&&(Te(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,i=(o=65535<e.pending_buf_size-o?65535:e.pending_buf_size-o)>e.w_size?e.w_size:o,((r=e.strstart-e.block_start)>=i||(r||t===te)&&t!==Q&&0===e.strm.avail_in&&r<=o)&&(n=o<r?o:r,s=t===te&&0===e.strm.avail_in&&n===r?1:0,Y(e,e.block_start,n,s),e.block_start+=n,Se(e.strm)),s?3:1)}function L(e,t){for(var n,r;;){if(e.lookahead<ge){if(ke(e),e.lookahead<ge&&t===Q)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=Oe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ge&&(e.match_length=I(e,n)),3<=e.match_length)if(r=X(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=Oe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Oe(e,e.ins_h,e.window[e.strstart+1]);else r=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===te?(C(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(C(e,!1),0===e.strm.avail_out)?1:2}function P(e,t){for(var n,r,o;;){if(e.lookahead<ge){if(ke(e),e.lookahead<ge&&t===Q)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=Oe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ge&&(e.match_length=I(e,n),e.match_length<=5&&(e.strategy===ue||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-3,r=X(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=Oe(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(C(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=X(e,0,e.window[e.strstart-1]))&&C(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=X(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===te?(C(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(C(e,!1),0===e.strm.avail_out)?1:2}t(_);var A=function(e){return e<256?c[e]:c[256+(e>>>7)]},D=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},H=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},U=function(e,t,n){H(e,n[2*t],n[2*t+1])},j=function(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1},x=function(e,t,n){for(var r,o=new Array(16),i=0,s=1;s<=15;s++)i=i+n[s-1]<<1,o[s]=i;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=j(o[a]++,a))}},B=function(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&v(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!v(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},q=!1,G=T,z=function(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;i=i+(o=o+t[r++]|0)|0,--s;);o%=65521,i%=65521}return o|i<<16|0},V=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}()),F=function(e,t,n,r){var o=V,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^o[255&(e^t[s])];return-1^e},Z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Y=G,W=function(e,t,n,r){var o,c,u,l=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),E(e,e.l_desc),E(e,e.d_desc),l=function(e){var t;for(O(e,e.dyn_ltree,e.l_desc.max_code),O(e,e.dyn_dtree,e.d_desc.max_code),E(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*i[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=o&&(o=c)):o=c=n+5,n+4<=o&&-1!==t)T(e,t,n,r);else if(4===e.strategy||c===o)H(e,2+(r?1:0),3),b(e,s,a);else{H(e,4+(r?1:0),3);var h=e,p=(t=e.l_desc.max_code+1,n=e.d_desc.max_code+1,l+1);for(H(h,t-257,5),H(h,n-1,5),H(h,p-4,4),u=0;u<p;u++)H(h,h.bl_tree[2*i[u]+1],3);S(h,h.dyn_ltree,t-1),S(h,h.dyn_dtree,n-1),b(e,e.dyn_ltree,e.dyn_dtree)}m(e),r&&y(e)},X=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(u[n]+256+1)]++,e.dyn_dtree[2*A(t)]++),e.sym_next===e.sym_end},J=function(e){H(e,2,3),U(e,256,s),16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},Q=K.Z_NO_FLUSH,$=K.Z_PARTIAL_FLUSH,ee=K.Z_FULL_FLUSH,te=K.Z_FINISH,ne=K.Z_BLOCK,re=K.Z_OK,oe=K.Z_STREAM_END,ie=K.Z_STREAM_ERROR,se=K.Z_DATA_ERROR,ae=K.Z_BUF_ERROR,ce=K.Z_DEFAULT_COMPRESSION,ue=K.Z_FILTERED,le=K.Z_HUFFMAN_ONLY,he=K.Z_RLE,pe=K.Z_FIXED,de=K.Z_UNKNOWN,_e=K.Z_DEFLATED,fe=258,ge=262,me=42,ye=113,ve=666,be=function(e){for(var t=e.length;0<=--t;)e[t]=0},Ee=function(e){for(var t,n,r=e.w_size,o=t=e.hash_size;n=e.head[--o],e.head[o]=r<=n?n-r:0,--t;);for(o=t=r;n=e.prev[--o],e.prev[o]=r<=n?n-r:0,--t;);},Oe=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Se=function(e){var t=e.state,n=t.pending;0!==(n=n>e.avail_out?e.avail_out:n)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Te=function(e,t,n,r){var o=e.avail_in;return 0===(o=r<o?r:o)?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=z(e.adler,t,o,n):2===e.state.wrap&&(e.adler=F(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},ke=function(e){var t,n,r=e.w_size;do{if(t=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-ge)&&(e.window.set(e.window.subarray(r,r+r-t),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),Ee(e),t+=r),0===e.strm.avail_in)break;if(t=Te(e.strm,e.window,e.strstart+e.lookahead,t),e.lookahead+=t,3<=e.lookahead+e.insert)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=Oe(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Oe(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ge&&0!==e.strm.avail_in)};function Re(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}var Ce=[new Re(0,0,0,0,M),new Re(4,4,8,4,L),new Re(4,5,16,8,L),new Re(4,6,32,32,L),new Re(4,4,16,16,P),new Re(8,16,32,32,P),new Re(8,16,128,128,P),new Re(8,32,128,256,P),new Re(32,128,258,1024,P),new Re(32,258,258,4096,P)];function we(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_e,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),be(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ne=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==me&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ye&&t.status!==ve?1:0},Ie=function(e){if(Ne(e))return k(e,ie);e.total_in=e.total_out=0,e.data_type=de;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?me:ye,e.adler=2===t.wrap?0:1,t.last_flush=-2,function(e){if(!q){for(var t,i,y,v=new Array(16),b=0,E=0;E<28;E++)for(l[E]=b,t=0;t<1<<n[E];t++)u[b++]=E;for(u[b-1]=E,E=y=0;E<16;E++)for(_[E]=y,t=0;t<1<<r[E];t++)c[y++]=E;for(y>>=7;E<30;E++)for(_[E]=y<<7,t=0;t<1<<r[E]-7;t++)c[256+y++]=E;for(i=0;i<=15;i++)v[i]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,v[8]++;for(;t<=255;)s[2*t+1]=9,t++,v[9]++;for(;t<=279;)s[2*t+1]=7,t++,v[7]++;for(;t<=287;)s[2*t+1]=8,t++,v[8]++;for(x(s,287,v),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=j(t,5);h=new f(s,n,257,286,15),p=new f(a,r,0,30,15),d=new f(new Array(0),o,0,19,7),q=!0}e.l_desc=new g(e.dyn_ltree,h),e.d_desc=new g(e.dyn_dtree,p),e.bl_desc=new g(e.bl_tree,d),e.bi_buf=0,e.bi_valid=0,m(e)}(t),re};function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){}for(var Le=new Uint8Array(256),Pe=0;Pe<256;Pe++)Le[Pe]=252<=Pe?6:248<=Pe?5:240<=Pe?4:224<=Pe?3:192<=Pe?2:1;function Ae(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);for(var t,n,r,o,i=e.length,s=0,a=0;a<i;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=o=0;o<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}function De(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Le[254]=Le[254]=1;var He=Object.prototype.toString,Ue=K.Z_NO_FLUSH,je=K.Z_SYNC_FLUSH,xe=K.Z_FULL_FLUSH,Be=K.Z_FINISH,qe=K.Z_OK,Ge=K.Z_STREAM_END,ze=K.Z_DEFAULT_COMPRESSION,Ve=K.Z_DEFAULT_STRATEGY,Fe=K.Z_DEFLATED;function Ze(e){this.options=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);r.length;){var o=r.shift();if(o){if("object"!==Me(o))throw new TypeError(o+"must be non-object");for(var i in o)t=o,n=i,Object.prototype.hasOwnProperty.call(t,n)&&(e[i]=o[i])}}return e}({level:ze,method:Fe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ve},e||{});var t,n=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new De,this.strm.avail_out=0,function(e,t,n,r,o,i){if(!e)return ie;var s=1;if(t===ce&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||n!==_e||r<8||15<r||t<0||9<t||i<0||pe<i||8===r&&1!==s)return k(e,ie);8===r&&(r=9);var a=new we;return(e.state=a).strm=e,a.status=me,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=i,a.method=n,(r=Ie(s=e))===re&&((s=s.state).window_size=2*s.w_size,be(s.head),s.max_lazy_match=Ce[s.level].max_lazy,s.good_match=Ce[s.level].good_length,s.nice_match=Ce[s.level].nice_length,s.max_chain_length=Ce[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),r}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(n!==qe)throw new Error(Z[n]);if(e.header&&(r=this.strm,t=e.header,Ne(r)||2!==r.state.wrap||(r.state.gzhead=t)),e.dictionary){var r="string"==typeof e.dictionary?Ae(e.dictionary):"[object ArrayBuffer]"===He.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((n=function(e,t){var n=t.length;if(Ne(e))return ie;var r=e.state,o=r.wrap;if(2===o||1===o&&r.status!==me||r.lookahead)return ie;1===o&&(e.adler=z(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(0===o&&(be(r.head),r.strstart=0,r.block_start=0,r.insert=0),(i=new Uint8Array(r.w_size)).set(t.subarray(n-r.w_size,n),0),t=i,n=r.w_size);var i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ke(r);3<=r.lookahead;){for(var c=r.strstart,u=r.lookahead-2;r.ins_h=Oe(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++,--u;);r.strstart=c,r.lookahead=2,ke(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,r.wrap=o,re}(this.strm,r))!==qe)throw new Error(Z[n]);this._dict_set=!0}}function Ke(e,t){if((t=new Ze(t)).push(e,!0),t.err)throw t.msg||Z[t.err];return t.result}function Ye(e,t){return(t=t||{}).raw=!0,Ke(e,t)}function We(e,t){return(t=t||{}).gzip=!0,Ke(e,t)}Ze.prototype.push=function(e,t){var n,r,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Be:Ue,"string"==typeof e?o.input=Ae(e):"[object ArrayBuffer]"===He.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;)if(0===o.avail_out&&(o.output=new Uint8Array(i),o.next_out=0,o.avail_out=i),(r===je||r===xe)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if(function(e,t){if(Ne(e)||ne<t||t<0)return e?k(e,ie):ie;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===ve&&t!==te)return k(e,0===e.avail_out?ae:ie);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Se(e),0===e.avail_out)return n.last_flush=-1,re}else if(0===e.avail_in&&R(t)<=R(r)&&t!==te)return k(e,ae);if(n.status===ve&&0!==e.avail_in)return k(e,ae);if(n.status===me&&0===n.wrap&&(n.status=ye),n.status===me&&(r=_e+(n.w_bits-8<<4)<<8,r|=(n.strategy>=le||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(r|=32),N(n,r+=31-r%31),0!==n.strstart&&(N(n,e.adler>>>16),N(n,65535&e.adler)),e.adler=1,n.status=ye,Se(e),0!==n.pending))return n.last_flush=-1,re;if(57===n.status)if(e.adler=0,w(n,31),w(n,139),w(n,8),n.gzhead)w(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),w(n,255&n.gzhead.time),w(n,n.gzhead.time>>8&255),w(n,n.gzhead.time>>16&255),w(n,n.gzhead.time>>24&255),w(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),w(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(w(n,255&n.gzhead.extra.length),w(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=F(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(w(n,0),w(n,0),w(n,0),w(n,0),w(n,0),w(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),w(n,3),n.status=ye,Se(e),0!==n.pending)return n.last_flush=-1,re;if(69===n.status){if(n.gzhead.extra){for(var o=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+i>n.pending_buf_size;){var s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>o&&(e.adler=F(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex+=s,Se(e),0!==n.pending)return n.last_flush=-1,re;o=0,i-=s}r=new Uint8Array(n.gzhead.extra),n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>o&&(e.adler=F(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var a,c=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>c&&(e.adler=F(e.adler,n.pending_buf,n.pending-c,c)),Se(e),0!==n.pending)return n.last_flush=-1,re;c=0}}while(a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,w(n,a),0!=a);n.gzhead.hcrc&&n.pending>c&&(e.adler=F(e.adler,n.pending_buf,n.pending-c,c)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var u,l=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>l&&(e.adler=F(e.adler,n.pending_buf,n.pending-l,l)),Se(e),0!==n.pending)return n.last_flush=-1,re;l=0}}while(u=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,w(n,u),0!=u);n.gzhead.hcrc&&n.pending>l&&(e.adler=F(e.adler,n.pending_buf,n.pending-l,l))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Se(e),0!==n.pending))return n.last_flush=-1,re;w(n,255&e.adler),w(n,e.adler>>8&255),e.adler=0}if(n.status=ye,Se(e),0!==n.pending)return n.last_flush=-1,re}if(0!==e.avail_in||0!==n.lookahead||t!==Q&&n.status!==ve){if(r=0===n.level?M(n,t):n.strategy===le?function(e,t){for(var n;;){if(0===e.lookahead&&(ke(e),0===e.lookahead)){if(t===Q)return 1;break}if(e.match_length=0,n=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(C(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(C(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===he?function(e,t){for(var n,r,o,i,s=e.window;;){if(e.lookahead<=fe){if(ke(e),e.lookahead<=fe&&t===Q)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(r=s[o=e.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){for(i=e.strstart+fe;r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i;);e.match_length=fe-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=X(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(C(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(C(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(C(e,!1),0===e.strm.avail_out)?1:2}(n,t):Ce[n.level].func(n,t),3!==r&&4!==r||(n.status=ve),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),re;if(2===r&&(t===$?J(n):t!==ne&&(Y(n,0,0,!1),t===ee&&(be(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Se(e),0===e.avail_out))return n.last_flush=-1,re}return t!==te?re:n.wrap<=0?oe:(2===n.wrap?(w(n,255&e.adler),w(n,e.adler>>8&255),w(n,e.adler>>16&255),w(n,e.adler>>24&255),w(n,255&e.total_in),w(n,e.total_in>>8&255),w(n,e.total_in>>16&255),w(n,e.total_in>>24&255)):(N(n,e.adler>>>16),N(n,65535&e.adler)),Se(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?re:oe)}(o,r)===Ge)return 0<o.next_out&&this.onData(o.output.subarray(0,o.next_out)),n=function(e){if(Ne(e))return ie;var t=e.state.status;return e.state=null,t===ye?k(e,se):re}(this.strm),this.onEnd(n),this.ended=!0,n===qe;if(0!==o.avail_out){if(0<r&&0<o.next_out)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(0===o.avail_in)break}else this.onData(o.output)}return!0},Ze.prototype.onData=function(e){this.chunks.push(e)},Ze.prototype.onEnd=function(e){e===qe&&(this.result=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var o=new Uint8Array(t),i=0,s=0,a=e.length;i<a;i++){var c=e[i];o.set(c,s),s+=c.length}return o}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Xe={Deflate:Ze,deflate:G=Ke,deflateRaw:Ye,gzip:We,constants:K};e.Deflate=Ze,e.constants=K,e.default=Xe,e.deflate=G,e.deflateRaw=Ye,e.gzip=We,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";function r(e,t,n,r){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+n)}else this.interval=n;this.parentBucket=r,this.content=0,this.lastDrip=+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenBucket=void 0,r.prototype.removeTokens=function(e,t){var n=this;return this.bucketSize?e>this.bucketSize?(setTimeout(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),e>this.content?r():this.parentBucket?this.parentBucket.removeTokens(e,(function(o,i){return o?t(o,null):e>n.content?r():(n.content-=e,void t(null,Math.min(i,n.content)))})):(this.content-=e,setTimeout(t.bind(null,null,this.content),0),!0)):(setTimeout(t.bind(null,null,e,Number.POSITIVE_INFINITY),0),!0);function r(){var r=Math.ceil((e-n.content)*(n.interval/n.tokensPerInterval));return setTimeout((function(){n.removeTokens(e,t)}),r),!1}},r.prototype.tryRemoveTokens=function(e){if(this.bucketSize){if(e>this.bucketSize)return!1;if(this.drip(),e>this.content)return!1;if(this.parentBucket&&!this.parentBucket.tryRemoveTokens(e))return!1;this.content-=e}return!0},r.prototype.drip=function(){var e,t;this.tokensPerInterval?(t=+new Date,e=Math.max(t-this.lastDrip,0),this.lastDrip=t,t=e*(this.tokensPerInterval/this.interval),this.content=Math.min(this.content+t,this.bucketSize)):this.content=this.bucketSize},t.TokenBucket=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))i.label=c[1];else if(6===c[0]&&i.label<o[1])i.label=o[1],o=c;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(c)}}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStoreHandler=void 0,n(11)),a=n(5),c=n(4),u=i(n(12));function l(e,t,n,r,o,i){this.name=e,this.storeName=t,this.config=n,this.traceType=r,this.staticConfig=o,this.stateCenter=i,this.storeSize=0,this.storeTime=0,this.storeDelPer=c.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.storesKeys="",this.transStores=[],this.store=s.createZegoStore(e,n.env,t),this.commonStore=s.createZegoStore("data_common",n.env,"reporter")}Object.defineProperty(l.prototype,"KEY",{get:function(){return"z_t_"+this.config.appID},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"STORES_KEY",{get:function(){return"z_store_keys"},enumerable:!1,configurable:!0}),l.prototype.init=function(){return r(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),this.setCommonStoreState(),[4,this.transferStoreData()];case 1:return n.sent(),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 2:return(e=n.sent())?[3,4]:(t={storeSize:this.storeSize,lock:0,pros:1},[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,t)]);case 3:return n.sent(),[3,5];case 4:t="string"==typeof e?JSON.parse(e):e,this.storeSize=t.storeSize,n.label=5;case 5:return[3,7];case 6:return n.sent(),[3,7];case 7:return[2]}}))}))},l.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},l.prototype.setCommonStoreState=function(){var e=this,t=(this.getStorage(this.STORES_KEY)||"").split(";");this.transStores=t.filter((function(t){return t.includes(e.config.appID+"")})),t=t.filter((function(t){return!t.includes(e.config.appID+"")})),this.storesKeys=t.join(";")},l.prototype.resetCommonStore=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=0<this.storesKeys.length?";":"",this.saveStorage(this.STORES_KEY,this.storesKeys+e+this.name+this.interSymbol+this.storeName),[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return t.sent(),[2]}}))}))},l.prototype.transferStoreData=function(){return r(this,void 0,void 0,(function(){var e,t,n,i,c=this;return o(this,(function(u){switch(u.label){case 0:return[4,this.commonStore.keys()];case 1:e=u.sent(),t=function(t){var i,u,l,h,p,d,_,f;return o(this,(function(g){switch(g.label){case 0:return(i=e[t])===n.name+n.interSymbol+n.storeName?[3,9]:[4,n.commonStore.getItem(i)];case 1:return(u="string"==typeof(u=g.sent())?JSON.parse(u):u).lock||u.pros&&!n.transStores.includes(i)?[3,9]:(h=i.split(n.interSymbol),l=h[0],h=h[1],[4,(p=s.createZegoStore(l,n.config.env,h)).keys()]);case 2:return 0!=(d=g.sent()).length?[3,3]:[3,8];case 3:return u.lock=1,[4,n.commonStore.setItem(i,u)];case 4:g.sent(),_=function(e){var t,i,s,u,l;return o(this,(function(h){switch(h.label){case 0:return t=d[e],[4,p.getItem(t)];case 1:return i=h.sent(),-1!==t.indexOf("pending")?i&&JSON.parse(i).forEach((function(e){return r(c,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})):(l=a.analyzeKey(t),s=l.level,u=l.timestamp,l=l.seq,n.storeData({level:s,timestamp:u,seq:l,content:i})),setTimeout((function(){return r(c,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,p.removeItem(t)];case 1:return e.sent(),[2]}}))}))}),300),[2]}}))},f=0,g.label=5;case 5:return f<d.length?[5,_(f)]:[3,8];case 6:g.sent(),g.label=7;case 7:return f++,[3,5];case 8:n.drops.push({name:l,storeName:h}),g.label=9;case 9:return[2]}}))},n=this,i=0,u.label=2;case 2:return i<e.length?[5,t(i)]:[3,5];case 3:u.sent(),u.label=4;case 4:return i++,[3,2];case 5:return this.transportStorageData(),setTimeout((function(){return r(c,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:if(!(e<this.drops.length))return[3,7];n=this.drops[e],t=n.name,n=n.storeName,r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this.dropInstance(t,n)];case 3:return r.sent(),[4,this.commonStore.removeItem(t+this.interSymbol+n)];case 4:case 5:return r.sent(),[3,6];case 6:return e++,[3,1];case 7:return[2]}}))}))}),1e3),[2]}}))}))},l.prototype.dropInstance=function(e,t){return new Promise((function(n,r){u.default.dropInstance({name:e+":"+t}).then((function(){n()})).catch((function(e){r(e)}))}))},l.prototype.setDropCallBack=function(e){this.dropCallBack=e},l.prototype.storeData=function(e){var t=this;return new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r,i,s,c,u=this;return o(this,(function(o){switch(o.label){case 0:t=e.level,s=e.timestamp,r=e.seq,i=e.content,s=t+"_"+s+"_"+r,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.store.getItem(s)];case 2:return o.sent()?(n(),[2]):[3,4];case 3:return o.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(e),[2];if(c=a.calculateMemSize(s)+a.calculateMemSize(i),this.staticConfig.totalDBSize-c<=0)return this.dropDBData(t,s,i).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),n(),[2];o.label=5;case 5:return o.trys.push([5,8,,9]),[4,this.store.setItem(s,i)];case 6:return o.sent(),this.storeSize+=c,this.staticConfig.totalDBSize-=c,[4,this.refreshStoreInfo()];case 7:return o.sent(),n(),[3,9];case 8:return"QuotaExceededError"===o.sent().name&&this.dropDBData(t,s,i).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),[3,9];case 9:return[2]}}))}))}))},l.prototype.loadPendingData=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return t.sent().forEach((function(t){return r(e,void 0,void 0,(function(){var e,n=this;return o(this,(function(i){switch(i.label){case 0:return-1===t.indexOf("pending")?[3,3]:[4,this.store.getItem(t)];case 1:return(e=i.sent())?(JSON.parse(e).forEach((function(e){return r(n,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})),[4,this.store.removeItem(t)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))})),[2]}}))}))},l.prototype.storePendingData=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.store.setItem("pending"+(new Date).getTime(),JSON.stringify(e))];case 1:return t.sent(),[2]}}))}))},l.prototype.bufferDump=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return(e=this.bufferData.pop())?[4,this.storeData(e)]:[3,2];case 1:t.sent(),this.bufferDump(),t.label=2;case 2:return[2]}}))}))},l.prototype.dropDBData=function(e,t,n){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(i){return this.droping=!0,[2,new Promise((function(i,s){return r(e,void 0,void 0,(function(){var e,r,c,u,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(e=o.sent()).reverse(),r=Math.ceil(e.length*this.storeDelPer),c=0,o.label=2;case 2:return c<r?[4,this.store.getItem(e[c])]:[3,7];case 3:return null==(u=o.sent())?[3,6]:[4,this.store.removeItem(e[c])];case 4:return o.sent(),l=a.calculateMemSize(e[c])+a.calculateMemSize(u),this.staticConfig.totalDBSize+=l,this.storeSize-=l,[4,this.refreshStoreInfo()];case 5:o.sent(),this.dropCallBack(u),o.label=6;case 6:return c++,[3,2];case 7:return[4,this.store.setItem(t,n)];case 8:return o.sent(),this.storeSize+=a.calculateMemSize(t)+a.calculateMemSize(n),[4,this.refreshStoreInfo()];case 9:return o.sent(),i(),[3,11];case 10:return l=o.sent(),s(l),[3,11];case 11:return[2]}}))}))}))]}))}))},l.prototype.removeDataItem=function(e){var t=this;return new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r,s,c,u;return o(this,(function(o){switch(o.label){case 0:t=e.level,s=e.timestamp,c=e.seq,e.content,t=t+"_"+s+"_"+c,o.label=1;case 1:return o.trys.push([1,6,,7]),[4,this.store.getItem(t)];case 2:return(r=o.sent())?[4,this.store.removeItem(t)]:[3,5];case 3:return o.sent(),s=1==this.config.env?a.calculateMemSize(JSON.parse(r)):a.calculateMemSize(r),c=a.calculateMemSize(t)+s,this.storeSize-=c,this.staticConfig.totalDBSize+=c,this.traceType.DB_O_DONE+=c,[4,this.refreshStoreInfo()];case 4:o.sent(),n(),o.label=5;case 5:return[3,7];case 6:return u=o.sent(),i(u),[3,7];case 7:return[2]}}))}))}))},l.prototype.refreshStoreInfo=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 1:return e.sent()?[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},l.prototype.readStoreDataItem=function(){var e=this;return new Promise((function(t,n){return r(e,void 0,void 0,(function(){var e,r,i,s,c;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return e=o.sent(),[4,this.store.getItem(e[0])];case 2:return r=o.sent(),s=a.analyzeKey(e[0]),c=s.level,i=s.timestamp,s=s.seq,t({level:c,timestamp:i,seq:s,content:r}),[3,4];case 3:return c=o.sent(),n(c),[3,4];case 4:return[2]}}))}))}))},l.prototype.loadDBData=function(e,t,n,i){var s=this;return new Promise((function(c,u){return r(s,void 0,void 0,(function(){var r,s,l,h,p,d,_,f,g,m;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,this.store.keys()];case 1:r=o.sent(),s=[],d=p=h=l=0,o.label=2;case 2:return d<r.length?i(r[d])?[3,4]:[4,this.store.getItem(r[d])]:[3,5];case 3:if(null==(_=o.sent()))return[3,4];if(f=a.analyzeKey(r[d]),g=f.level,m=f.timestamp,f=f.seq,s.push({level:g,timestamp:m,seq:f,content:_,key:r[d]}),g=a.calculateMemSize(_),h+=g,e<=(l+=g)&&(l=0,p++),t<=p&&n<=h)return[3,5];o.label=4;case 4:return d++,[3,2];case 5:return c({datas:s,len:h}),[3,7];case 6:return m=o.sent(),u(m),[3,7];case 7:return[2]}}))}))}))},l.prototype.sortKeys=function(e,t){void 0===t&&(t=!1),e.sort((function(e,t){return e=e.split("_"),+(t=t.split("_"))[0]-+e[0]||+t[1]-+e[1]||+t[2]-+e[2]})),t&&e.reverse()},l.prototype.saveStorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){this.stateCenter._log.debug("storage set err")}},l.prototype.getStorage=function(e){try{return localStorage.getItem(e)}catch(e){this.stateCenter._log.debug("storage get err")}},l.prototype.saveDataToStorage=function(e){try{var t=e.level,n=e.timestamp,r=e.seq,o=e.content,i=t+"_"+n+"_"+r;this.saveStorage(this.KEY+"_"+i,o)}catch(e){this.stateCenter._log.debug("saveDataToStorage "+JSON.stringify(e))}},l.prototype.transportStorageData=function(){for(var e=[],t=0;t<localStorage.length;t++){var n,r,o,i,s=localStorage.key(t);this.stateCenter._log.debug("transportStorageData "+s),null!=s&&s.startsWith(this.KEY)&&(o=s.replace(this.KEY+"_",""),n=(o=a.analyzeKey(o)).level,r=o.timestamp,o=o.seq,"string"==typeof(i=this.getStorage(s))&&this.storeData({level:n,timestamp:r,seq:o,content:i}),e.push(s))}setTimeout((function(){for(var t=0;t<e.length;t++)localStorage.removeItem(e[t])}),100)},t.ZegoStoreHandler=l},function(e,t,n){"use strict";var r=n(32),o=n(33).Buffer;function i(e){return function(t){if(o.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*r.STRING;case"boolean":return r.BOOLEAN;case"number":return r.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(t)?Symbol.keyFor(t).length*r.STRING:(t.toString().length-8)*r.STRING;case"object":if(Array.isArray(t))return t.map(i(e)).reduce((function(e,t){return e+t}),0);var n=e,s=t;if(null==s)return 0;for(var a=0,c=function(e){var t,n=[];for(t in e)n.push(t);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),Array.prototype.push.apply(n,e)),n}(s),u=0;u<c.length;u++){var l=c[u];if("object"==typeof s[l]&&null!==s[l]){if(n.has(s[l]))continue;n.add(s[l])}a+=i(n)(l);try{a+=i(n)(s[l])}catch(n){n instanceof RangeError&&(a=0)}}return a;default:return 0}}}e.exports=function(e){return i(new WeakSet)(e)}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,n){"use strict";(function(e){var r=n(35),o=n(36),i=n(37);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(e=null===e?new c(t):e).length=t,e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"!=typeof e)return u(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=e,s=t,u=n;if(s.byteLength,u<0||s.byteLength<u)throw new RangeError("'offset' is out of bounds");if(s.byteLength<u+(r||0))throw new RangeError("'length' is out of bounds");return s=void 0===u&&void 0===r?new Uint8Array(s):void 0===r?new Uint8Array(s,u):new Uint8Array(s,u,r),c.TYPED_ARRAY_SUPPORT?(o=s).__proto__=c.prototype:o=p(o,s),o}if("string"!=typeof t){if(u=e,r=t,c.isBuffer(r))return 0!==(u=a(u,s=0|d(r.length))).length&&r.copy(u,0,0,s),u;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(s=r.length)!=s?a(u,0):p(u,r);if("Buffer"===r.type&&i(r.data))return p(u,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(o=e,r=t,c.isEncoding(e="string"==typeof(e=n)&&""!==e?e:"utf8"))return(r=(o=a(o,t=0|_(r,e))).write(r,e))!==t?o.slice(0,r):o;throw new TypeError('"encoding" must be a valid string encoding')}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function _(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var u=-1,l=n;l<s;l++)if(c(e,l)===c(t,-1===u?0:l-u)){if(l-(u=-1===u?l:u)+1===a)return u*i}else-1!==u&&(l-=l-u),u=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var h=!0,p=0;p<a;p++)if(c(e,l+p)!==c(t,p)){h=!1;break}if(h)return l}return-1}function y(e,t,n,r){return M(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,c,u=e[o],l=null,h=239<u?4:223<u?3:191<u?2:1;if(o+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&127<(c=(31&u)<<6|63&i)&&(l=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,h=1):65535<l&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=h}var p=r,d=p.length;if(d<=b)return String.fromCharCode.apply(String,p);for(var _="",f=0;f<d;)_+=String.fromCharCode.apply(String,p.slice(f,f+=b));return _}t.Buffer=c,t.SlowBuffer=function(e){return c.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0}),c.alloc=function(e,t,n){return l(e),e<=0||void 0===t?a(null,e):"string"==typeof n?a(null,e).fill(t,n):a(null,e).fill(t)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=c.allocUnsafe(t),r=0,o=0;o<e.length;++o){var s=e[o];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?v(this,0,e):function(e,t,n){var o,i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=t,c=n,u=this.length;(!c||c<0||u<c)&&(c=u);for(var l="",h=a=!a||a<0?0:a;h<c;++h)l+=(i=this[h])<16?"0"+i.toString(16):i.toString(16);return l;case"utf8":case"utf-8":return v(this,t,n);case"ascii":u=t;for(var p=n,d="",_=(p=Math.min(this.length,p),u);_<p;++_)d+=String.fromCharCode(127&this[_]);return d;case"latin1":case"binary":a=t;for(var f=n,g="",m=(f=Math.min(this.length,f),a);m<f;++m)g+=String.fromCharCode(this[m]);return g;case"base64":return y=this,o=n,0===(b=t)&&o===y.length?r.fromByteArray(y):r.fromByteArray(y.slice(b,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=t,b=n,E=this.slice(y,b),O="",S=0;S<E.length;S+=2)O+=String.fromCharCode(E[S]+256*E[S+1]);return O;default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(c.isBuffer(e))return this===e||0===c.compare(this,e);throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n)&&(e+=" ... "),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n),h=0;h<a;++h)if(u[h]!==l[h]){i=u[h],s=l[h];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,c,u=!1;;)switch(r){case"hex":var l,h=e,p=n,d=(l=Number(t)||0,this.length-l);if((!p||d<(p=Number(p)))&&(p=d),(d=h.length)%2!=0)throw new TypeError("Invalid hex string");d/2<p&&(p=d/2);for(var _=0;_<p;++_){var f=parseInt(h.substr(2*_,2),16);if(isNaN(f))return _;this[l+_]=f}return _;case"utf8":case"utf-8":return d=t,s=n,M(N(e,(i=this).length-d),i,d,s);case"ascii":case"latin1":case"binary":return y(this,e,t,n);case"base64":return i=this,s=t,a=n,M(I(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,c=n,M(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o.push(n%256),o.push(r);return o}(e,this.length-a),this,a,c);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function S(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function T(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function k(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return i||k(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function C(e,t,n,r,i){return i||k(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=c.prototype;else for(var r=t-e,o=new c(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){return t||E(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},c.prototype.readInt16BE=function(e,t){return t||E(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},c.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):T(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):T(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||O(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||O(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):T(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):T(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var o,i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length&&(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=c.isBuffer(e)?e:N(new c(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var w=/[^+\/0-9A-Za-z-_]/g;function N(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function I(e){return r.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(w,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(34))},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){return 3*((e=u(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){for(var t,n=(r=u(e))[0],r=r[1],s=new i(3*(n+r)/4-r),a=0,c=0<r?n-4:n,l=0;l<c;l+=4)t=o[e.charCodeAt(l)]<<18|o[e.charCodeAt(l+1)]<<12|o[e.charCodeAt(l+2)]<<6|o[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===r&&(t=o[e.charCodeAt(l)]<<2|o[e.charCodeAt(l+1)]>>4,s[a++]=255&t),1===r&&(t=o[e.charCodeAt(l)]<<10|o[e.charCodeAt(l+1)]<<4|o[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(function(e,t){for(var n,o=[],i=s;i<t;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return o.join("")}(e,a<s+16383?a:s+16383));return 1==o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?o-1:0,p=n?-1:1;for(o=e[t+h],h+=p,i=o&(1<<-l)-1,o>>=-l,l+=a;0<l;i=256*i+e[t+h],h+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+h],h+=p,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,r),i-=u}return(o?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c=8*i-o-1,u=(1<<c)-1,l=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1;for(i=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?h/r:h*Math.pow(2,1-l))*r&&(s++,r/=2),u<=s+l?(a=0,s=u):1<=s+l?(a=(t*r-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;0<c;e[n+p]=255&s,p+=d,s/=256,c-=8);e[n+p-d]|=128*i}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.PendingQueue=void 0,n(0)),s=n(5);function a(e,t,n,r){var o=this;this.levels=e,this.product=t,this.staticConfig=n,this.stateCenter=r,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,e.forEach((function(e){o.cacheMap.set(e,new i.Queue)}))}a.prototype.enqueue=function(e,t){(t=this.cacheMap.get(t))&&!t.all().find((function(t){return t.content==e.content}))&&(t.enqueue(e),t=s.calculateMemSize(e.content),this.pendingDataSize+=t,this.size++,this.staticConfig.totalAvailCache-=t,this.enCallback)&&this.enCallback(this.byteLength,this.size,this.pendingDataSize)},a.prototype.dequeue=function(e){return e=null==(e=this.cacheMap.get(e))?void 0:e.dequeue(),this.size--,this.deCallback&&this.deCallback(),e},a.prototype.findInQueue=function(e){var t=null==(t=this.cacheMap.get(e.level))?void 0:t.all();return null==t?void 0:t.find((function(t){return t.key===e.key}))},a.prototype.readReportData=function(e){var t=o(this.cacheMap.entries());t=this.readData(t,e,!0);return this.reset(),{totalLen:t.totalLen,reportDataArr:t.resArr}},a.prototype.readStoreData=function(e){e=Math.ceil(this.pendingDataSize*e);var t=o(this.cacheMap.entries()).reverse();t=this.readData(t,e,!1);return this.refresh(t.totalLen),{totalLen:t.totalLen,storeArr:t.resArr}},a.prototype.readData=function(e,t,n){var o=[],i=0;e:for(var a=0;a<e.length;a++)for(var c=r(e[a],2),u=c[0],l=c[1];l.size();){var h=this.dequeue(u);if(o.push(h),t<(i+=s.calculateMemSize(h.content)))break e}return{totalLen:i,resArr:o}},a.prototype.decodeReportData=function(e){var t=this;e.forEach((function(e){t.enqueue(e,e.level)}))},a.prototype.setListener=function(e){this.enCallback=e.enCallback,this.deCallback=e.deCallback},a.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},a.prototype.refresh=function(e){this.pendingDataSize-=e,this.staticConfig.totalAvailCache+=e},a.prototype.reset=function(){this.byteLength=0},t.PendingQueue=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))i.label=c[1];else if(6===c[0]&&i.label<o[1])i.label=o[1],o=c;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(c)}}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=void 0,n(40));function s(e,t,n){return(e=i.decrypt(e,t))&&i.hashMd5(e)===n?e:""}t.loadJS=function(e,t,n,i,a,c,u){var l=this;return new Promise((function(h,p){return r(l,void 0,void 0,(function(){var l,d,_,f,g;return o(this,(function(m){switch(m.label){case 0:if(l="dy",e)return[3,7];m.label=1;case 1:return m.trys.push([1,5,,6]),[4,t.getItem("code")];case 2:return d=m.sent(),[4,t.getItem("key")];case 3:return _=m.sent(),[4,t.getItem("hash")];case 4:f=m.sent();var y=s(d,_,f)||c,v=l,b=u,E=document.getElementsByTagName("HEAD").item(0),O=document.createElement("script");O.language="javascript",O.type="text/javascript",O.id=v,O.param=b;try{O.appendChild(document.createTextNode(y))}catch(v){O.text=y}return E.appendChild(O),h(),[3,6];case 5:return m.sent(),p(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{g=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){g=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(g=new XMLHttpRequest);return g.open("GET",n,!0),g.send(null),g.onreadystatechange=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:if(4!=g.readyState)return[3,10];if(!(200<=g.status&&g.status<300||0==g.status||304==g.status))return[3,8];e.label=1;case 1:return e.trys.push([1,6,,7]),s(g.responseText,i,a)?[4,t.setItem("code",g.responseText)]:[3,5];case 2:return e.sent(),[4,t.setItem("key",i)];case 3:return e.sent(),[4,t.setItem("hash",a)];case 4:e.sent(),e.label=5;case 5:return h(),[3,7];case 6:return e.sent(),p(),[3,7];case 7:return[2];case 8:return p(),[2];case 9:return[3,11];case 10:case 11:return[2]}}))}))},[2]}}))}))}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.hashMd5=t.decrypt=void 0,r(n(41))),i=r(n(42)),s=r(n(43));t.decrypt=function(e,t){var n="";try{n=i.default.decrypt(e,t).toString(s.default)}catch(e){}return n},t.hashMd5=function(e){return o.default(e).toString()}},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t,n){"use strict";function r(){this.logLevel=t.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=t.ENUM_LOG_LEVEL=void 0,t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},r.prototype.setLogLevel=function(e){return void 0!==(e=t.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},r.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.DEBUG&&console.debug(r)},r.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.log(r)},r.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.info(r)},r.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.WARN&&console.warn(r)},r.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.ERROR&&console.error(r)},t.ZegoLog=r},function(e,t,n){"use strict";function r(e){this.logger=e,this._log=e}Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0,r.prototype.isLogin=function(){return!0},t.StateCenter=r},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=void 0,n(3));function s(){this.init()}s.prototype.init=function(){window.dyObj={}},s.prototype.runExecution=function(e,t,n){e=new(Function.bind.apply(Function,o([void 0],e,[n])));try{e.apply(void 0,o(t))}catch(e){i.log.error(e)}},t.DynamicCode=s}],u={},r.m=c,r.c=u,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13))},function(e,t,n){e.exports=n(2).enc.Hex},function(e,n){e.exports=t},function(e,t,n){var r,o,i,s,a;e.exports=(e=n(2),n(19),n(20),r=(i=(n=e).lib).Base,o=i.WordArray,s=(i=n.algo).MD5,a=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),s=o.create(),a=s.words,c=r.keySize,u=r.iterations;a.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();s.concat(n)}return s.sigBytes=4*c,s}}),n.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},e.EvpKDF)},function(e,t,n){function r(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var o,i,s;e.exports=(o=n(11),s={},r.m=i=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"},AUTH_FAIL:{code:1005,msg:"auth failed"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome,i=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?"IE":n?"FIREFOX":r?"OPERA":o?"CHROME":i?"SAFARI":e?"WEIXIN":"UNKOWN"};var r=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(r[e.getMonth()+1]||e.getMonth()+1)+"/",(r[e.getDate()]||e.getDate())+" ",(r[e.getHours()]||e.getHours())+":",(r[e.getMinutes()]||e.getMinutes())+":",r[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=n},t.generateUUID=function(e){var t,n;return 0===(e=void 0===e?0:e)?n=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),n||(t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(36)})),0===e?localStorage.setItem("z_deviceID",n):wx.setStorageSync("z_deviceID",n)),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var r=n(4);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return r.ZegoSetting}})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0,n(5)),a=n(6),c=n(10),u=n(0),l=n(12),h=n(1),p=n(2);function d(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.checkFailCount=0,this.checkFailed=!1,this.log=new s.ZegoLog}Object.defineProperty(d.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),d.prototype.init=function(e){var t=this;return e.pollingFreq&&!p.checkValidNumber(e.pollingFreq)?(this.log.error(u.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},l.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new c.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(u.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout((function(){t.pollingSetting(1e3*t.pollingInterval)}),1e3*e),this.settingCacheHandler=new a.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.refreshAuthCheck(),this.inited=!0)},d.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},d.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},d.prototype.getEnvVariable=function(e){return this.envVariable[e]},d.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(n){"string"!=typeof e[n]&&"number"!=typeof e[n]&&t.log.error("zs.sev env "+n+" type error"),t.proEnvVariable[n]=String(e[n])}))},d.prototype.getEnvVariables=function(){return this.envVariable},d.prototype.enablePolling=function(e,t){var n=this;t?t.forEach((function(t){var r=n.fileList.find((function(e){return e.fileName===t}));r&&(r.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},d.prototype.setToken=function(e){this.token!==e&&this.refreshAuthCheck(),this.token=e},d.prototype.setUserID=function(e){this.userID!==e&&this.refreshAuthCheck(),this.userID=e},d.prototype.getSettingCache=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(h.errorList.NOT_INIT)];case 1:return n=this._getFileName(e),[4,this.settingCacheHandler.getCacheSetting(n)];case 2:return(n=o.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:n.setting,versions:n.versions}),r={setting:n.setting,versions:n.versions}),[2,Promise.resolve(r)]}}))}))},d.prototype.fetchSetting=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!0),this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,r(r({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=n,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,n)):(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,n))):Promise.reject(h.errorList.NOT_INIT)},d.prototype.fetchMultiSetting=function(e,t,n){var s=this;return void 0===t&&(t={}),void 0===n&&(n=!0),this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call"),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,r(r({},this.envVariable),t))):new Promise((function(t,r){var a={},c=[];if(e.forEach((function(e){return o(s,void 0,void 0,(function(){var t;return i(this,(function(n){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):c.push(e),[2]}))}))})),!(0<c.length))return t(a);s._getCloudSetting(c,s.envVariable).then((function(e){return s.handleFetchFiles(e,n),Object.assign(a,e),t(a)})).catch((function(e){c.forEach((function(e){return o(s,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=r.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):r(e)}))}))):(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" not init"),Promise.reject(h.errorList.NOT_INIT))},d.prototype.setOptions=function(e){e&&"boolean"==typeof e.unify&&(this.options.unify=e.unify,this.settingFetchHandler.setOptions(this.options))},d.prototype.setLog=function(e){this.log=e},d.prototype._getCloudSetting=function(e,t){var n=this;return new Promise((function(r,s){return o(n,void 0,void 0,(function(){var n,o,a,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.checkFailed?(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" check fail"),s(h.errorList.AUTH_FAIL),[2]):(a=e instanceof Array,[4,this.settingFetchHandler.fetchSetting(a?e:[e],t,this.token,this.userID,!1)]);case 1:return c=i.sent(),n=c.data,c=c.polling_interval,this.checkFailCount=0,this.log.info(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" suc"),"number"==typeof c&&5<=c&&this.pollingInterval!==60*c&&(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*c,this.uninit(),this.activePolling()),a?(o={},e.forEach((function(e){var t;0==(null==(t=n[e])?void 0:t.code)&&void 0!==(null==(t=n[e])?void 0:t.data)&&(o[e]={setting:null==(t=n[e])?void 0:t.data,versions:null==(e=n[e])?void 0:e.versions})})),0<Object.keys(o).length?r(o):s(h.errorList.MULTI_FILE_NOT_EXIST)):0===(null==(a=n[e])?void 0:a.code)&&null!=(c=n[e])&&c.data?r({setting:null==(c=n[e])?void 0:c.data,versions:null==(c=n[e])?void 0:c.versions}):s({code:null==(l=n[e])?void 0:l.code,msg:null==(l=n[e])?void 0:l.message}),[3,3];case 2:return l=i.sent(),this.log.error(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(l)),21002===(null==l?void 0:l.code)&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),s(l),[3,3];case 3:return[2]}}))}))}))},d.prototype.handleFetchFiles=function(e,t){var n=this;Object.keys(e).forEach((function(r){var o=n.fileList.find((function(e){return e.fileName==r}));o?(o.fetchedTime=(new Date).getTime(),o.setting=e[r].setting,o.versions=e[r].versions,o.needPolling=t):n.fileList.find((function(e){return e.fileName===r}))||n.fileList.push({fileName:r,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[r].setting,versions:e[r].versions}),o=n._getFileName(r),n.settingCacheHandler.storeSetting(o,e[r])}))},d.prototype._fetchSetting=function(e,t,n){var r=this;return new Promise((function(s,a){r.log.info(u.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),r._getCloudSetting(e,r.envVariable).then((function(o){t?(t.fetchedTime=(new Date).getTime(),t.setting=o.setting,t.versions=o.versions,t.needPolling=n):r.fileList.find((function(t){return t.fileName===e}))||r.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:o.setting,versions:o.versions});var i=r._getFileName(e);r.settingCacheHandler.storeSetting(i,o),s(o),r.log.info(u.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(c){return o(r,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:{},versions:{}}),r=this._getFileName(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(r)];case 2:return r=o.sent(),s(r),[3,4];case 3:return o.sent(),a(c),[3,4];case 4:return this.log.info(u.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},d.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=p.getBrowser(),this.publicEnvVariable.deviceid=p.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=p.generateUUID(this.options.env))},d.prototype.pollingSetting=function(e){return o(this,void 0,void 0,(function(){var t,n,r,s,a=this;return i(this,(function(c){switch(c.label){case 0:return this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e),t=[],this.fileList.forEach((function(e){e.fileName,e.needPolling&&t.push(e.fileName)})),n=e,this.checkFailed?(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" has checked fail"),[3,7]):[3,1];case 1:if(!(0<t.length))return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.settingFetchHandler.fetchSetting(t,this.envVariable,this.token,this.userID)];case 3:return s=c.sent(),r=s.data,s=s.polling_interval,this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch suc"),this.checkFailCount=0,"number"==typeof s&&5<=s&&this.pollingInterval!==60*s&&(this.log.warn(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*s,n=1e3*this.pollingInterval),this.fileList.forEach((function(e){return o(a,void 0,void 0,(function(){var t,n,o,s;return i(this,(function(i){switch(i.label){case 0:return e.fetchedTime=(new Date).getTime(),t=this._getFileName(e.fileName),r[e.fileName]&&0===r[e.fileName].code&&r[e.fileName].data?(n=JSON.stringify(r[e.fileName].data),o=JSON.stringify(e.setting),s={setting:r[e.fileName].data,versions:null==(s=r[e.fileName])?void 0:s.versions,code:null==(s=r[e.fileName])?void 0:s.code,message:null==(s=r[e.fileName])?void 0:s.message},o!==n&&(this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=s.setting,e.versions=s.versions,this.options.pollingNotify(e.fileName,s)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:o=i.sent(),n=JSON.stringify(o),o=JSON.stringify(s),n!==o&&this.settingCacheHandler.storeSetting(t,s),i.label=2;case 2:return[2]}}))}))})),[3,5];case 4:return s=c.sent(),this.log.error(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(s)),21002===(null==s?void 0:s.code)&&(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),[3,5];case 5:return[3,7];case 6:this.log.info(u.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),c.label=7;case 7:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){a.pollingSetting(n)}),n),[2]}}))}))},d.prototype._getFileName=function(e){return e},d.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.pollingInterval)},d.prototype.refreshAuthCheck=function(){this.checkFailCount=0,this.checkFailed=!1},t.ZegoSetting=n=d},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0,r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},t.ZegoLog=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0,n(0)),s=n(7);function a(e,t,n){void 0===n&&(n=0),this.storeName=e,this.log=t,this.store=s.createZegoStore(e,n)}a.prototype.getCacheSetting=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.log.info(i.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},a.prototype.storeSetting=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.log.info(i.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return n.sent(),[2]}}))}))},t.SettingCacheHandler=n=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var r=n(8),o=n(9),i=(s.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.getStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},s.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,o){try{wx.setStorageSync(n.keyPrefix+e,t),r()}catch(r){o(r)}}))},s.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.removeStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},s.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},s.prototype.keys=function(){var e=this;return new Promise((function(t,n){try{var r=wx.getStorageInfoSync().keys,o=[];r.forEach((function(t){0==t.indexOf(e.keyPrefix)&&o.push(t.replace(e.keyPrefix,""))})),o.sort(),t(o)}catch(t){n(t)}}))},s);function s(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=i,t.createZegoStore=function(e,t){return t===o.ZEGO_ENV.BROWSER?r.createInstance({name:e}):new i(e)}},function(e,t){e.exports=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.6",(r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[r.BROWSER=0]="BROWSER",r[r.WEIXINMINI=1]="WEIXINMINI",(r=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[r.IE=0]="IE",r[r.FIREFOX=1]="FIREFOX",r[r.CHROME=2]="CHROME",r[r.SAFARI=3]="SAFARI",r[r.OPERA=4]="OPERA",r[r.WEIXIN=5]="WEIXIN",r[r.WEIXINMINI=6]="WEIXINMINI",r[r.UNKOWN=7]="UNKOWN",(r=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[r.DISABLE=0]="DISABLE",r[r.WEBSOCKET=1]="WEBSOCKET",r[r.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var o,i,s=n(0),a=n(1),c=n(11),u=n(2);function l(e,t){this.options=e,this.log=t,this.seq=0,this.userID=""}n=o={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},n=i={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},l.prototype.setOptions=function(e){this.options=e},l.prototype.setDataReport=function(e){this.reportFunc=e},l.prototype.setUserID=function(e){this.userID=e},l.prototype.fetchSetting=function(e,t,n,o,i){var a=this;return void 0===i&&(i=!0),new Promise((function(l,h){var p,d={product:a.options.product,files:e,param:r(r({},t),{deviceid:void 0}),appid:a.options.appID,token:n,id_name:o,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||u.generateUUID(a.options.env),compress:!1,mode:a.options.online?"online":"test"},_=d.param,f={appid:d.appid,token:d.token,id_name:d.id_name,deviceid:d.deviceid},g=a.seq++;a.reportFunc&&a.reportFunc(g,"request_start",{polling:i}),null!=(p=a.options)&&p.unify&&a.options.connection?a.sendCloudRequest(o,d,"/cloud-setting/get",(function(e){var t,n=e.code,r=(e.msg,e.data),o=e.polling_interval;e=e.reportData,a.log.info(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+n),r&&(t=[],Object.keys(r).forEach((function(e){var n;t.push({name:e,code:r[e].code,message:null==(n=r[e])?void 0:n.message,versions:JSON.stringify(null==(n=r[e])?void 0:n.versions),content:JSON.stringify(null==(e=r[e])?void 0:e.data)})}))),a.reportFunc&&a.reportFunc(g,"request_end",{code:n,reportData:e,params:f,requestKV:_,files:t,polling:i}),l({data:r,polling_interval:o})}),(function(e){var t=e.code,n=e.msg;e.data,e=e.reportData,a.log.warn(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+t),a.reportFunc&&a.reportFunc(g,"request_end",{code:t,params:f,requestKV:_,reportData:e,polling:i}),h({code:t,msg:n})})):c.fetch(a.options.urls,d,a.options.env||0).then((function(e){var t,n=e.code,r=(e.msg,e.data),o=e.polling_interval;e=e.reportData,a.log.info(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+n),r&&(t=[],Object.keys(r).forEach((function(e){var n;t.push({name:e,code:r[e].code,message:null==(n=r[e])?void 0:n.message,versions:JSON.stringify(null==(n=r[e])?void 0:n.versions),content:JSON.stringify(null==(e=r[e])?void 0:e.data)})}))),a.reportFunc&&a.reportFunc(g,"request_end",{code:n,reportData:e,params:f,requestKV:_,files:t,polling:i}),l({data:r,polling_interval:o})})).catch((function(e){var t=e.code,n=e.msg;e.data,e=e.reportData,a.log.warn(s.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),a.reportFunc&&a.reportFunc(g,"request_end",{code:t,params:f,requestKV:_,reportData:e,polling:i}),h({code:t,msg:n})}))}))},l.prototype.sendCloudRequest=function(e,t,n,s,c,u,l){var h,p=this,d=(void 0===u&&(u=3),void 0===l&&(l=[]),(new Date).getTime());null!=(h=this.options.connection)&&h.startHttpRequest({service:o.SERVICE_ClOUD_SETTING,body:t,ack:!1,idName:e,method_no:i.METHOD_POST,location:n},(function(o){var i,h,_,f,g;200===(null==o?void 0:o.status_code)?(i=(f=JSON.parse(o.body)).code,g=f.message,h=f.data,_=f.polling_interval,f=(new Date).getTime()-d,l.push({timestamp:d,url:n,error:i,duration:f}),0===i?s({code:i,msg:g,data:h,polling_interval:_,reportData:l}):c({code:i,msg:g,reportData:l})):(g=(new Date).getTime()-d,l.push({timestamp:d,url:n,error:null==o?void 0:o.status_code,duration:g}),0<u?(u--,p.sendCloudRequest(e,t,n,s,c,u,l)):c(r(r({},a.errorList.FILE_REQUEST_FAIL),{reportData:l})))}),(function(o){var i=(new Date).getTime()-d;l.push({timestamp:d,url:n,error:o.code,duration:i}),0<u?(u--,p.sendCloudRequest(e,t,n,s,c,u,l)):c(r(r({},a.errorList.FILE_REQUEST_FAIL),{reportData:l}))}),null,{timeout:4e3})},t.SettingFetchHandler=n=l},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0,n(1));t.fetch=function e(t,n,i,s,a,c){return void 0===s&&(s=5),void 0===a&&(a=0),void 0===c&&(c=[]),new Promise((function(u,l){a=a||(new Date).getTime();var h,p,d,_=(new Date).getTime();0===i?(h=new XMLHttpRequest,p=t[(s+1)%2]||t[0],h.open("post",p),1==n.compress&&(h.responseType="arraybuffer"),h.ontimeout=function(){},h.onreadystatechange=function(){var d,f,g,m,y;4==h.readyState&&(200<=h.status&&h.status<300||304==h.status?(f=void 0,1!=n.compress&&(f=h.responseText),y=(new Date).getTime()-_,d=(g=JSON.parse(f)).code,m=g.message,f=g.data,g=g.polling_interval,c.push({timestamp:_,url:p,error:d,duration:y}),0===d?u({code:d,msg:m,data:f,polling_interval:g,reportData:c}):l({code:d,msg:m,reportData:c})):(m=(new Date).getTime()-_,c.push({timestamp:_,url:p,error:h.status,duration:m}),y=(new Date).getTime()-a,0<s&&y<8e3?e(t,n,i,--s,a,c).then((function(e){u(e)})).catch((function(e){l(e)})):l(r(r({},o.errorList.FILE_REQUEST_FAIL),{reportData:c}))))},h.timeout=8e3,h.send(JSON.stringify(n))):(d=t[(s+1)%2]||t[0],wx.request({url:d,data:n,method:"POST",success:function(h){var p=(m=h.data).code,f=m.message,g=m.data,m=m.polling_interval;void 0!==p?0===p?u({code:p,msg:f,data:g,polling_interval:m,reportData:c}):l({code:p,msg:f,reportData:c}):(f=(new Date).getTime()-_,c.push({timestamp:_,url:d,error:o.errorList.FILE_REQUEST_FAIL.code,msg:h.data,duration:f}),0<s?e(t,n,i,--s,a,c).then((function(e){u(e)})).catch((function(e){l(e)})):l(r(r({},o.errorList.FILE_REQUEST_FAIL),{reportData:c})))},fail:function(h){var p=(new Date).getTime()-_;c.push({timestamp:_,url:d,error:o.errorList.FILE_REQUEST_FAIL.code,msg:h.errMsg,duration:p}),0<s?e(t,n,i,--s,a,c).then((function(e){u(e)})).catch((function(e){l(e)})):l(r(r({},o.errorList.FILE_REQUEST_FAIL),{reportData:c}))}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0}}],r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3))},function(e,t,n){function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var o,i,s,a;e.exports=(o=n(7),i=n(1),s=[function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.typeMap=t.BrokenType=t.ConnectedType=t.DisconnectedType=t.Method=t.ConnectionClosedAction=t.NetWorkState=t.externalErrorList=t.Stick=t.PcConnectState=t.ENUM_CONNECT_STATE=t.DestroyType=t.StreamType=t.ModeMap=t.Mode=t.ZegoconnRunEnv=t.BusinessService=t.AccessHub_Error_Code=t.AccessHubMessageType=t.ENUM_NETWORK_STATE=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.23.1",(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.AccessHubMessageType||(t.AccessHubMessageType={}))[o.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",o[o.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",o[o.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",o[o.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",o[o.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",o[o.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",o[o.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",o[o.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",o[o.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",o[o.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",o[o.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",o[o.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",o[o.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",o[o.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",o[o.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",o[o.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",o[o.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",o[o.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",o[o.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",(r=o=t.AccessHub_Error_Code||(t.AccessHub_Error_Code={}))[r.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",r[r.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",r[r.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",r[r.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",r[r.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",r[r.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",r[r.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",r[r.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",r[r.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",r[r.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",r[r.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",r[r.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",r[r.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",r[r.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",r[r.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(r=t.BusinessService||(t.BusinessService={}))[r.SERVICE_UNSET=0]="SERVICE_UNSET",r[r.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",r[r.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",r[r.SERVICE_MIX=3]="SERVICE_MIX",r[r.SERVICE_ZEUS=4]="SERVICE_ZEUS",r[r.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",r[r.SERVICE_L3=6]="SERVICE_L3",r[r.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",r[r.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",r[r.SERVICE_ZIM=9]="SERVICE_ZIM",r[r.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",r[r.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",r[r.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",r[r.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",r[r.SERVICE_QUALITY=14]="SERVICE_QUALITY",r[r.SERVICE_SECURITY=15]="SERVICE_SECURITY",r[r.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",r[r.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",r[r.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",r[r.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",r[r.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",r[r.SERVICE_CDN=21]="SERVICE_CDN",r[r.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",r[r.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",r[r.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",r[r.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",r[r.SERVICE_ECHO=26]="SERVICE_ECHO",r[r.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",r[r.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(r=t.ZegoconnRunEnv||(t.ZegoconnRunEnv={}))[r.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",r[r.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",r[r.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(r=t.Mode||(t.Mode={}))[r.Mode_UNSET=0]="Mode_UNSET",r[r.MODE_ONLINE=1]="MODE_ONLINE",r[r.MODE_TEST=2]="MODE_TEST",r[r.MODE_ALPHA=3]="MODE_ALPHA",t.ModeMap={1:"online",2:"test",3:"alpha"},(r=t.StreamType||(t.StreamType={}))[r.HTTP=0]="HTTP",r[r.PC=1]="PC",r[r.OTHER=2]="OTHER",(r=t.DestroyType||(t.DestroyType={}))[r.NONE=0]="NONE",r[r.BROKEN=1]="BROKEN",r[r.DISCONNECT=2]="DISCONNECT",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},(r=t.PcConnectState||(t.PcConnectState={}))[r.CONNECTED=0]="CONNECTED",r[r.DISCONNECT=1]="DISCONNECT",r[r.BROKEN=2]="BROKEN",t.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},t.externalErrorList=[o.ACCESSHUB_INVALID_APPID,o.ACCESSHUB_INVALID_SIGNATURE],(r=t.NetWorkState||(t.NetWorkState={}))[r.offline=0]="offline",r[r.online=1]="online",(o=t.ConnectionClosedAction||(t.ConnectionClosedAction={}))[o.ACTION_RESERVED=0]="ACTION_RESERVED",o[o.ACTION_DISPATCH=1]="ACTION_DISPATCH",o[o.ACTION_RETRY=2]="ACTION_RETRY",o[o.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",o[o.ACTION_ABORT=4]="ACTION_ABORT",o[o.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(r=t.Method||(t.Method={}))[r.METHOD_UNSET=0]="METHOD_UNSET",r[r.METHOD_GET=1]="METHOD_GET",r[r.METHOD_POST=2]="METHOD_POST",(o=t.DisconnectedType||(t.DisconnectedType={}))[o.CLOSE=0]="CLOSE",o[o.TEMP=1]="TEMP",o[o.TIMEOUT=2]="TIMEOUT",(r=t.ConnectedType||(t.ConnectedType={}))[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",(o=t.BrokenType||(t.BrokenType={}))[o.EMPTY=0]="EMPTY",o[o.CLOSE=1]="CLOSE",t.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CONFIG_KEY=t.NET_ACCESS_SERVERS=t.NET_ACCESS_CONFIG=void 0,n=n(0),t.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:n.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},t.NET_ACCESS_SERVERS="z_net_access_servers",t.APP_CONFIG_KEY="z_appconfig"},function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},NET_CONNECT_TIMEOUT:{code:1100006,msg:"net connect timeout"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidNum=t.decodeString=t.encodeString=void 0,t.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},t.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},t.uuidNum=function(e,t){var n,r,o="0123456789".split(""),i=[];if(t=o.length,e)for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(r=0|16*Math.random(),i[n]=o[19==n?3&r|8:r]);return i.join("")}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequest=void 0,n(0)),i=n(1),s=n(6),a=n(4),c=[o.BusinessService.SERVICE_WEBRTC_SIGNAL,o.BusinessService.SERVICE_L3_WEBRTC_SIGNAL];function u(e,t,n,r,i){this.logger=e,this.service=t,this.streamManager=n,this.pcEstablishTimeout=r,this.option=i,this.connectState=o.PcConnectState.DISCONNECT,this.lastConnectState=o.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(o.StreamType.PC),this.eventManager=new s.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}u.prototype.sendRequest=function(e,t,n){var r=this,s=e.payload,u=((c.includes(this.service)||null!=(u=this.option)&&u.encode)&&(s=(0,a.encodeString)(e.payload)),{service_no:this.service,ack:e.ack,payload:s,wss_message_type:i.NET_ACCESS_CONFIG.wssMessageType,wss_path:null==(u=this.option)?void 0:u.path,wss_raw_query:null==(s=this.option)?void 0:s.query,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer});this.netPcStream.isConnect()||(this.logger.info("zn.napr.sr pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,u,(function(){r.logger.info("zn.napr.sr suc"),n&&n()}),(function(e){r.logger.error("zn.napr.sr fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap}),this.netPcStream.isFirst=!1},u.prototype.onPushEvent=function(e,t){var n;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(e)),e){case o.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(t,this.netPcStream.StreamID);break;case o.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case o.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.logger.info("zn.napr.ope"+" ".concat(this.service," down ").concat(null==(r=null==t?void 0:t.ts)?void 0:r.toNumber()));var r=t.payload;(c.includes(this.service)||null!=(n=this.option)&&n.encode)&&(r=(0,a.decodeString)(t.payload)),this.eventManager.emit("downLoadMessage",r)}},u.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},u.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},u.prototype.pcEstablished=function(e,t){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(o.PcConnectState.CONNECTED);var n=o.ConnectedType.MANUAL;this.lastConnectState===o.PcConnectState.BROKEN&&this.connectState===o.PcConnectState.CONNECTED&&(n=o.ConnectedType.AUTO),this.eventManager.emit("connected",n),this.reportEvent("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from,connect_stream:t}),this.brokenTimer&&clearTimeout(this.brokenTimer)},u.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(o.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",o.DisconnectedType.TEMP),e.reportEvent("pcDisconnectedEvent")}),1e3*this.pcEstablishTimeout)},u.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},u.prototype._close=function(e,t){var n;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==o.PcConnectState.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),n=this.streamManager.getStreamID(),this.netPcStream.refresh(n),this.eventManager.emit(e,t),n="","broken"===e?n="pcBrokenEvent":"disconnected"===e&&(n="pcDisconnectedEvent"),n&&this.reportEvent(n)),this.setConnectState(o.PcConnectState.DISCONNECT)},u.prototype.closePc=function(){this._close("broken")},u.prototype.closeRequest=function(){this._close("disconnected",o.DisconnectedType.CLOSE)},u.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},u.prototype.reportEvent=function(e,t){this.eventManager.emit(e,r({service_no:this.service},t))},t.NetAgentPCRequest=u},function(e,t,n){"use strict";function r(){this.handlerListMap={}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0,r.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},r.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,t)}),0)}catch(n){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(n))}}))},t.EventManager=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentHttpRequest=void 0;var r=n(0),o=n(4),i=n(1);function s(e,t,n){this.logger=e,this.service=t,this.streamManager=n,this.netHttpStream=this.streamManager.createStream(r.StreamType.HTTP)}s.prototype.sendRequest=function(e,t,n,s,a){var c=this;e={service_no:this.service,ack:e.ack,headers:e.headers,body:(0,o.encodeString)(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,zegoconn_version:i.NET_ACCESS_CONFIG.connectVer};this.netHttpStream.sendMessage(r.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,e,(function(e){var n=(null==e?void 0:e.headers).find((function(e){return"Content-Encoding"===(null==e?void 0:e.name)}));"gzip"===(null==n?void 0:n.val)?c.logger.info("zn.nahr.sr gzip"):e.body&&(n=(0,o.decodeString)(e.body),e.body=n),c.logger.info("zn.nahr.sr suc "+JSON.stringify(e)),t&&t(e)}),(function(e,t,r){c.logger.error("zn.nahr.sr fail"),n&&n(r||e)}),(function(e){c.logger.error("zn.nahr.sr ack"),s&&s(e)}),a),this.netHttpStream.isFirst=!1},t.NetAgentHttpRequest=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=t.Mode=t.DisconnectedType=t.ConnectedType=t.NET_ACCESS_CONFIG=t.BrokenType=t.BusinessService=t.NetAgentHttpRequest=t.NetAgentPCRequest=t.ZegoConnectionAgent=void 0;var r=n(0),o=(Object.defineProperty(t,"BrokenType",{enumerable:!0,get:function(){return r.BrokenType}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return r.BusinessService}}),Object.defineProperty(t,"ConnectedType",{enumerable:!0,get:function(){return r.ConnectedType}}),Object.defineProperty(t,"DisconnectedType",{enumerable:!0,get:function(){return r.DisconnectedType}}),Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return r.Mode}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return r.Method}}),n(9)),i=(Object.defineProperty(t,"ZegoConnectionAgent",{enumerable:!0,get:function(){return o.ZegoConnectionAgent}}),n(7)),s=(Object.defineProperty(t,"NetAgentHttpRequest",{enumerable:!0,get:function(){return i.NetAgentHttpRequest}}),n(1)),a=(Object.defineProperty(t,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return s.NET_ACCESS_CONFIG}}),n(5));Object.defineProperty(t,"NetAgentPCRequest",{enumerable:!0,get:function(){return a.NetAgentPCRequest}})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoConnectionAgent=void 0,n(0)),s=n(10),a=n(13),c=n(18),u=n(19),l=n(20),h=n(1),p=n(6),d=n(21),_=n(3),f=n(22),g=n(4),m=n(23),y=n(7),v=n(24);function b(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.primaryDomains=[],this._linkConnectState=i.ENUM_CONNECT_STATE.disconnect,this.lastLinkConnectState=i.ENUM_CONNECT_STATE.disconnect,this.onConnectedEvent=function(t,n){var r;e.linkConnectState=i.ENUM_CONNECT_STATE.connected,e.getConfig(),e.stateCenter.specified||(r=e.reportSeq++,e.eventManager.emit("dispatchEvent",r,"start"),e.dispatch().then((function(t){var n=t.servers;t=t.domains;e.eventManager.emit("dispatchEvent",r,"end",{domains:t}),0<n.length&&e.eventManager.emit("dispatchResultUpdate",{servers:n})})).catch((function(e){}))),e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=(0,g.uuidNum)(16),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid,connectEvents:n})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call"),e.linkConnectState=i.ENUM_CONNECT_STATE.connecting},this.onDisConnectedEvent=function(t){e.logger.info("zn.zca.ode"+" ".concat(t)),e.linkConnectState=i.ENUM_CONNECT_STATE.disconnect,t?(e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.BROKEN)):(e.eventManager.emit("disconnected"),e.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.DISCONNECT))},this.onPushEvent=function(t,n,r){switch(n){case i.AccessHubMessageType.MSG_TYPE_REDIRECT:e.redirect(r);break;case i.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(r);break;case i.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case i.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case i.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:e.streamManager.onPushEvent(t,n,r);break;case i.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(r.data)}}}Object.defineProperty(b.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"linkConnectState",{get:function(){return this._linkConnectState},set:function(e){this.lastLinkConnectState=this._linkConnectState,this._linkConnectState=e},enumerable:!1,configurable:!0}),b.prototype.init=function(){this.logger=new m.ZegoLogger,this.protobuf=new s.AccessHubProtoBuf,this.stateCenter=new f.StateCenter,this.eventManager=new p.EventManager,this.checkLinkMsg(),this.inited=!0},b.prototype.unInit=function(){this.inited=!1},b.prototype.setAppInfo=function(e){this.stateCenter.appInfo=e,this.stateCenter.networkState=!navigator||navigator.onLine?i.ENUM_NETWORK_STATE.online:i.ENUM_NETWORK_STATE.offline,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new a.ZegoWssLink(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new v.StreamManager(this.zegoLink),this.businessRequestMgr=new c.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new u.NetHeartBeatHandler(this.streamManager,this.logger,this.stateCenter),this.netAgentPCRequestMgr=new l.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},b.prototype.setUserInfo=function(e){this.stateCenter.userId=e},b.prototype.setNetAgentDefaultServers=function(e){this.connectServers=o([],e,!0)},b.prototype.setNetAgentSpecifiedServers=function(e){this.logger.info("zn.sss.0 "+JSON.stringify(e)),this.stateCenter.specified=!0,this.specifiedServers=o([],e,!0)},b.prototype.setBackupDomains=function(e){this.primaryDomains=e},b.prototype.setDispatchConnectServers=function(e){this.connect(e)},b.prototype.startHttpRequest=function(e,t,n,r,o){var i=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new y.NetAgentHttpRequest(this.logger,e.service,this.streamManager).sendRequest(e,(function(n){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,status_code:n.status_code,err_code:0}),t&&t(n)}),(function(t){i.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,err_code:t.code||0}),n&&n(t)}),r,o)},b.prototype.getAppConfigByAgent=function(e,t,n){return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.connectUa()),this.getAppConfig(e,this.stateCenter.userId,t,n)},b.prototype.getPCRequest=function(e,t){var n=this;return(t=this.netAgentPCRequestMgr.getRequest(e,t)).on("disconnected",(function(t){n.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===i.DisconnectedType.TEMP&&(n.disConnect(),n.connectStart())})),t.on("connectStart",(function(){n.connectUa()})),t},b.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},b.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},b.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},b.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},b.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},b.prototype.setLogger=function(e){this.logger=e},b.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},b.prototype.getVersion=function(){return i.PROTO_VERSION},b.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([_.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},b.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},b.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},b.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=i.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},b.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=i.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},b.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},b.prototype.connect=function(e){var t=this;0<e.length&&(this.connectServers=o([],e,!0)),this.stateCenter.specified&&0<this.specifiedServers.length&&(this.connectServers=this.specifiedServers),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new d.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,n){n===_.errorCodeList.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",n),t.netAgentPCRequestMgr.updateConnectState(i.PcConnectState.DISCONNECT,i.DisconnectedType.TIMEOUT,n))},this.connectStart(!1,!0)},b.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket(i.DestroyType.DISCONNECT)},b.prototype.getConfig=function(){function e(e,r,o){o?t.logger.info("zn.zca.gc fail "+JSON.stringify(o)):0===e.code?(t.logger.info("zn.zca.gc suc "+JSON.stringify(e)),t.getConfigSuccess(e,n)):t.logger.info("zn.zca.gc fail")}var t=this,n=(new Date).getTime();this.businessRequestMgr.getConfig(e,e)},b.prototype.getConfigSuccess=function(e,t){var n;this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout),null!=(n=null==e?void 0:e.data)&&n.client_outer_ip&&(this.stateCenter.clientIP=e.data.client_outer_ip),null!=(n=null==e?void 0:e.data)&&n.ntp_time&&(n=e.data.ntp_time.toNumber(),e=(new Date).getTime(),n+=Math.round((e-t)/2),this.stateCenter.timeOffset=n-e),this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset})},b.prototype.dispatch=function(){var e=this;return new Promise((function(t,n){e.businessRequestMgr.dispatchURL((function(n){n=n.data.wss_groups;var r=(e.logger.info("zn.nab.du wss_groups: "+JSON.stringify(n)),e.getConnectionDomains(n,e.primaryDomains));r=e.handleWssGroups(r);t({servers:r,domains:n})}),(function(e){n(e)}))}))},b.prototype.handleWssGroups=function(e){return Array.isArray(e)&&0<e.length?e.map((function(e){return h.NET_ACCESS_CONFIG.scheme+"://"+e.host+"/"+h.NET_ACCESS_CONFIG.location})):[]},b.prototype.getConnectionDomains=function(e,t){var n=o([],e,!0);return t.forEach((function(t){e.forEach((function(e){var r;(r=e.main_domain||(r=e.host.split("."))[r.length-2]+"."+r[r.length-1])!==t&&(r=e.host.replace(r,t),n.push({group:e.group,host:r}))}))})),n},b.prototype.getAppConfig=function(e,t,n,o){var s=this;return new Promise((function(a,c){"string"==typeof t&&"string"==typeof n?s.businessRequestMgr.getAppConfig(e,t,n,o).then((function(e){a(r(r({},e),{retryCount:s.getAppConfigFailCount}))})).catch((function(o){var u;s.logger.error("zn.zca.gac "+JSON.stringify(o)),-1<i.externalErrorList.indexOf(o.code)?(u=s.getAppConfigFailCount,s.getAppConfigFailCount=0,c(r(r({},o),{retryCount:u}))):(s.getAppConfigFailCount++,(20008===o.code||1100002===o.code)&&s.getAppConfigFailCount<3?s.getAppConfig(e,t,n).then((function(e){return a(e)})).catch((function(e){return c(e)})):(u=s.getAppConfigFailCount,s.getAppConfigFailCount=0,c(r(r({},o),{retryCount:u}))))})):s.logger.error("zn.zca.gac userID or token must be string")}))},b.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;console.warn("reportDisConnectEvent"),this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer,connectid:this.connectid})},b.prototype.redirect=function(e){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(e.wss_groups))),(e=this.handleWssGroups(e.wss_groups))&&Array.isArray(e)&&0<e.length?(this.disConnect(),this.stateCenter.specified&&(this.logger.info("zn.zca.rd specified"),e=this.specifiedServers),this.zegoLink.createSocket(e),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},b.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case i.ConnectionClosedAction.ACTION_DISPATCH:var n=this.reportSeq++;this.eventManager.emit("dispatchEvent",n,"start"),this.dispatch().then((function(e){var r=e.servers;e=e.domains;t.eventManager.emit("dispatchEvent",n,"end",{domains:e,reason:"ConnectClosed"}),Array.isArray(r)&&0<r.length&&(t.eventManager.emit("dispatchResultUpdate",{servers:r}),e=t.stateCenter.specified?t.specifiedServers:r,t.disConnect(),t.zegoLink.createSocket(e),t.connectStart(!1,!0))})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case i.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case i.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",i.BrokenType.CLOSE),this.connectStart();case i.ConnectionClosedAction.ACTION_ABORT:case i.ConnectionClosedAction.ACTION_RESERVED:}},b.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},b.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(i.ENUM_CONNECT_STATE.disconnect))},b.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},b.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},b.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.lastLinkConnectState===i.ENUM_CONNECT_STATE.connected&&this.linkConnectState===i.ENUM_CONNECT_STATE.disconnect&&this.reportDisConnectEvent()},b.prototype.testConnect=function(){this.startHttpRequest({service:i.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,stick:"zego-action-dispatch",method_no:i.Method.METHOD_POST,location:"/cloud-setting/get"},(function(e){console.warn("suc",e)}),(function(e){console.warn("err",e)}),(function(e){console.warn("suc",e)}))},t.ZegoConnectionAgent=b},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.AccessHubProtoBuf=void 0,a(n(11))),u=(s=s(n(2)),n(0)),l=a(n(12));function h(){var e;this.protoInstance=l.default,this.protoMap=((e={})[u.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[u.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[u.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],e[u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[u.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[u.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[u.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[u.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[u.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[u.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[u.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[u.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[u.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}s.util.Long=c.default,s.configure(),h.prototype.encodeRequest=function(e,t,n){var r=(o=this.protoMap[e])[0],o=o[1];o=(r=this.encode(this.protoInstance[r][o],t)).length;return(t=new Uint8Array(13+o))[0]=175,t[1]=0,t[2]=e>>8,t[3]=e-(t[2]<<8),t.set(new Uint8Array(Int32Array.from([o]).buffer).reverse(),4),t.set(new Uint8Array(Int32Array.from([n]).buffer).reverse(),8),t[12]=0,t.set(r,13),t},h.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],n=new DataView(e.buffer).getUint32(8),r=e.slice(13);try{var o=this.protoMap[t],i=o[0],s=o[1];return[n,t,this.decode(this.protoInstance[i][s],r)]}catch(e){return[n,t,{code:1}]}},h.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},h.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},h.prototype.decode=function(e,t){return r({},e.decode(t))},t.AccessHubProtoBuf=h},function(e,t){e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"proto_accesshub",(function(){return a})),n.d(t,"proto_initconfig",(function(){return c})),n.d(t,"default",(function(){return s}));const r=(t=n(2)).Reader,o=t.Writer,i=t.util,s=t.roots.default||(t.roots.default={}),a=s.proto_accesshub=(()=>{const e={};return e.MessageType=function(){const e={},t=Object.create(e);return t[e[0]="MSG_TYPE_EMPTY"]=0,t[e[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,t[e[2]="MSG_TYPE_STREAM_CLOSED"]=2,t[e[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,t[e[4]="MSG_TYPE_HTTP_REQUEST"]=4,t[e[5]="MSG_TYPE_HTTP_RESPONSE"]=5,t[e[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,t[e[7]="MSG_TYPE_PROXY_CONNECT"]=7,t[e[8]="MSG_TYPE_PROXY_CONNECTED"]=8,t[e[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,t[e[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,t[e[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,t[e[12]="MSG_TYPE_HB_REQUEST"]=12,t[e[13]="MSG_TYPE_HB_RESPONSE"]=13,t[e[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,t[e[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,t[e[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,t[e[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,t[e[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,t[e[19]="MSG_TYPE_PC_ESTABLISHED"]=19,t[e[20]="MSG_TYPE_PC_BROKEN"]=20,t[e[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,t[e[22]="MSG_TYPE_REDIRECT"]=22,t[e[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,t[e[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,t[e[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,t[e[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,t[e[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,t[e[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,t[e[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,t[e[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,t[e[31]="MSG_TYPE_RESOLVE_DOMAIN_REQUEST"]=31,t[e[32]="MSG_TYPE_RESOLVE_DOMAIN_RESPONSE"]=32,t[e[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,t[e[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,t[e[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,t[e[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,t[e[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,t[e[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,t[e[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,t[e[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,t}(),e.ErrorCode=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,t[e[10001]="DISPATCH_INTERNAL_ERROR"]=10001,t[e[10002]="DISPATCH_INVALID_FRAME"]=10002,t[e[10003]="DISPATCH_UNMARSHAL"]=10003,t[e[10004]="DISPATCH_MSGTYPE"]=10004,t[e[10005]="DISPATCH_MARSHAL"]=10005,t[e[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,t[e[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,t[e[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,t[e[20002]="ACCESSHUB_DECRYPT"]=20002,t[e[20003]="ACCESSHUB_MSGTYPE"]=20003,t[e[20004]="ACCESSHUB_UNMARSHAL"]=20004,t[e[20005]="ACCESSHUB_TIMEOUT"]=20005,t[e[20006]="ACCESSHUB_CONNECT"]=20006,t[e[20007]="ACCESSHUB_BROKEN"]=20007,t[e[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,t[e[20009]="ACCESSHUB_MARSHAL"]=20009,t[e[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,t[e[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,t[e[20012]="ACCESSHUB_INVALID_APPID"]=20012,t[e[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,t[e[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,t[e[20015]="ACCESSHUB_AUTH_FAILED"]=20015,t[e[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,t[e[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,t[e[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,t[e[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,t[e[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,t}(),e.Mode=function(){const e={},t=Object.create(e);return t[e[0]="Mode_UNSET"]=0,t[e[1]="MODE_ONLINE"]=1,t[e[2]="MODE_TEST"]=2,t[e[3]="MODE_ALPHA"]=3,t}(),e.Service=function(){const e={},t=Object.create(e);return t[e[0]="SERVICE_UNSET"]=0,t[e[1]="SERVICE_MEDIAGW"]=1,t[e[2]="SERVICE_LIVEROOM"]=2,t[e[3]="SERVICE_MIX"]=3,t[e[4]="SERVICE_ZEUS"]=4,t[e[5]="SERVICE_ZPUSH"]=5,t[e[6]="SERVICE_L3"]=6,t[e[7]="SERVICE_TALKLINE"]=7,t[e[8]="SERVICE_EDUSUITE"]=8,t[e[9]="SERVICE_ZIM"]=9,t[e[10]="SERVICE_ClOUD_SETTING"]=10,t[e[11]="SERVICE_ZEUSHB"]=11,t[e[12]="SERVICE_USER_LOGIC"]=12,t[e[13]="SERVICE_UNIFYDISPATCH"]=13,t[e[14]="SERVICE_QUALITY"]=14,t[e[15]="SERVICE_SECURITY"]=15,t[e[16]="SERVICE_KTVCPR"]=16,t[e[17]="SERVICE_SWITCH4LIVEROOM"]=17,t[e[18]="SERVICE_WEBRTC_SIGNAL"]=18,t[e[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,t[e[20]="SERVICE_VIDEOCPR"]=20,t[e[21]="SERVICE_CDN"]=21,t[e[22]="SERVICE_CLOUDRECORD"]=22,t[e[23]="SERVICE_INNER_ECHO"]=23,t[e[24]="SERVICE_OUTER_ECHO"]=24,t[e[25]="SERVICE_LOCALHOST_ECHO"]=25,t[e[26]="SERVICE_ECHO"]=26,t[e[27]="SERVICE_DOCSERVICE"]=27,t[e[28]="SERVICE_AUTHSVR"]=28,t[e[29]="SERVICE_WEBLIVEROOM"]=29,t[e[30]="SERVICE_WHITEBOARD"]=30,t[e[31]="SERVICE_METAWORLD"]=31,t[e[32]="SERVICE_ZEGOLAND"]=32,t}(),e.Method=function(){const e={},t=Object.create(e);return t[e[0]="METHOD_UNSET"]=0,t[e[1]="METHOD_GET"]=1,t[e[2]="METHOD_POST"]=2,t}(),e.SdkType=function(){const e={},t=Object.create(e);return t[e[0]="SDK_TYPE_UNSET"]=0,t[e[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,t[e[2]="SDK_TYPE_WSS_NATIVE"]=2,t[e[3]="SDK_TYPE_WSS_WEB"]=3,t}(),e.ZegoconnRunEnv=function(){const e={},t=Object.create(e);return t[e[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,t[e[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,t[e[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,t}(),e.BackendConnType=function(){const e={},t=Object.create(e);return t[e[0]="BACKEND_CONN_TYPE_UNSET"]=0,t[e[1]="BACKEND_CONN_TYPE_TCP"]=1,t[e[2]="BACKEND_CONN_TYPE_WSS"]=2,t}(),e.ConnectionClosed=(A.prototype.code=0,A.prototype.msg="",A.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},A.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.ConnectionClosed;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&i)}}return o},A),e.StreamClosed=(P.prototype.code=0,P.prototype.msg="",P.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},P.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.StreamClosed;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&i)}}return o},P),e.CloseConnection=(L.prototype.reason=0,L.prototype.msg="",L.prototype.action=0,L.encode=function(e,t){return t=t||o.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(24).int32(e.action),t},L.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.CloseConnection;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.action=e.int32();break;default:e.skipType(7&i)}}return o},L.Action=function(){const e={},t=Object.create(e);return t[e[0]="ACTION_RESERVED"]=0,t[e[1]="ACTION_DISPATCH"]=1,t[e[2]="ACTION_RETRY"]=2,t[e[3]="ACTION_NEXT_NODE"]=3,t[e[4]="ACTION_ABORT"]=4,t[e[5]="ACTION_NEXT_GROUP"]=5,t}(),L),e.HTTPRequest=(I.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,I.prototype.appid=0,I.prototype.biz_type=0,I.prototype.mode="",I.prototype.id_name="",I.prototype.reqid="",I.prototype.stick="",I.prototype.service="",I.prototype.location="",I.prototype.method="",I.prototype.headers=i.emptyArray,I.prototype.body=i.newBuffer([]),I.prototype.ack=!1,I.prototype.mode_no=0,I.prototype.service_no=0,I.prototype.method_no=0,I.prototype.sdk_type=0,I.prototype.zegoconn_run_env=0,I.prototype.zegoconn_version=0,I.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(let n=0;n<e.headers.length;++n)s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[n],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},I.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequest;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.stick=e.string();break;case 8:o.service=e.string();break;case 9:o.location=e.string();break;case 10:o.method=e.string();break;case 11:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 12:o.body=e.bytes();break;case 13:o.ack=e.bool();break;case 14:o.mode_no=e.int32();break;case 15:o.service_no=e.int32();break;case 16:o.method_no=e.int32();break;case 17:o.sdk_type=e.int32();break;case 18:o.zegoconn_run_env=e.int32();break;case 19:o.zegoconn_version=e.uint32();break;default:e.skipType(7&i)}}return o},I.HTTPHeader=(M.prototype.name="",M.prototype.val="",M.encode=function(e,t){return t=t||o.create(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},M.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequest.HTTPHeader;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.name=e.string();break;case 2:o.val=e.string();break;default:e.skipType(7&i)}}return o},M),I),e.HTTPResponse=(N.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,N.prototype.headers=i.emptyArray,N.prototype.status_code=0,N.prototype.body=i.newBuffer([]),N.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.headers&&e.headers.length)for(let n=0;n<e.headers.length;++n)s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[n],t.uint32(18).fork()).ldelim();return null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},N.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPResponse;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:o.status_code=e.int32();break;case 4:o.body=e.bytes();break;default:e.skipType(7&i)}}return o},N),e.HTTPRequestAck=(w.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,w.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},w.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequestAck;for(;e.pos<n;){var i=e.uint32();i>>>3==1?o.txid=e.uint64():e.skipType(7&i)}return o},w),e.HTTPRequestDroped=(C.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,C.prototype.reason=0,C.prototype.msg="",C.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(16).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(26).string(e.msg),t},C.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HTTPRequestDroped;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.reason=e.int32();break;case 3:o.msg=e.string();break;default:e.skipType(7&i)}}return o},C),e.ProxyConnectionClosed=(R.prototype.code=0,R.prototype.msg="",R.prototype.connected=0,R.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.connected&&Object.hasOwnProperty.call(e,"connected")&&t.uint32(24).int32(e.connected),t},R.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.ProxyConnectionClosed;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;case 3:o.connected=e.int32();break;default:e.skipType(7&i)}}return o},R),e.HBRequest=(k.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,k.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,k.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},k.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HBRequest;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;default:e.skipType(7&i)}}return o},k),e.HBResponse=(T.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,T.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,T.prototype.ntp_time=i.Long?i.Long.fromBits(0,0,!0):0,T.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),null!=e.ntp_time&&Object.hasOwnProperty.call(e,"ntp_time")&&t.uint32(24).uint64(e.ntp_time),t},T.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.HBResponse;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;case 3:o.ntp_time=e.uint64();break;default:e.skipType(7&i)}}return o},T),e.GetConfigRequest=(S.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,S.prototype.appid=0,S.prototype.biz_type=0,S.prototype.mode="",S.prototype.id_name="",S.prototype.reqid="",S.prototype.zegoconn_version=0,S.prototype.sdk_type=0,S.prototype.zegoconn_run_env=0,S.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(72).int32(e.zegoconn_run_env),t},S.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetConfigRequest;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.sdk_type=e.int32();break;case 9:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},S),e.GetConfigResponseData=(O.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,O.prototype.quic_hb_interval=0,O.prototype.quic_hb_timeout=0,O.prototype.logic_hb_interval=0,O.prototype.logic_hb_timeout=0,O.prototype.pc_establish_timeout=0,O.prototype.sdk_link_detect_interval=0,O.prototype.sdk_link_detect_duration=0,O.prototype.client_outer_ip="",O.prototype.ntp_time=i.Long?i.Long.fromBits(0,0,!0):0,O.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.quic_hb_interval&&Object.hasOwnProperty.call(e,"quic_hb_interval")&&t.uint32(16).uint32(e.quic_hb_interval),null!=e.quic_hb_timeout&&Object.hasOwnProperty.call(e,"quic_hb_timeout")&&t.uint32(24).uint32(e.quic_hb_timeout),null!=e.logic_hb_interval&&Object.hasOwnProperty.call(e,"logic_hb_interval")&&t.uint32(32).uint32(e.logic_hb_interval),null!=e.logic_hb_timeout&&Object.hasOwnProperty.call(e,"logic_hb_timeout")&&t.uint32(40).uint32(e.logic_hb_timeout),null!=e.pc_establish_timeout&&Object.hasOwnProperty.call(e,"pc_establish_timeout")&&t.uint32(48).uint32(e.pc_establish_timeout),null!=e.sdk_link_detect_interval&&Object.hasOwnProperty.call(e,"sdk_link_detect_interval")&&t.uint32(56).uint32(e.sdk_link_detect_interval),null!=e.sdk_link_detect_duration&&Object.hasOwnProperty.call(e,"sdk_link_detect_duration")&&t.uint32(64).uint32(e.sdk_link_detect_duration),null!=e.client_outer_ip&&Object.hasOwnProperty.call(e,"client_outer_ip")&&t.uint32(74).string(e.client_outer_ip),null!=e.ntp_time&&Object.hasOwnProperty.call(e,"ntp_time")&&t.uint32(80).uint64(e.ntp_time),t},O.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetConfigResponseData;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.quic_hb_interval=e.uint32();break;case 3:o.quic_hb_timeout=e.uint32();break;case 4:o.logic_hb_interval=e.uint32();break;case 5:o.logic_hb_timeout=e.uint32();break;case 6:o.pc_establish_timeout=e.uint32();break;case 7:o.sdk_link_detect_interval=e.uint32();break;case 8:o.sdk_link_detect_duration=e.uint32();break;case 9:o.client_outer_ip=e.string();break;case 10:o.ntp_time=e.uint64();break;default:e.skipType(7&i)}}return o},O),e.GetConfigResponse=(E.prototype.code=0,E.prototype.message="",E.prototype.data=null,E.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.GetConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},E.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetConfigResponse;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=s.proto_accesshub.GetConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},E),e.PCUpwardMessage=(b.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,b.prototype.appid=0,b.prototype.biz_type=0,b.prototype.mode_no=0,b.prototype.id_name="",b.prototype.service_no=0,b.prototype.ack=!1,b.prototype.payload=i.newBuffer([]),b.prototype.sdk_type=0,b.prototype.wss_message_type=0,b.prototype.wss_path="",b.prototype.wss_raw_query="",b.prototype.zegoconn_version=0,b.prototype.zegoconn_run_env=0,b.prototype.backend_conn_type=0,b.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),null!=e.backend_conn_type&&Object.hasOwnProperty.call(e,"backend_conn_type")&&t.uint32(120).int32(e.backend_conn_type),t},b.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCUpwardMessage;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.service_no=e.int32();break;case 7:o.ack=e.bool();break;case 8:o.payload=e.bytes();break;case 9:o.sdk_type=e.int32();break;case 10:o.wss_message_type=e.uint32();break;case 11:o.wss_path=e.string();break;case 12:o.wss_raw_query=e.string();break;case 13:o.zegoconn_version=e.uint32();break;case 14:o.zegoconn_run_env=e.int32();break;case 15:o.backend_conn_type=e.int32();break;default:e.skipType(7&i)}}return o},b),e.PCUpwardMessageAck=(v.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,v.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},v.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCUpwardMessageAck;for(;e.pos<n;){var i=e.uint32();i>>>3==1?o.txid=e.uint64():e.skipType(7&i)}return o},v),e.PCEstablished=(y.prototype.elapse=0,y.prototype.from=0,y.encode=function(e,t){return t=t||o.create(),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(8).uint32(e.elapse),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(16).uint32(e.from),t},y.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCEstablished;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.elapse=e.uint32();break;case 2:o.from=e.uint32();break;default:e.skipType(7&i)}}return o},y),e.PCBroken=(m.encode=function(e,t){return t||o.create()},m.decode=function(e,t){e instanceof r||(e=r.create(e));var n=void 0===t?e.len:e.pos+t;for(t=new s.proto_accesshub.PCBroken;e.pos<n;){var o=e.uint32();e.skipType(7&o)}return t},m),e.PCDownwardMessage=(g.prototype.payload=i.newBuffer([]),g.prototype.wss_message_type=0,g.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,g.encode=function(e,t){return t=t||o.create(),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(10).bytes(e.payload),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(16).uint32(e.wss_message_type),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},g.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PCDownwardMessage;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.payload=e.bytes();break;case 2:o.wss_message_type=e.uint32();break;case 3:o.ts=e.uint64();break;default:e.skipType(7&i)}}return o},g),e.Redirect=(f.prototype.rand="",f.prototype.secret="",f.prototype.groups=i.emptyArray,f.prototype.opt_ports=i.emptyArray,f.prototype.wss_groups=i.emptyArray,f.encode=function(e,t){if(t=t||o.create(),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(10).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(18).string(e.secret),null!=e.groups&&e.groups.length)for(let n=0;n<e.groups.length;++n)s.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[n],t.uint32(26).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let n=0;n<e.opt_ports.length;++n)t.uint32(32).uint32(e.opt_ports[n]);if(null!=e.wss_groups&&e.wss_groups.length)for(let n=0;n<e.wss_groups.length;++n)s.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[n],t.uint32(42).fork()).ldelim();return t},f.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.Redirect;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.rand=e.string();break;case 2:o.secret=e.string();break;case 3:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 5:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},f),e.GetAppConfigRequest=(_.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,_.prototype.appid=0,_.prototype.biz_type=0,_.prototype.mode_no=0,_.prototype.id_name="",_.prototype.config_key="",_.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,_.prototype.signature=i.newBuffer([]),_.prototype.lite_sign="",_.prototype.token="",_.prototype.sdk_type=0,_.prototype.zegoconn_version=0,_.prototype.zegoconn_run_env=0,_.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(50).string(e.config_key),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(56).uint64(e.ts),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(66).bytes(e.signature),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).string(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).string(e.token),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(88).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(96).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(104).int32(e.zegoconn_run_env),t},_.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetAppConfigRequest;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.config_key=e.string();break;case 7:o.ts=e.uint64();break;case 8:o.signature=e.bytes();break;case 9:o.lite_sign=e.string();break;case 10:o.token=e.string();break;case 11:o.sdk_type=e.int32();break;case 12:o.zegoconn_version=e.uint32();break;case 13:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},_),e.GetAppConfigResponseData=(d.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,d.prototype.data=i.newBuffer([]),d.prototype.ts=i.Long?i.Long.fromBits(0,0,!0):0,d.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},d.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetAppConfigResponseData;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.data=e.bytes();break;case 3:o.ts=e.uint64();break;default:e.skipType(7&i)}}return o},d),e.GetAppConfigResponse=(p.prototype.code=0,p.prototype.message="",p.prototype.data=null,p.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.GetAppConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},p.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.GetAppConfigResponse;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=s.proto_accesshub.GetAppConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},p),e.PushAppConfig=(h.prototype.config_key="",h.prototype.data=i.newBuffer([]),h.encode=function(e,t){return t=t||o.create(),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(10).string(e.config_key),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},h.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PushAppConfig;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.config_key=e.string();break;case 2:o.data=e.bytes();break;default:e.skipType(7&i)}}return o},h),e.AccesshubDispatchRequest=(l.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,l.prototype.appid=0,l.prototype.biz_type=0,l.prototype.mode_no=0,l.prototype.id_name="",l.prototype.sdk_type=0,l.prototype.zegoconn_version=0,l.prototype.zegoconn_run_env=0,l.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},l.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchRequest;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.sdk_type=e.int32();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&i)}}return o},l),e.AccesshubDispatchGroup=(u.prototype.group="",u.prototype.quic_nodes=i.emptyArray,u.prototype.mtcp_nodes=i.emptyArray,u.prototype.wss_nodes=i.emptyArray,u.encode=function(e,t){if(t=t||o.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.quic_nodes&&e.quic_nodes.length)for(let n=0;n<e.quic_nodes.length;++n)t.uint32(18).string(e.quic_nodes[n]);if(null!=e.mtcp_nodes&&e.mtcp_nodes.length)for(let n=0;n<e.mtcp_nodes.length;++n)t.uint32(26).string(e.mtcp_nodes[n]);if(null!=e.wss_nodes&&e.wss_nodes.length)for(let n=0;n<e.wss_nodes.length;++n)t.uint32(34).string(e.wss_nodes[n]);return t},u.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchGroup;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.group=e.string();break;case 2:o.quic_nodes&&o.quic_nodes.length||(o.quic_nodes=[]),o.quic_nodes.push(e.string());break;case 3:o.mtcp_nodes&&o.mtcp_nodes.length||(o.mtcp_nodes=[]),o.mtcp_nodes.push(e.string());break;case 4:o.wss_nodes&&o.wss_nodes.length||(o.wss_nodes=[]),o.wss_nodes.push(e.string());break;default:e.skipType(7&i)}}return o},u),e.WssAccesshubDispatchGroup=(c.prototype.group="",c.prototype.host="",c.prototype.main_domain="",c.encode=function(e,t){return t=t||o.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(18).string(e.host),null!=e.main_domain&&Object.hasOwnProperty.call(e,"main_domain")&&t.uint32(26).string(e.main_domain),t},c.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.WssAccesshubDispatchGroup;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.group=e.string();break;case 2:o.host=e.string();break;case 3:o.main_domain=e.string();break;default:e.skipType(7&i)}}return o},c),e.AccesshubDispatchResponseData=(a.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,a.prototype.rand="",a.prototype.secret="",a.prototype.groups=i.emptyArray,a.prototype.opt_ports=i.emptyArray,a.prototype.wss_groups=i.emptyArray,a.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(18).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(26).string(e.secret),null!=e.groups&&e.groups.length)for(let n=0;n<e.groups.length;++n)s.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[n],t.uint32(34).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let n=0;n<e.opt_ports.length;++n)t.uint32(40).uint32(e.opt_ports[n]);if(null!=e.wss_groups&&e.wss_groups.length)for(let n=0;n<e.wss_groups.length;++n)s.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[n],t.uint32(50).fork()).ldelim();return t},a.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchResponseData;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.txid=e.uint64();break;case 2:o.rand=e.string();break;case 3:o.secret=e.string();break;case 4:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 6:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},a),e.AccesshubDispatchResponse=(n.prototype.code=0,n.prototype.message="",n.prototype.data=null,n.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&s.proto_accesshub.AccesshubDispatchResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},n.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.AccesshubDispatchResponse;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=s.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},n),e.PushException=(t.prototype.reason=0,t.prototype.msg="",t.prototype.txid=i.Long?i.Long.fromBits(0,0,!0):0,t.encode=function(e,t){return t=t||o.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(24).uint64(e.txid),t},t.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_accesshub.PushException;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.txid=e.uint64();break;default:e.skipType(7&i)}}return o},t),e;function t(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function n(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function a(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function c(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function u(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function l(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function h(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function p(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function d(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function _(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function f(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function g(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function m(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function y(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function v(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function b(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function E(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function O(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function S(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function T(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function k(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function R(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function C(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function w(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function N(e){if(this.headers=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function I(e){if(this.headers=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function M(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function L(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function P(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function A(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}})(),c=s.proto_initconfig=(()=>{const e={};return e.ResourceType=function(){const e={},t=Object.create(e);return t[e[0]="CDN"]=0,t[e[1]="RTC"]=1,t[e[2]="L3"]=2,t[e[3]="CDN_PLUS"]=3,t[e[4]="CDN_PLUS_BACKUP"]=4,t}(),e.ProtocolType=function(){const e={},t=Object.create(e);return t[e[0]="UDP"]=0,t[e[1]="RTMP"]=1,t[e[2]="FLV"]=2,t[e[3]="HLS"]=3,t[e[4]="WEBRTC"]=4,t}(),e.ResolveType=function(){const e={},t=Object.create(e);return t[e[0]="LOCAL_DNS"]=0,t[e[1]="DISPATCH"]=1,t}(),e.AppConfig=(d.prototype.test_id=null,d.prototype.domain=null,d.prototype.flexible_domain=null,d.prototype.replace_flexible_domain=null,Object.defineProperty(d.prototype,"_test_id",{get:i.oneOfGetter(n=["test_id"]),set:i.oneOfSetter(n)}),Object.defineProperty(d.prototype,"_domain",{get:i.oneOfGetter(n=["domain"]),set:i.oneOfSetter(n)}),Object.defineProperty(d.prototype,"_flexible_domain",{get:i.oneOfGetter(n=["flexible_domain"]),set:i.oneOfSetter(n)}),Object.defineProperty(d.prototype,"_replace_flexible_domain",{get:i.oneOfGetter(n=["replace_flexible_domain"]),set:i.oneOfSetter(n)}),d.encode=function(e,t){return t=t||o.create(),null!=e.test_id&&Object.hasOwnProperty.call(e,"test_id")&&t.uint32(8).int32(e.test_id),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(18).string(e.domain),null!=e.flexible_domain&&Object.hasOwnProperty.call(e,"flexible_domain")&&t.uint32(26).string(e.flexible_domain),null!=e.replace_flexible_domain&&Object.hasOwnProperty.call(e,"replace_flexible_domain")&&t.uint32(34).string(e.replace_flexible_domain),t},d.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.AppConfig;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.test_id=e.int32();break;case 2:o.domain=e.string();break;case 3:o.flexible_domain=e.string();break;case 4:o.replace_flexible_domain=e.string();break;default:e.skipType(7&i)}}return o},d),e.SpeedlogConfig=(p.prototype.report_count=null,p.prototype.report_retry_interval=null,p.prototype.push_quality_sample_count=null,p.prototype.pull_quality_sample_count=null,p.prototype.hardware_report_cycle=null,p.prototype.room_user_max_count=null,p.prototype.room_stream_max_count=null,p.prototype.charge_info_report_cycle=null,p.prototype.charge_info_report_mode=null,p.prototype.disable_report_pull=i.emptyArray,p.prototype.report_max_bytes=null,p.prototype.push_quality_report_freq=null,p.prototype.pull_quality_report_freq=null,p.prototype.charge_info_report_no_playing=null,Object.defineProperty(p.prototype,"_report_count",{get:i.oneOfGetter(n=["report_count"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_report_retry_interval",{get:i.oneOfGetter(n=["report_retry_interval"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_push_quality_sample_count",{get:i.oneOfGetter(n=["push_quality_sample_count"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_pull_quality_sample_count",{get:i.oneOfGetter(n=["pull_quality_sample_count"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_hardware_report_cycle",{get:i.oneOfGetter(n=["hardware_report_cycle"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_room_user_max_count",{get:i.oneOfGetter(n=["room_user_max_count"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_room_stream_max_count",{get:i.oneOfGetter(n=["room_stream_max_count"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_charge_info_report_cycle",{get:i.oneOfGetter(n=["charge_info_report_cycle"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_charge_info_report_mode",{get:i.oneOfGetter(n=["charge_info_report_mode"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_report_max_bytes",{get:i.oneOfGetter(n=["report_max_bytes"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_push_quality_report_freq",{get:i.oneOfGetter(n=["push_quality_report_freq"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_pull_quality_report_freq",{get:i.oneOfGetter(n=["pull_quality_report_freq"]),set:i.oneOfSetter(n)}),Object.defineProperty(p.prototype,"_charge_info_report_no_playing",{get:i.oneOfGetter(n=["charge_info_report_no_playing"]),set:i.oneOfSetter(n)}),p.encode=function(e,t){if(t=t||o.create(),null!=e.report_count&&Object.hasOwnProperty.call(e,"report_count")&&t.uint32(8).int32(e.report_count),null!=e.report_retry_interval&&Object.hasOwnProperty.call(e,"report_retry_interval")&&t.uint32(16).int32(e.report_retry_interval),null!=e.push_quality_sample_count&&Object.hasOwnProperty.call(e,"push_quality_sample_count")&&t.uint32(24).int32(e.push_quality_sample_count),null!=e.pull_quality_sample_count&&Object.hasOwnProperty.call(e,"pull_quality_sample_count")&&t.uint32(32).int32(e.pull_quality_sample_count),null!=e.hardware_report_cycle&&Object.hasOwnProperty.call(e,"hardware_report_cycle")&&t.uint32(40).int32(e.hardware_report_cycle),null!=e.room_user_max_count&&Object.hasOwnProperty.call(e,"room_user_max_count")&&t.uint32(48).int32(e.room_user_max_count),null!=e.room_stream_max_count&&Object.hasOwnProperty.call(e,"room_stream_max_count")&&t.uint32(56).int32(e.room_stream_max_count),null!=e.charge_info_report_cycle&&Object.hasOwnProperty.call(e,"charge_info_report_cycle")&&t.uint32(64).int32(e.charge_info_report_cycle),null!=e.charge_info_report_mode&&Object.hasOwnProperty.call(e,"charge_info_report_mode")&&t.uint32(72).int32(e.charge_info_report_mode),null!=e.disable_report_pull&&e.disable_report_pull.length){t.uint32(82).fork();for(let n=0;n<e.disable_report_pull.length;++n)t.int32(e.disable_report_pull[n]);t.ldelim()}return null!=e.report_max_bytes&&Object.hasOwnProperty.call(e,"report_max_bytes")&&t.uint32(88).int32(e.report_max_bytes),null!=e.push_quality_report_freq&&Object.hasOwnProperty.call(e,"push_quality_report_freq")&&t.uint32(96).int32(e.push_quality_report_freq),null!=e.pull_quality_report_freq&&Object.hasOwnProperty.call(e,"pull_quality_report_freq")&&t.uint32(104).int32(e.pull_quality_report_freq),null!=e.charge_info_report_no_playing&&Object.hasOwnProperty.call(e,"charge_info_report_no_playing")&&t.uint32(112).int32(e.charge_info_report_no_playing),t},p.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.SpeedlogConfig;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.report_count=e.int32();break;case 2:o.report_retry_interval=e.int32();break;case 3:o.push_quality_sample_count=e.int32();break;case 4:o.pull_quality_sample_count=e.int32();break;case 5:o.hardware_report_cycle=e.int32();break;case 6:o.room_user_max_count=e.int32();break;case 7:o.room_stream_max_count=e.int32();break;case 8:o.charge_info_report_cycle=e.int32();break;case 9:o.charge_info_report_mode=e.int32();break;case 10:if(o.disable_report_pull&&o.disable_report_pull.length||(o.disable_report_pull=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.disable_report_pull.push(e.int32());else o.disable_report_pull.push(e.int32());break;case 11:o.report_max_bytes=e.int32();break;case 12:o.push_quality_report_freq=e.int32();break;case 13:o.pull_quality_report_freq=e.int32();break;case 14:o.charge_info_report_no_playing=e.int32();break;default:e.skipType(7&i)}}return o},p),e.MediaServiceProtocolInfo=(h.prototype.config_id=null,h.prototype.protocol=null,h.prototype.url_template=null,h.prototype.resolve_type=null,h.prototype.push_cdn_authentication=null,h.prototype.cdn_quic_version=i.emptyArray,Object.defineProperty(h.prototype,"_config_id",{get:i.oneOfGetter(n=["config_id"]),set:i.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_protocol",{get:i.oneOfGetter(n=["protocol"]),set:i.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_url_template",{get:i.oneOfGetter(n=["url_template"]),set:i.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_resolve_type",{get:i.oneOfGetter(n=["resolve_type"]),set:i.oneOfSetter(n)}),Object.defineProperty(h.prototype,"_push_cdn_authentication",{get:i.oneOfGetter(n=["push_cdn_authentication"]),set:i.oneOfSetter(n)}),h.encode=function(e,t){if(t=t||o.create(),null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(10).string(e.config_id),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(26).string(e.url_template),null!=e.resolve_type&&Object.hasOwnProperty.call(e,"resolve_type")&&t.uint32(32).int32(e.resolve_type),null!=e.push_cdn_authentication&&Object.hasOwnProperty.call(e,"push_cdn_authentication")&&t.uint32(40).int32(e.push_cdn_authentication),null!=e.cdn_quic_version&&e.cdn_quic_version.length){t.uint32(50).fork();for(let n=0;n<e.cdn_quic_version.length;++n)t.int32(e.cdn_quic_version[n]);t.ldelim()}return t},h.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaServiceProtocolInfo;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.config_id=e.string();break;case 2:o.protocol=e.int32();break;case 3:o.url_template=e.string();break;case 4:o.resolve_type=e.int32();break;case 5:o.push_cdn_authentication=e.int32();break;case 6:if(o.cdn_quic_version&&o.cdn_quic_version.length||(o.cdn_quic_version=[]),2==(7&i))for(var a=e.uint32()+e.pos;e.pos<a;)o.cdn_quic_version.push(e.int32());else o.cdn_quic_version.push(e.int32());break;default:e.skipType(7&i)}}return o},h),e.MediaResourceInfo=(l.prototype.resource_type=null,l.prototype.service_info=i.emptyArray,Object.defineProperty(l.prototype,"_resource_type",{get:i.oneOfGetter(n=["resource_type"]),set:i.oneOfSetter(n)}),l.encode=function(e,t){if(t=t||o.create(),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.service_info&&e.service_info.length)for(let n=0;n<e.service_info.length;++n)s.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[n],t.uint32(18).fork()).ldelim();return t},l.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaResourceInfo;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.resource_type=e.int32();break;case 2:o.service_info&&o.service_info.length||(o.service_info=[]),o.service_info.push(s.proto_initconfig.MediaServiceProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return o},l),e.MediaPublishConfig=(u.prototype.resource_info=i.emptyArray,u.prototype.enable_subject_segmentation=null,u.prototype.object_segmentation_platform=null,Object.defineProperty(u.prototype,"_enable_subject_segmentation",{get:i.oneOfGetter(n=["enable_subject_segmentation"]),set:i.oneOfSetter(n)}),Object.defineProperty(u.prototype,"_object_segmentation_platform",{get:i.oneOfGetter(n=["object_segmentation_platform"]),set:i.oneOfSetter(n)}),u.encode=function(e,t){if(t=t||o.create(),null!=e.resource_info&&e.resource_info.length)for(let n=0;n<e.resource_info.length;++n)s.proto_initconfig.MediaResourceInfo.encode(e.resource_info[n],t.uint32(18).fork()).ldelim();return null!=e.enable_subject_segmentation&&Object.hasOwnProperty.call(e,"enable_subject_segmentation")&&t.uint32(40).int32(e.enable_subject_segmentation),null!=e.object_segmentation_platform&&Object.hasOwnProperty.call(e,"object_segmentation_platform")&&t.uint32(48).int32(e.object_segmentation_platform),t},u.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaPublishConfig;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 2:o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(s.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()));break;case 5:o.enable_subject_segmentation=e.int32();break;case 6:o.object_segmentation_platform=e.int32();break;default:e.skipType(7&i)}}return o},u),e.MediaPlayConfig=(c.prototype.resource_info=i.emptyArray,c.encode=function(e,t){if(t=t||o.create(),null!=e.resource_info&&e.resource_info.length)for(let n=0;n<e.resource_info.length;++n)s.proto_initconfig.MediaResourceInfo.encode(e.resource_info[n],t.uint32(42).fork()).ldelim();return t},c.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaPlayConfig;for(;e.pos<n;){var i=e.uint32();i>>>3==5?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(s.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&i)}return o},c),e.MediaConfig=(a.prototype.play_config=null,a.prototype.publish_config=null,Object.defineProperty(a.prototype,"_play_config",{get:i.oneOfGetter(n=["play_config"]),set:i.oneOfSetter(n)}),Object.defineProperty(a.prototype,"_publish_config",{get:i.oneOfGetter(n=["publish_config"]),set:i.oneOfSetter(n)}),a.encode=function(e,t){return t=t||o.create(),null!=e.play_config&&Object.hasOwnProperty.call(e,"play_config")&&s.proto_initconfig.MediaPlayConfig.encode(e.play_config,t.uint32(10).fork()).ldelim(),null!=e.publish_config&&Object.hasOwnProperty.call(e,"publish_config")&&s.proto_initconfig.MediaPublishConfig.encode(e.publish_config,t.uint32(18).fork()).ldelim(),t},a.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.MediaConfig;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.play_config=s.proto_initconfig.MediaPlayConfig.decode(e,e.uint32());break;case 2:o.publish_config=s.proto_initconfig.MediaPublishConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},a),e.InitConfig=(t.prototype.app_config=null,t.prototype.speedlog_config=null,t.prototype.media_config=null,Object.defineProperty(t.prototype,"_app_config",{get:i.oneOfGetter(n=["app_config"]),set:i.oneOfSetter(n)}),Object.defineProperty(t.prototype,"_speedlog_config",{get:i.oneOfGetter(n=["speedlog_config"]),set:i.oneOfSetter(n)}),Object.defineProperty(t.prototype,"_media_config",{get:i.oneOfGetter(n=["media_config"]),set:i.oneOfSetter(n)}),t.encode=function(e,t){return t=t||o.create(),null!=e.app_config&&Object.hasOwnProperty.call(e,"app_config")&&s.proto_initconfig.AppConfig.encode(e.app_config,t.uint32(10).fork()).ldelim(),null!=e.speedlog_config&&Object.hasOwnProperty.call(e,"speedlog_config")&&s.proto_initconfig.SpeedlogConfig.encode(e.speedlog_config,t.uint32(34).fork()).ldelim(),null!=e.media_config&&Object.hasOwnProperty.call(e,"media_config")&&s.proto_initconfig.MediaConfig.encode(e.media_config,t.uint32(42).fork()).ldelim(),t},t.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.proto_initconfig.InitConfig;for(;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.app_config=s.proto_initconfig.AppConfig.decode(e,e.uint32());break;case 4:o.speedlog_config=s.proto_initconfig.SpeedlogConfig.decode(e,e.uint32());break;case 5:o.media_config=s.proto_initconfig.MediaConfig.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},t),e;function t(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var n;function a(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function c(e){if(this.resource_info=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function u(e){if(this.resource_info=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function l(e){if(this.service_info=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function h(e){if(this.cdn_quic_version=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function p(e){if(this.disable_report_pull=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function d(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}})()},function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWssLink=void 0,n(14)),u=n(0),l=n(15),h=n(16),p=n(3),d=n(1);i(_,o=l.ZegoLink),_.prototype.initEvent=function(e,t,n,r){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=n,this.onPushEvent=r},_.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},_.prototype.destroySocket=function(e){this.logger.info("zn.wl.ds.0 call "+e),this.socketService.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.disconnect,e!==u.DestroyType.NONE&&this.onDisConnectedEvent&&this.onDisConnectedEvent(e===u.DestroyType.BROKEN),this.resetConnect()},_.prototype.refreshServers=function(e){this.servers=a(a([],e,!0),this.servers,!0)},_.prototype.connectSocket=function(e,t,n){var r=this,o=(void 0===e&&(e=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=t,!1),i=(this.connectRsp.fail=function(){n&&(o?r.logger.info("zn.wl.cs.0 fail cb has exec"):(n(),o=!0))},e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.servers[this.urlIndex]);return this.connectServer=i,this.logger.info("zn.wl.cs.0 server "+i),this.tryServers.push(i),this.connectStartTime=Date.now(),this.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket(i),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){r.logger.info("zn.wl.cs.0 timeout"),r.connectEvent(i,p.errorCodeList.NET_CONNECT_TIMEOUT.code),r.connectRsp.fail&&r.connectRsp.fail()}),this.connectInterval),!0},_.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info("zn.wl.bse open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=u.ENUM_CONNECT_STATE.connected,e.connectEvent(e.connectServer,0),e.onConnectedEvent&&e.onConnectedEvent(e.tryServers,e.tryConnectEvents),e.tryConnectEvents=[],e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn("zn.wl.bse close "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||p.errorCodeList.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=u.ENUM_CONNECT_STATE.disconnect})),this.errorHandler((function(t){e.logger.warn("zn.wl.bse error "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||p.errorCodeList.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=u.ENUM_CONNECT_STATE.disconnect})),this.onMessage()},_.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=u.ENUM_CONNECT_STATE.disconnect},_.prototype.connectEvent=function(e,t){var n;this.connectStartTime&&(n=Date.now()-this.connectStartTime,this.tryConnectEvents.push({url:e,time_consumed:n,connect_type:3,error:t}))},_.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},_.prototype.isConnect=function(){return this.netLinkState===u.ENUM_CONNECT_STATE.connected},_.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},_.prototype.isConnecting=function(){return this.netLinkState===u.ENUM_CONNECT_STATE.connecting},_.prototype.setState=function(e){this.netLinkState=e},_.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},_.prototype.openHandler=function(e){this.socketService.openHandler(e)},_.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},_.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},_.prototype.sendMessage=function(e,t,n,r,o,i,a,c){void 0===r&&(r=!0),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===(c=void 0===c?{}:c).timeout&&(c.timeout=5e3),void 0===c.isInSendMap&&(c.isInSendMap=!0),this.txid++,r={appid:this.appID,biz_type:0,mode_no:(null==(r=this.stateCenter.appInfo)?void 0:r.mode)||d.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:d.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:0===this.env?u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:u.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},n={data:r=s(s({txid:this.txid},r),n),txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:c.timeout||this.timeout,ack:n.ack,success:o,error:i,ackFunc:a,isSend:!0,isCheck:e!==u.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE},c.isInSendMap&&(o=this.sendCommandList.push(n),this.sendCommandMap[this.txid]=o),this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+u.typeMap[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(e,r,t):(n.isSend=!1,i=this.unSendCommandList.push(n),this.unSendCommandMap[this.txid]=i)},_.prototype.checkUnSendMsgs=function(e){for(var t,n=e.getFirst();null!=n;)e.remove(n),n._data&&!1===(null==(t=n._data)?void 0:t.isSend)&&n._data.type&&n._data.streamID&&n._data.data&&(this.sendUint8Data(n._data.type,n._data.data,n._data.streamID),n._data.isSend=!0),n=e.getFirst()},_.prototype.sendUint8Data=function(e,t,n){e=this.protobuf.encodeRequest(e,t,n),this.socketService.sendMessage(e)},_.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){t=new Uint8Array(t);var n,r=(t=e.protobuf.decodeResponse(t))[0],o=t[1];t=t[2];e.unUpdateMsgTimeTypes.includes(o)||(e.updatedMsgTime=Date.now()),-1===e.unlogTypes.indexOf(o)&&e.logger.info("zn.wl.om"+" streamID: ".concat(r,", msgType: ").concat(o,"-").concat(u.typeMap[o])),(null!=t&&t.txid||null!=(n=null==t?void 0:t.data)&&n.txid)&&e.isRspMsg((null==t?void 0:t.txid)||(null==(n=null==t?void 0:t.data)?void 0:n.txid))?e.handleSendCommandMsgRsp(r,o,(null==t?void 0:t.txid)||(null==(n=null==t?void 0:t.data)?void 0:n.txid),t):e.onPushEvent(r,o,t)}},_.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},_.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},_.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},_.prototype.checkMessageListTimeout=function(e,t){for(var n,r=e.getFirst(),o=Date.now(),i=0,s=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeOut>o?"break":(r._data&&delete t[r._data.data.txid],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+s.sendDataDropTimeout<o||(a=r&&r._data&&r._data.error,c=r&&r._data&&r._data.txid,u=r&&r._data&&(null==(n=r._data)?void 0:n.isCheck),setTimeout((function(){u&&a&&a({},c,p.errorCodeList.TIMEOUT)}),0)),++i>=s.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var a,c,u}(););},_.prototype.checkSendMessageList=function(e){for(var t,n=e.getFirst();null!=n&&n._data;)!function(){var r,o,i;e.remove(n),n._data.isSend&&n._data.error&&(r=n&&n._data&&n._data.error,o=n&&n._data&&n._data.txid,i=n&&n._data&&(null==(t=n._data)?void 0:t.isCheck),setTimeout((function(){i&&r&&r({},o,p.errorCodeList.TIMEOUT)}),0)),n=e.getFirst()}()},_.prototype.handleSendCommandMsgRsp=function(e,t,n,r){var o,i=this.sendCommandMap[n];null!=i&&(null!=(o=i._data)&&o.ack||(delete this.sendCommandMap[n],this.sendCommandList.remove(i)),r.code&&0!==r.code?o&&null!=o.error&&o.error(r,n):t===u.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(r.code=r.reason,r.message=r.msg,o&&null!=o.error&&o.error(r,n)):t===u.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?o&&null!=o.ackFunc&&o.ackFunc(r,n):o&&null!=o.success&&o.success(r,n))},n=_;function _(e,t,n,r,i){var s=o.call(this)||this;return s.appID=e,s.env=t,s.protobuf=n,s.logger=r,s.stateCenter=i,s.socketService=new h.NetSocketService(s.env),s.urlIndex=0,s.updatedMsgTime=0,s.unUpdateMsgTimeTypes=[u.AccessHubMessageType.MSG_TYPE_HB_REQUEST,u.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,u.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],s.netLinkState=u.ENUM_CONNECT_STATE.disconnect,s.sendCommandList=new c.LinkedList,s.unSendCommandList=new c.LinkedList,s.sendCommandMap={},s.unSendCommandMap={},s.sendDataCheckOnceCount=100,s.sendDataDropTimeout=1e4,s.sendDataCheckInterval=2e3,s.timeout=5e3,s.connectInterval=1e4,s.connectTimer=null,s.connectRsp={},s.unlogTypes=[12,13],s.tryServers=[],s.tryConnectEvents=[],s.connectStartTime=0,s.updatedMsgTime=Date.now(),s}t.ZegoWssLink=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0,Object.defineProperty(o.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),o.prototype.hasNext=function(){return this.next&&this.next.id},o.prototype.hasPrev=function(){return this.prev&&this.prev.id};var r=o;function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function i(){this.start=new r,this.end=new r,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=r,i.prototype.insertBefore=function(e,t){return(t=new r(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},i.prototype.addLast=function(e){return this.insertBefore(this.end,e)},i.prototype.add=function(e){return this.addLast(e)},i.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},i.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},i.prototype.size=function(){return this._numNodes},i.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},i.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},i.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},i.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},i.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},i.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},i.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},i.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},i.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},i.prototype.push=function(e){return this.addLast(e)},i.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},i.prototype.pop=function(){return this.removeLast()},i.prototype.shift=function(){return this.removeFirst()},t.LinkedList=i},function(e,t,n){"use strict";function r(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLink=void 0,r.prototype.createSocket=function(e){},r.prototype.setState=function(e){},r.prototype.initEvent=function(e,t,n,r){},r.prototype.sendMessage=function(e,t,n,r,o,i,s,a){void 0===r&&(r=!0),void 0===o&&(o=null),void 0===i&&(i=null),void 0===s&&(s=null)},t.ZegoLink=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetSocketService=void 0;var r=n(17);function o(e){this.socket=null,this.ENV=e}o.prototype.createSocket=function(e){this.socket=(0,r.createZegoWebSocket)(e,this.ENV%2)},o.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.socket.binaryType="arraybuffer",t.responseHandler(),e(n)})},o.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},o.prototype.onMessage=function(e){},o.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},o.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},o.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},o.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},o.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&this.ENV%2!=1&&this.socket.send(e)},t.NetSocketService=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=t.ZEGO_ENV=void 0,(o=r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",s.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},s.prototype.onopen=function(e){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},s.prototype.onmessage=function(e){},s.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},s.prototype.close=function(){this._websocket&&this._websocket.close()};var r,o,i=s;function s(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=i,t.createZegoWebSocket=function(e,t){return new(t%2===r.BROWSER?WebSocket:i)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentBusinessRequestMgr=void 0;var r=n(0),o=n(1);function i(e,t,n,r){this.streamManager=e,this.protobuf=t,this.logger=n,this.stateCenter=r}i.prototype.getConfig=function(e,t){var n;this.logger.info("zn.nab.gc call"),this.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:o.NET_ACCESS_CONFIG.connectVer,mode:r.ModeMap[(null==(n=this.stateCenter.appInfo)?void 0:n.mode)||o.NET_ACCESS_CONFIG.modeNo]},e,t)},i.prototype.dispatchURL=function(e,t){var n=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},(function(t){n.logger.info("zn.nab.du suc "),e&&e(t)}),(function(e,r,o){n.logger.info("zn.nab.du fail"),t&&t(o||e)}))},i.prototype.getAppConfig=function(e,t,n,i){var s=this;return new Promise((function(a,c){function u(e,t,n){n?(s.logger.error("zn.nab.gac fail "+JSON.stringify(n)),c(n)):0===e.code?(s.logger.info("zn.nab.gac suc"),n=s.decodeConfigMessage(e.data.data),a({code:0,data:n})):(s.logger.error("zn.nab.gac fail "+e.code),c({code:e.code}))}s.logger.info("zn.nab.gac call");var l={id_name:t,config_key:e,token:n,mode_no:(null==(l=s.stateCenter.appInfo)?void 0:l.mode)||o.NET_ACCESS_CONFIG.modeNo};s.streamManager.createStream(r.StreamType.OTHER).sendMessage(r.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,l,u,u,null,{timeout:i})}))},i.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},t.NetAgentBusinessRequestMgr=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetHeartBeatHandler=void 0;var r=n(3),o=n(0);function i(e,t,n){this.streamManager=e,this.logger=t,this.stateCenter=n,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}i.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(o.StreamType.OTHER)),1<=e.data.logic_hb_interval&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),3<=e.data.logic_hb_timeout&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.tryHbCount=0,this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},i.prototype.start=function(){var e,t,n,i=this;this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount?(this.logger.error("zn.nhb.s come to try limit"),this.reset(),this.netHbLogout(r.errorCodeList.NET_HB_TIMEOUT)):(e=(new Date).getTime(),t=function(t,n,r){var o=(new Date).getTime()-e;i.logger.debug("zn.nhb.s hb callback "+o),r&&0!==(null==r?void 0:r.code)?i.logger.info("zn.nhb.s fail "+JSON.stringify(r)):(null!=t&&t.ntp_time&&(r=t.ntp_time.toNumber(),t=(new Date).getTime(),r+=Math.round(o/2),i.stateCenter.timeOffset=r-t),i.tryHbCount=0)},n={ts:Date.now()},this.hbStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HB_REQUEST,n,t,t,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){i.start()}),1e3*this.hbInterval))},i.prototype.netHbLogout=function(e){},i.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},t.NetHeartBeatHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequestMgr=void 0;var r=n(0),o=n(1),i=n(5);function s(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=o.NET_ACCESS_CONFIG.pcEstablishTimeout}s.prototype.getRequest=function(e,t){return e=new i.NetAgentPCRequest(this.logger,e,this.streamManager,this.pcEstablishTimeout,t),this.pcStreamRequests.push(e),e},s.prototype.updateConnectState=function(e,t,n){this.pcStreamRequests.forEach((function(o){e===r.PcConnectState.BROKEN?(o.eventManager.emit("broken"),o.reportEvent("pcBrokenEvent")):e===r.PcConnectState.DISCONNECT&&(o.eventManager.emit("disconnected",t,n),o.reportEvent("pcDisconnectedEvent"))}))},s.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},s.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},t.NetAgentPCRequestMgr=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetRetryLinkHandler=void 0;var r=n(3),o=n(0);function i(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90}i.prototype.initLink=function(e){this.link=e},i.prototype.startMaxTime=function(){var e=this;this.logger.info("zn.rlh.sm call"),this.maxTimer||(this.logger.info("zn.rlh.sm start max timer"),this.maxTimer=setTimeout((function(){e.logger.warn("zn.rlh.sm"+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(o.DestroyType.NONE),e.stopMaxTime(),e.invalid(),e.onactive(!1,r.errorCodeList.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},i.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},i.prototype.active=function(e,t,n){var r=this;if(void 0===n&&(n=!1),this.logger.info("zn.rlh.at call "+e+" "+(t=void 0!==t&&t)),this.retryTimer)return this.logger.info("zn.rlh.at has actived, ignore"),!1;var i=this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline;if(i){if(this.logger.info("zn.rlh.at  check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn("zn.rlh.at network is broken, stop retry"),!1}else this.retryNetCount=0;return this.link.isConnecting()&&!n?(this.logger.info("zn.rlh.at link is connecting, ignore"),!1):this.isOverTime?(this.logger.info("zn.rlh.at retry over time, stop retry"),!1):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n),this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){r.link.destroySocket(o.DestroyType.BROKEN),r.link.connectSocket(e,(function(){r.logger.info("zn.rlh.at suc"),r.stateCenter.networkState=o.ENUM_NETWORK_STATE.online,r.stopMaxTime(),r.invalid(),r.onactive(!0)}),(function(){r.logger.info("zn.rlh.at fail"),r.maxTimer||r.startMaxTime(),r.active(!0,!1,!0)})),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,i?r.retryNetCount++:r.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0)},i.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},i.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},i.prototype.invalid=function(){this.logger.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},t.NetRetryLinkHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var r=n(0);t.StateCenter=function(){this.networkState=r.ENUM_NETWORK_STATE.online,this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.timeOffset=0}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.log(n)},r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.debug(n)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.info(n)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.warn(n)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.error(n)},t.ZegoLogger=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var r=n(0),o=n(25);function i(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}i.prototype.createStream=function(e){return e!==r.StreamType.HTTP&&e===r.StreamType.PC?(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.pcStreams.push(t),t):this.getStream(e,this.httpStreams);var t},i.prototype.getStream=function(e,t){return t=t.find((function(e){return!0===e.isFree})),t?(t.isFree=!1,t.isFirst=!1,t):(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.httpStreams.push(t),t)},i.prototype.onPushEvent=function(e,t,n){var r=this.pcStreams.find((function(t){return t.StreamID===e}));r&&r.onPushEvent(t,n)},i.prototype.getStreamID=function(){return this.streamID++},t.StreamManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLinkStream=void 0;var r=n(0);function o(e,t,n){this.type=e,this.streamID=t,this.zegoLink=n,this.isFree=!1,this.isFirst=!0}Object.defineProperty(o.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),o.prototype.refresh=function(e){this.streamID=e},o.prototype.sendMessage=function(e,t,n,o,i,s){var a=this;void 0===n&&(n=null),void 0===o&&(o=null),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e){a.type!==r.StreamType.PC&&(a.isFree=!0),n&&n(e)}),(function(e,t,n){a.type!==r.StreamType.PC&&(a.isFree=!0),o&&o(e,t,n)}),i=void 0===i?null:i,s=void 0===s?{timeout:5e3,isInSendMap:!0}:s)},o.prototype.onPushEvent=function(e,t){},o.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(r.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},o.prototype.isConnect=function(){return this.zegoLink.isConnect()},t.ZegoLinkStream=o}],a={},r.m=s,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8))},function(e,t,n){var r;e.exports=(r=n(2),function(){var e,t;"function"==typeof ArrayBuffer&&(e=r.lib.WordArray,t=e.init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e)}(),r.lib.WordArray)},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){var r;e.exports=(e=n(2),r=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=this._map,o=(e.clamp(),[]),i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map;if(!(o=this._reverseMap))for(var o=this._reverseMap=[],i=0;i<n.length;i++)o[n.charCodeAt(i)]=i;var s=n.charAt(64);return s&&-1!==(s=e.indexOf(s))&&(t=s),function(e,t,n){for(var o,i,s=[],a=0,c=0;c<t;c++)c%4&&(o=n[e.charCodeAt(c-1)]<<c%4*2,i=n[e.charCodeAt(c)]>>>6-c%4*2,s[a>>>2]|=(o|i)<<24-a%4*8,a++);return r.create(s,a)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,n){var r,o,i,s;e.exports=(e=n(2),s=(n=e).lib,r=s.WordArray,o=s.Hasher,s=n.algo,i=[],s=s.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],u=0;u<80;u++){u<16?i[u]=0|e[t+u]:(l=i[u-3]^i[u-8]^i[u-14]^i[u-16],i[u]=l<<1|l>>>31);var l=(r<<5|r>>>27)+c+i[u];l+=u<20?1518500249+(o&s|~o&a):u<40?1859775393+(o^s^a):u<60?(o&s|o&a|s&a)-1894007588:(o^s^a)-899497514,c=a,a=s,s=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=Math.floor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(s),n.HmacSHA1=o._createHmacHelper(s),e.SHA1)},function(e,t,n){var r;e.exports=(e=n(2),n=e.lib.Base,r=e.enc.Utf8,void(e.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));for(var n=e.blockSize,o=4*n,i=(e=((t=t.sigBytes>o?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),e.words),s=t.words,a=0;a<n;a++)i[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,n){var r,o,i,s,a,c,u,l,h,p,d,_;e.exports=(e=n(2),n(12),void(e.lib.Cipher||(n=e.lib,r=n.Base,o=n.WordArray,i=n.BufferedBlockAlgorithm,(h=e.enc).Utf8,s=h.Base64,a=e.algo.EvpKDF,c=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:p}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=e.mode={},u=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=h.CBC=function(){var e=u.extend();function t(e,t,n){var r,o=this._iv;o?(r=o,this._iv=void 0):r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+o)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,i=e.slice(n,n+o);r.decryptBlock(e,n),t.call(this,e,n,o),this._prevBlock=i}}),e}(),d=(e.pad={}).Pkcs7={pad:function(e,t){for(var n=(t=4*t)-e.sigBytes%t,r=n<<24|n<<16|n<<8|n,i=[],s=0;s<n;s+=4)i.push(r);t=o.create(i,n),e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:d}),reset:function(){c.reset.call(this);var e,t=(n=this.cfg).iv,n=n.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(n,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),l=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(e=(e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,n=(e=s.parse(e)).words;return 1398893684==n[0]&&1701076831==n[1]&&(t=o.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),l.create({ciphertext:e,salt:t})}},p=n.SerializableCipher=r.extend({cfg:r.extend({format:h}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);t=(o=e.createEncryptor(n,r)).finalize(t);var o=o.cfg;return l.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),d=(e.kdf={}).OpenSSL={execute:function(e,t,n,r){return r=r||o.random(8),e=a.create({keySize:t+n}).compute(e,r),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,l.create({key:e,iv:n,salt:r})}},_=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:d}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=p.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}}))))},function(e,t,n){"use strict";n.r(t),n.d(t,"ZegoExpressWebRTMEngine",(function(){return st})),n.d(t,"getReportSeq",(function(){return _})),n.d(t,"getSeq",(function(){return d})),n.d(t,"ZegoLogger",(function(){return h.ZegoLogger})),n.d(t,"ZegoDataReport",(function(){return h.ZegoDataReport})),n.d(t,"ZegoExpressWebRTM",(function(){return Ke})),n.d(t,"BusinessService",(function(){return S})),n.d(t,"NetConnection",(function(){return C})),n.d(t,"ZReporter",(function(){return ot}));var r,o,i,s,a,c,u,l,h=n(5),p={debug:0,info:1,warn:2,error:3,report:99,disable:100},d=((t=r=r||{})[t.TT_NONE=0]="TT_NONE",t[t.TT_PC=1]="TT_PC",t[t.TT_IOS=2]="TT_IOS",t[t.TT_ANDROID=3]="TT_ANDROID",t[t.TT_MAC=4]="TT_MAC",t[t.TT_LINUX=5]="TT_LINUX",t[t.TT_WEB=6]="TT_WEB",t[t.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",t[t.TT_UNKNOWN=32]="TT_UNKNOWN",(t=o=o||{})[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login",(t=i=i||{})[t.I=0]="I",t[t.H=10]="H",t[t.M=100]="M",t[t.L=1e3]="L",(t=s=s||{})[t.offline=0]="offline",t[t.online=1]="online",(t=a=a||{})[t.NT_NONE=0]="NT_NONE",t[t.NT_LINE=1]="NT_LINE",t[t.NT_WIFI=2]="NT_WIFI",t[t.NT_2G=3]="NT_2G",t[t.NT_3G=4]="NT_3G",t[t.NT_4G=5]="NT_4G",t[t.NT_UNKNOWN=32]="NT_UNKNOWN",(t=c=c||{})[t.ClientType_None=0]="ClientType_None",t[t.ClientType_H5=1]="ClientType_H5",t[t.ClientType_SmallProgram=2]="ClientType_SmallProgram",t[t.ClientType_Webrtc=3]="ClientType_Webrtc",function(){return u++}),_=(l=u=1,function(){return l++}),f=(Object.defineProperty(g.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),g.prototype.hasNext=function(){return this.next&&this.next.id},g.prototype.hasPrev=function(){return this.prev&&this.prev.id},g);function g(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}y.prototype.insertBefore=function(e,t){return(t=new f(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},y.prototype.addLast=function(e){return this.insertBefore(this.end,e)},y.prototype.add=function(e){return this.addLast(e)},y.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},y.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},y.prototype.size=function(){return this._numNodes},y.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},y.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},y.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},y.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},y.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},y.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},y.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},y.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},y.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},y.prototype.push=function(e){return this.addLast(e)},y.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},y.prototype.pop=function(){return this.removeLast()},y.prototype.shift=function(){return this.removeFirst()};var m=y;function y(){this.start=new f,this.end=new f,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var v,b,E,O,S,T,k="",R=n(14),C=(Object.defineProperty(w.prototype,"clientIP",{get:function(){var e;return(null==(e=this.connection)?void 0:e.clientIP)||""},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"timeOffset",{get:function(){var e;return null==(e=this.connection)?void 0:e.timeOffset},enumerable:!1,configurable:!0}),w.prototype.init=function(){var e;null!=(e=this.connection)&&e.init()},w.prototype.unInit=function(){var e;null!=(e=this.connection)&&e.unInit()},w.prototype.setAppInfo=function(e){var t;null!=(t=this.connection)&&t.setAppInfo(e)},w.prototype.setUserInfo=function(e){var t;null!=(t=this.connection)&&t.setUserInfo(e)},w.prototype.setNetAgentDefaultServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentDefaultServers(e)},w.prototype.setBackupDomains=function(e){var t;null!=(t=this.connection)&&t.setBackupDomains(e)},w.prototype.setDispatchConnectServers=function(e){var t;null!=(t=this.connection)&&t.setDispatchConnectServers(e)},w.prototype.setNetAgentSpecifiedServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentSpecifiedServers(e)},w.prototype.startHttpRequest=function(e,t,n,r,o){var i;null!=(i=this.connection)&&i.startHttpRequest(e,t,n,r,o)},w.prototype.getAppConfigByAgent=function(e,t,n){var r;return null==(r=this.connection)?void 0:r.getAppConfigByAgent(e,t,n)},w.prototype.getPCRequest=function(e,t){var n;return(null==(n=this.connection)?void 0:n.getPCRequest(e,t))||null},w.prototype.connectUa=function(){var e;null!=(e=this.connection)&&e.connectUa()},w.prototype.destroyConnect=function(){var e;null!=(e=this.connection)&&e.destroyConnect()},w.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},w.prototype.on=function(e,t){var n;return(null==(n=this.connection)?void 0:n.on(e,t))||!0},w.prototype.off=function(e,t){var n;return null==(n=this.connection)?void 0:n.off(e,t)},w.prototype.setLogger=function(e){var t;return null==(t=this.connection)?void 0:t.setLogger(e)},w.prototype.setAccess=function(e){var t;return null==(t=this.connection)?void 0:t.setAccess(e)},w);function w(){this.isLoad=!1,this.callBackList=[],this.connection=new R.ZegoConnectionAgent}(t=v=v||{})[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",(t=b=b||{})[t.EMPTY=0]="EMPTY",t[t.CLOSE=1]="CLOSE",(t=E=E||{})[t.Mode_UNSET=0]="Mode_UNSET",t[t.MODE_ONLINE=1]="MODE_ONLINE",t[t.MODE_TEST=2]="MODE_TEST",t[t.MODE_ALPHA=3]="MODE_ALPHA",(t=O=O||{})[t.CLOSE=0]="CLOSE",t[t.TEMP=1]="TEMP",t[t.TIMEOUT=2]="TIMEOUT",(t=S=S||{})[t.SERVICE_UNSET=0]="SERVICE_UNSET",t[t.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",t[t.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",t[t.SERVICE_MIX=3]="SERVICE_MIX",t[t.SERVICE_ZEUS=4]="SERVICE_ZEUS",t[t.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",t[t.SERVICE_L3=6]="SERVICE_L3",t[t.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",t[t.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",t[t.SERVICE_ZIM=9]="SERVICE_ZIM",t[t.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",t[t.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",t[t.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",t[t.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",t[t.SERVICE_QUALITY=14]="SERVICE_QUALITY",t[t.SERVICE_SECURITY=15]="SERVICE_SECURITY",t[t.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",t[t.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",t[t.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",t[t.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",t[t.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",t[t.SERVICE_CDN=21]="SERVICE_CDN",t[t.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",t[t.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",t[t.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",t[t.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",t[t.SERVICE_ECHO=26]="SERVICE_ECHO",t[t.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",t[t.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(t=T=T||{}).Logining="LOGINING",t.Logined="LOGINED",t.LoginFailed="LOGIN_FAILED",t.Reconnecting="RECONNECTING",t.Reconnected="RECONNECTED",t.ReconnectFailed="RECONNECT_FAILED",t.Kickout="KICKOUT",t.Logout="LOGOUT",t.LogoutFailed="LOGOUT_FAILED";var N={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},FORBID_BLACK_USER:{code:1002066,msg:"forbid black user"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}},I=(M.base64encode=function(e){for(var t,n,r,o=e.length,i=0,s="";i<o;){if(t=255&e.charCodeAt(i++),i==o){s=(s+=M.base64EncodeChars.charAt(t>>2))+M.base64EncodeChars.charAt((3&t)<<4)+"==";break}if(n=e.charCodeAt(i++),i==o){s=(s=(s+=M.base64EncodeChars.charAt(t>>2))+M.base64EncodeChars.charAt((3&t)<<4|(240&n)>>4))+M.base64EncodeChars.charAt((15&n)<<2)+"=";break}r=e.charCodeAt(i++),s=(s=(s=(s+=M.base64EncodeChars.charAt(t>>2))+M.base64EncodeChars.charAt((3&t)<<4|(240&n)>>4))+M.base64EncodeChars.charAt((15&n)<<2|(192&r)>>6))+M.base64EncodeChars.charAt(63&r)}return s},M.base64decode=function(e){for(var t,n,r,o,i=e.length,s=0,a="";s<i;){for(;t=M.base64DecodeChars[255&e.charCodeAt(s++)],s<i&&-1==t;);if(-1==t)break;for(;n=M.base64DecodeChars[255&e.charCodeAt(s++)],s<i&&-1==n;);if(-1==n)break;a+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(s++)))return a}while(r=M.base64DecodeChars[r],s<i&&-1==r);if(-1==r)break;a+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&e.charCodeAt(s++)))return a}while(o=M.base64DecodeChars[o],s<i&&-1==o);if(-1==o)break;a+=String.fromCharCode((3&r)<<6|o)}return a},M.utf16to8=function(e){for(var t,n="",r=e.length,o=0;o<r;o++)1<=(t=e.charCodeAt(o))&&t<=127?n+=e.charAt(o):n=2047<t?(n=(n+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(n+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return n},M.utf8to16=function(e){for(var t,n,r,o="",i=e.length,s=0;s<i;)switch((t=e.charCodeAt(s++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=e.charAt(s-1);break;case 12:case 13:n=e.charCodeAt(s++),o+=String.fromCharCode((31&t)<<6|63&n);break;case 14:n=e.charCodeAt(s++),r=e.charCodeAt(s++),o+=String.fromCharCode((15&t)<<12|(63&n)<<6|(63&r)<<0)}return o},M.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],M);function M(){}t=n(3);var L=n.n(t),P=(t=n(6),n.n(t)),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},D=["00","01","02","03","04","05","06","07","08","09"],H=(U.checkConfigParam=function(e,t,n){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(n.error("ccp.0 server must be string or string array and not empty"),!1):(n.error("ccp.0 appid must be positive integer number and not empty"),!1)},U.checkPriConfigParam=function(e,t,n,r,o){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof n||"string"!=typeof n.deviceID?(o.error("ccp.0 deviceID must be string and not empty"),!1):1===r||0===r||(o.error("ccp.0 anType must be 0 or 1"),!1):(o.error("ccp.0 dispatchServer must be string and not empty"),!1):(o.error("ccp.0 appid must be positive integer number and not empty"),!1)},U.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},U.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},U.registerCallback=function(e,t,n){var r;t.success&&(r=t.success,n[e+"SuccessCallback"]=r),t.error&&(r=t.error,n[e+"ErrorCallback"]=r)},U.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},U.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},U.logReportCallback=function(e,t,n,r){U.registerCallback(e,{success:function(e,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];U.dataReportEvent(t,n,e,r,o)}},r)},U.proxyRes=function(e,t,n,r){return{interResolve:function(r){e.uploadReport(t),n(r)},interReject:function(n,o){var i;void 0===o&&(o=""),(i=n.code<2e9&&1e9<n.code?U.decodeServerError(n.code,n.msg):{code:n.code,message:n.msg})&&e.addMsgInfo(t,{error:i.code,message:i.message+o}),e.uploadReport(t),r({errorCode:n.code||n.errorCode})}}},U.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return N.SUCCESS;var n,r=A({},N.ROOM_INNER_ERROR);return r.code=e,r.msg=1e9<e?(n=t[e])?"liveroom cmd error, code: "+e+", message: "+n:t[1e9]+e:t[e]?t[e]+" code:"+e:"unknown error code:"+e,r},U.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},U.decodeServerError=function(e,t){var n={code:-1,message:"server error"};return n.code=1e9<e?e-1e9+52e6:e+2002e6,t&&(n.message=t),n},U.getLiveRoomError=function(e,t){var n={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED",5030:"FORBID_BLACK_USER"};return t?2e5<e&&e<3e5?n[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||n[e]||"ROOM_INNER_ERROR":n[e]||"ROOM_INNER_ERROR":1e9<e?n[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},U.getKickoutError=function(e,t){var n={code:e,message:"kickout reason = "+e};if(t)switch(e){case 1:n.code=63000001,n.message="zpush multiple login kickout",n.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:n.code=63000002,n.message="zpush manual kickout",n.name="MANUAL_KICKOUT";break;case 4:n.code=63000005,n.message="zpush token expired",n.name="TOKEN_EXPIRED";break;default:n.code=e,n.message="kickout reason = "+e}else switch(e){case 1:n.code=63000001,n.message="zpush multiple login kickout",n.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:n.code=63000002,n.message="zpush manual kickout",n.name="MANUAL_KICKOUT";break;case 3:n.code=63000003,n.message="kickout reason = "+e;break;case 4:n.code=63000004,n.message="zpush multiple login kickout",n.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:n.code=63000005,n.message="zpush token expired",n.name="TOKEN_EXPIRED";break;default:n.code=e,n.message="kickout reason = "+e}return n},U.dataReportEvent=function(e,t,n,r,o){switch(n){case"eventStart":e.eventStart(t,r);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,r,o[0]);break;case"addEventMsg":e.addEventMsg(t,r,o[0],o[1]);break;case"addEvent":e.addEvent(t,r);break;case"eventEnd":e.eventEnd(t,r);break;case"addMsgInfo":e.addMsgInfo(t,o[0])}},U.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},U.mergeUserList=function(e,t,n,r){e.debug("msl.0 call");var o=[],i=[];n=n||[];for(var s=0;s<n.length;s++){for(var a=!1,c=0;c<t.length;c++)if(n[s].userID===t[c].userID){a=!0;break}a||o.push(n[s])}for(var u=0;u<t.length;u++){a=!1;for(var l=0;l<n.length;l++)if(t[u].userID===n[l].userID){a=!0;break}a||i.push(t[u])}for(t.splice(0),s=0;s<n.length;s++)t.push(t[s]);r(o,i),e.debug("msl.0 call success")},U.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&0<=e:"number"==typeof e&&e%1==0&&0<e},U.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=n},U.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},U.uuid=function(e,t){var n,r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(r=0|16*Math.random(),i[n]=o[19==n?3&r|8:r]);return i.join("")},U.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var o=parseInt(e[r]),i=parseInt(t[r]);if(i<o)return 1;if(o<i)return-1}return 0},U.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome;e=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return t?"IE":n?"Firefox":r?"Opera":o?"Chrome":e?"Safari":"Unkown"},U.isTestEnv=function(e){return!(!e.startsWith("wss")||-1===e.indexOf("test")||!e.endsWith("ws"))},U.getLogLevel=function(e){return p[e]},U.getUint64=function(e,t,n){var r=n.getUint32(e,t);n=n.getUint32(e+4,t),e=t?r+Math.pow(2,32)*n:Math.pow(2,32)*r+n;return Number.isSafeInteger(e)||console.warn(e,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),e},U.decodeTokenExpire=function(e){try{var t,n=Uint8Array.from(I.base64decode(e),(function(e){return e.charCodeAt(0)})),r=new DataView(n.buffer);return 0<(t="function"==typeof r.getBigInt64?r.getBigUint64(0):U.getUint64(0,!1,r))?Number(t):Number(r.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},U.bin2hex=function(e){for(var t,n="",r=0,o=(e+="").length;r<o;r++)n+=(t=e.charCodeAt(r).toString(16)).length<2?"0"+t:t;return n},U.getCanvasFingerprint=function(e){var t=document.createElement("canvas"),n=((n=t.getContext("2d")).textBaseline="top",n.font="14px 'Arial'",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText(e,2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(e,4,17),t.toDataURL().replace("data:image/png;base64,",""));e=atob(n);return this.bin2hex(e.slice(-16,-12))},U.generateUUID=function(e){var t,n;return 0===(e=void 0===e?0:e)?n=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),n||(t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(36)})),0===e?(e=this.getCanvasFingerprint("hello, zego")+n.slice(8),localStorage.setItem("z_deviceID",e)):wx.setStorageSync("z_deviceID",n),n)},U.getNetType=function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()},U.getNetTypeNum=function(){var e;return e=-1<(e=((null==(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection)?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()).indexOf("4G")?a.NT_4G:-1<e.indexOf("2G")?a.NT_2G:-1<e.indexOf("3G")?a.NT_3G:-1<e.indexOf("WIFI")?a.NT_WIFI:-1<e.indexOf("LINE")?a.NT_LINE:-1<e.indexOf("NONE")?a.NT_NONE:a.NT_UNKNOWN},U.encryptStores=function(e,t){return L.a.encrypt(e,t).toString()},U.decryptStores=function(e,t){try{return L.a.decrypt(e,t).toString(P.a)}catch(e){return""}},U.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(D[e.getMonth()+1]||e.getMonth()+1)+"/",(D[e.getDate()]||e.getDate())+" ",(D[e.getHours()]||e.getHours())+":",(D[e.getMinutes()]||e.getMinutes())+":",D[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},U.isRightServerForAppid=function(e,t){return!(e=((null==e?void 0:e.replace("webliveroom","-"))||"").split("-")||[])[1]||!/\d*/i.test(e[1])||+e[1]==t},U);function U(){}var j,x={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],ONLINE:!1},B={product:"rtc_web",importLevel:i.H,levels:[0,10,100,1e3],bps:32e3},q="init",G="0c9e6e0f8c0a8f4e",z="z_net_access_servers",V="z_appconfig",F={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],primaryDomains:["zego.im","coolzcloud.com","zegocloud.com"],mode:"online",modeNo:E.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1};Z.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},Z.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},t=Z;function Z(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}function K(e){return e}function Y(e){return e}function W(e){return e}function X(e){return e}(ke=j=j||{}).RTM_CONSTRUCTOR="zm.0",ke.RTM_BIND_WINDOW_LISTENER="zm.wl",ke.RTM_SET_LOG_CONFIG="zm.slf",ke.RTM_SET_DEBUG_VERBOSE="zm.sdv",ke.RTM_LOGIN_ROOM="zm.lg",ke.RTM_LOGOUT_ROOM="zm.lo",ke.RTM_GET_SETTING_UNIFY="zm.gsu",ke.RTM_FETCH_APP_CONFIG="zm.fac",ke.RTM_HANDLE_LOG_UPLOAD="zm.hlu",ke.RTM_SET_ACCESS="zm.sa",ke.RTM_CREATENETAGENT="zm.cna",ke.RTM_GETSTOREAPPCONFIG="zm.gsac",ke.LIVEROOMMODULES_BINDROOMHANDLER="zm.lrm.brh",ke.RTM_SET_CLOUD_SETTING_URLS="zm.scsu",ke.RTM_CLOUD_REPORT_NOTIFY="zm.crn",ke.RTM_ON="zm.on",ke.RTM_OFF="zm.off",ke.RTM_RENEWTOKEN="zm.rntk",ke.RTM_RESETTOKENTIMER="zm.rstt",ke.RTM_ENABLE_MULTI_ROOM="zm.emr",ke.RTM_SEND_PB="zm.spb",ke.RTM_GET_HEADER="zm.gh",ke.ROOM_LOGIN_ROOM="zm.rm.lg",ke.ROOM_TRY_LOGIN="zm.rm.tl",ke.ROOM_OPEN_HANDLER="zm.rm.op",ke.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",ke.ROOM_CLOSEHANDLER="zm.rm.clh",ke.ROOM_LOGOUT="zm.rm.lo",ke.ROOM_RESET_ROOM="zm.rm.rr",ke.ROOM_DISCONNECT="zm.rm.dcn",ke.ROOM_KICK_OUT="zm.rm.kco",ke.ROOM_STATUS_CALLBACK="zm.rm.scb",ke.ROOM_RESETTOKEN_TIMER="zm.rm.rst",ke.ROOM_HANDLE_Hb_LOGOUT="zm.hhl",ke.HEARTBEAT_START="zm.hb.st",ke.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",ke.HEARTBEAT_RESET="zm.hb.rst",ke.SERVICE_START_CHECK="zm.sc.0",ke.SERVICE_STOP_CHECK="zm.sc.1",ke.SERVICE_PUSH="zm.sv.ps",ke.SERVICE_SEND="zm.sv.sd",ke.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH="zm.rrh.hlf",ke.RETRYROOMHANDLER_HANDLE_ERROR="zm.rrh.he",ke.USER_LOGIN_RSP="zm.us.lgr",ke.USER_FETCH_USER="zm.us.ftu",ke.USER_FETCH_USER_RSP="zm.us.urp",ke.USER_USER_PUSH="zm.us.uph",ke.USER_MERGE_SEQ="zm.us.mg",ke.USER_MERGE_TIMEOUT="zm.us.mto",ke.USER_MERGE="zm.us.mg",ke.USER_HB_PATCH="zm.us.pt",ke.STATE_ACTION="zm.st.at",ke.ON_LISTENER="ON_LISTENER",ke.OFF_LISTENER="zm.st.ofls",ke.LIVEROOMHANDLER_SENDMESSAGE="zm.lrh.sm",ke.LIVEROOMHANDLER_HANDLEPUSH="zm.lrh.hp",ke.LIVEROOMHANDLER_HANDLESWITCHPUSH="zm.lrh.hsp",ke.LIVEROOMHANDLER_PUSHUSERUPDATE="zm.lrh.puu",ke.LIVEROOMHANDLER_PUSHKICKOUT="zm.lrh.pk",ke.LIVEROOMHANDLER_GETSTREAMLIST="zm.lrh.gs",ke.LIVEROOMHANDLER_LOGIN="zm.lrh.lgi",ke.LIVEROOMHANDLER_FETCH_USER_LIST="zm.lrh.ful",ke.LIVEROOMHANDLER_LOGOUT="zm.lrh.lgo",ke.LIVEROOMHANDLER_SENDSTREAMUPDATE="zm.lrh.sru",ke.LIVEROOMHANDLER_RENEW_TOKEN="zm.lrh.rt",ke.LIVEROOMHANDLER_SENDSIGNALCMD="zm.lrh.ssc",ke.LIVEROOMHANDLER_SENDBIGROOMMESSAGE="zm.lrh.sbrm",ke.LIVEROOMHANDLER_SENDCUSTOMCOMMAND="zm.lrh.scc",ke.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE="zm.lrh.frm",ke.LIVEROOMHANDLER_SENDRELIABLEMESSAGE="zm.lrh.srm.0",ke.LIVEROOMHANDLER_SENDROOMMSG="zm.lrh.srm.1",ke.LIVEROOMHANDLER_HANDLEDISCONNECTED="zm.lrh.hd",ke.LIVEROOMHANDLER_HANDLEBROKEN="zm.lrh.hb",ke.LIVEROOMHANDLER_HANDLECONNECTED="zm.lrh.hc",ke.LIVEROOMHANDLER_RESET="zm.lrh.r.0",ke.TRACER_INIT="zm.tc.ii",ke.TRACER_LOAD_SCRIPT="zm.tc.ls";var J={kZMInitSetting:{event:"/sdk/init",error:{kInvalidParamError:N.INPUT_PARAM},system_info:Y,servers:function(e){return e},is_from_cache:X,project:Y,liveroom_version:Y,biz_type:W,lua_md5:Y,sev_env:Y,use_na:W},kZMListener:{event:"listener"},kZMRoomContext:{event:"room_context"},kZMHB:{event:"room_hb"},kZMSetDebug:{event:"/sdk/set_debug",debug:Y},kZMSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:N.INPUT_PARAM},log_level:function(e){return e},remote_log_level:Y,log_url:Y},kZMOnListener:{event:"/sdk/on_listener",listener:Y,error:{INPUT_PARAM:N.INPUT_PARAM}},kZMOffListener:{event:"/sdk/off_listener",listener:Y,error:{INPUT_PARAM:N.INPUT_PARAM}},kZMLoginRoom:{event:"/sdk/login",room_id:Y,room_sid_string:Y,user_state_update:W,max_member_cnt:W,message:Y,token:Y,svr_env:Y,server:Y,try_cnt:W,room_mode:W,role:W,audience_create_room:W,liveroom_sid_string:Y,error:{ROOM_ID_NULL:N.ROOM_ID_NULL,INPUT_PARAM:N.INPUT_PARAM,ROOM_ID_TOO_LONG:N.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:N.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:N.USER_ID_NULL,USER_ID_TOO_LONG:N.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:N.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:N.USER_NAME_NULL,USER_NAME_TOO_LONG:N.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:N.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:N.LOGIN_TIMEOUT,INNER_ERROR:N.ROOM_INNER_ERROR,NETWORK_BROKEN:N.NETWORK_BROKEN}},kZMSubLogin:{event:"/sdk/sublogin",server:Y,room_id:Y,room_sid_string:Y},kZMSwitchLogin:{event:"/zpush/login",sdk_zpush_sessionid_string:Y},kZMLiveRoomEnter:{event:"/liveroom/enter"},kZegoLiveRoomConnect:{event:"/liveroom/connect"},kZMReNewToken:{event:"/sdk/renew_token",error:{INPUT_PARAM:N.INPUT_PARAM,NOT_LOGIN:N.NOT_LOGIN},token:Y},kZMHbTimeout:{event:"/zpush/hb_timeout"},kZMLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:N.INPUT_PARAM,ROOM_NOT_EXIST:N.ROOM_NOT_EXIST},room_id:Y,room_sid_string:Y,is_multi:X,is_send_cmd_net:X,liveroom_sid_string:Y},kZMSwitchLogout:{event:"/switch/logout_user",error:{INPUT_PARAM:N.INPUT_PARAM,ROOM_NOT_EXIST:N.ROOM_NOT_EXIST}},kZMQuitLiveroom:{event:"/liveroom/quit",error:{INPUT_PARAM:N.INPUT_PARAM,ROOM_NOT_EXIST:N.ROOM_NOT_EXIST},is_multi:X,liveroom_sid_string:Y,sdk_zpush_sessionid_string:Y},kZMMultiLogout:{event:"/zpush/multi_logout_user",error:{INPUT_PARAM:N.INPUT_PARAM,ROOM_NOT_EXIST:N.ROOM_NOT_EXIST}},kZMReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:N.ROOM_ID_NULL,ROOM_DISCONNECT:N.NETWORK_BROKEN},server:Y,try_cnt:W},kZMTempBroken:{event:"/liveroom/tempbroken"},kZMReconnect:{event:"/sdk/reconnect",room_broken_time:W},kZMSdkDisconnect:{event:"/sdk/disconnect"},kZMKickout:{event:"/sdk/kickout",user_id:Y,kickout_reason:W,need_relogin:W,error:{}},kZMRoomHB:{event:"/liveroom/hb",room_id:Y,room_sid_string:Y,interval:W,stream_seq:W,server_user_seq:W,error:{NOT_LOGIN:N.NOT_LOGIN,HB_TIMEOUT:N.TIMEOUT}},kZMRoomRecvUserUpdateInfo:{event:"/liveroom/recv_user_update_info",user_list_seq:W,update_user:K,error:{ROOM_NOT_EXIST:N.ROOM_NOT_EXIST}},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"/sdk/enable_multi_room",is_multi:X,error:{kInvalidParamError:N.INPUT_PARAM,kAlreadyLoginError:N.ALREADY_LOGIN}},kZMCloudSettingCache:{event:"/cloud_setting/cache",files:K},kZMCloudSettingRefresh:{event:"/cloud_setting/refresh",request_kv:K,files:K},kZMCloudSettingRequest:{event:"/cloud_setting/request",request_detail:K,files:K},kZMGetCurrentUserList:{event:"/liveroom/get_current_user_list",user_index:W,is_time_ascend:X,use_na:W},kZegoConnConnect:{event:"/zegoconn/connect",connect_id:Y,request_count:W,events:K},kZegoConnDisConnect:{event:"/zegoconn/disconnect",connect_id:Y,url:Y,connect_duration:W},kZegoConnDispatch:{event:"/zegoconn/auto_dispatch",domain_list:function(e){return e}},kZegoRequest:{event:"/zegoconn/request",req_location:K},kZegoSDKConfigInit:{event:"/sdk_config/init",trigger_reason:K,try_count:W},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",service_no:W,proxy_link_sources:W,recv_time:W,connect_stream:W},kZegoSDKProxyBroken:{event:"/zegoconn/proxy_broken",service_no:W},kZegoSDKProxyDisconnect:{event:"/zegoconn/proxy_disconnect",service_no:W}};Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(ne,$=t),ne.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var n=(new Date).getTime(),r=void 0;t&&"number"==typeof t?r=1e3*t:"string"==typeof e&&["03","04"].includes(e.substring(0,2))&&(r=1e3*H.decodeTokenExpire(e.substring(2))-n),r&&this.roomHandler.resetTokenTimer(r-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},ne.prototype.initRoom=function(e,t,n,r,o,i,s){this.roomHandler=e,this.roomID=t,this.renewLocalToken(n),this.user=r,this.server=o,this.serverBak=i||o,this.config=s},ne.prototype.active=function(e){var t=this,n=(void 0===e&&(e=!1),this.logger.info(j.ROOM_LOGIN_ROOM+" retry call "+(null==(n=this.room)?void 0:n.roomID)),(null!=(n=this.loginRoomCallback)&&n.success?J.kZMSubLogin:J.kZMReLoginRoom).event);if(this.subLoginSpan||(this.subLoginSpan=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.roomID},{key:n,par:this.roomID},n,!0),this.spanKey=n),this.roomHandler.setRunState(o.trylogin),this.room.isMulti&&(null==(n=this.stateCenter.roomModulesList.find((function(e){return!e.isMulti})))?void 0:n.runState)!==o.login)this.logger.info(j.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.logger.info(j.ROOM_LOGIN_ROOM+" has actived, ignore");else{var r=this.stateCenter.networkState==s.offline;if(r){if(this.logger.info(j.ROOM_LOGIN_ROOM+" check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return void this.logger.warn(j.ROOM_LOGIN_ROOM+" network is broken, stop retry")}else this.retryNetCount=0;this.isOverTime?this.logger.info(j.ROOM_LOGIN_ROOM+" retry over time, stop retry"):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n),this.retryTimer=setTimeout((function(){t.roomHandler.login(t.retryActiveCount%2==1?t.server:t.serverBak,t.roomID,t.token,t.user,t.config,(function(e){t.stateCenter.networkState=s.online,t.handleLoginFinish(e)}),(function(e,n){t.handleLoginFinish(!1,e,n)})),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,r?t.retryNetCount++:t.retryActiveCount++}),e?0:1e3*this.retryActiveInterval))}},ne.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.logger.info(j.ROOM_LOGIN_ROOM+" start max timer"),this.maxTimer=setTimeout((function(){e.logger.info(j.ROOM_LOGIN_ROOM+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,N.LOGIN_TIMEOUT),e.subLoginSpan&&(e.stateCenter.reporter.spanEnd({key:e.spanKey,par:e.roomID},{error:N.LOGIN_TIMEOUT.code,message:N.LOGIN_TIMEOUT.msg}),e.subLoginSpan=null),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(N.LOGIN_TIMEOUT),e.roomHandler.disconnectedHandle(N.LOGIN_TIMEOUT),e.resetCallBack())}),1e3*this.RETRY_MAX_TIME))},ne.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},ne.prototype.onactive=function(e,t){},ne.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){t=void 0;var n=void 0,r=void 0,i=(this.stateCenter.useNetAgent?(t=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128"],n=["40001","40100"],r=["201002","30019"]):(t=["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"],n=["1100040001","1100040100"]),e.code+"");if(this.stateCenter.useNetAgent){if(10015===e.code)return this.room.retryConnect(),!0;if(40001<=e.code&&e.code<=40100||50200<=e.code&&e.code<=50299||null!=r&&r.includes(i))return this.room.resetSessionInfo(),!0}return!t.includes(i)&&(!!n.includes(i)||this.room.lastRunState==o.login&&(this.logger.warn(j.RETRYROOMHANDLER_HANDLE_ERROR+" reset"),this.room.sessionID="0",this.invalid(),!0))}return!0},ne.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},ne.prototype.loginFail=function(e){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,e),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(e),this.roomHandler.disconnectedHandle(e),this.resetCallBack())},ne.prototype.handleLoginFinish=function(e,t,n){this.logger.info(j.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH+" "+e+" "+JSON.stringify(t)),t?(this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{error:t.code,message:t.msg}),this.subLoginSpan=null),this.handleError(t,n)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.roomHandler.disconnectedHandle(t),this.resetCallBack()))):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{room_id:this.roomID,room_sid_string:null==(n=this.room)?void 0:n.roomSessionID}),this.subLoginSpan=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.resetCallBack()))},ne.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},ne.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var Q,$,ee,te=ne;function ne(e,t,n){var r=$.call(this,e,t)||this;return r.logger=e,r.stateCenter=t,r.room=n,r.retryNetCount=0,r.retryNetMaxTimes=3,r.spanKey="",r.loginRoomCallback={},r}(ke=ee=ee||{}).NOT_EMPTY="NOT_EMPTY",ke.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",ke.TYPE_STRING="TYPE_STRING",ke.TYPE_INTEGER="TYPE_INTEGER",ke.TYPE_OBJECT="TYPE_OBJECT",ke.MAX_LENGTH_10="MAX_LENGTH_10",ke.MAX_LENGTH_64="MAX_LENGTH_64",ke.MAX_LENGTH_100="MAX_LENGTH_100",ke.MAX_LENGTH_128="MAX_LENGTH_128",ke.MAX_LENGTH_256="MAX_LENGTH_256",ke.MAX_LENGTH_1024="MAX_LENGTH_1024";var re={error:{code:0,msg:"suc"}},oe={NOT_EMPTY:function(e,t,n,r,o){return void 0===t||""===t||null===t?(r.error(n+" "+e+" is empty"),o):re},ILLEGAL_CHARACTERS:function(e,t,n,r,o){return H.checkIllegalCharacters(t)?re:(r.error(n+" "+e+" contains illegal characters"),o)},TYPE_STRING:function(e,t,n,r,o){return"string"!=typeof t?(r.error(n+" "+e+" must be string"),o):re},TYPE_INTEGER:function(e,t,n,r,o){return H.checkInteger(t,!1)?re:(r.error(n+" "+e+"  must be integer number"),o)},TYPE_OBJECT:function(e,t,n,r,o){return t&&"object"==typeof t?re:(r.error(n+" "+e+"  must be object"),o)},MAX_LENGTH_10:function(e,t,n,r,o){return 10<t.length?(r.error(n+" "+e+" is too long"),o):re},MAX_LENGTH_64:function(e,t,n,r,o){return 64<t.length?(r.error(n+" "+e+" is too long"),o):re},MAX_LENGTH_100:function(e,t,n,r,o){return 100<t.length?(r.error(n+" "+e+" is too long"),o):re},MAX_LENGTH_128:function(e,t,n,r,o){return 128<t.length?(r.error(n+" "+e+" is too long"),o):re},MAX_LENGTH_256:function(e,t,n,r,o){return 256<t.length?(r.error(n+" "+e+" is too long"),o):re},MAX_LENGTH_1024:function(e,t,n,r,o){return 1024<t.length?(r.error(n+" "+e+" is too long"),o):re}};Object.defineProperty(se.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,h.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,h.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,h.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(se.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),se.prototype.getRequestId=function(){return this.idName+"-"+d()},se.prototype.actionListener=function(e){for(var t,n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];["getAnchorInfo","HBResponse","roomOnlineUserCountUpdate","roomLoginResponse"].includes(e)||e.startsWith("_")||!this.listenerList[e]||((t=this.reporter.createSpan(i.H,{key:J.kZMListener.event},{key:""},J.kZegoListener.event)).setAttributes({listener:e,listener_params:JSON.stringify(r)}),t.end()),["roomStateChanged","tokenWillExpire"].includes(e)&&this.logger.info("zm.al "+e+" "+JSON.stringify(r)),this.listenerList[e]&&this.listenerList[e].forEach((function(t){try{t.apply(void 0,r)}catch(t){n.logger.error(j.STATE_ACTION+" ",e," ",JSON.stringify(t))}}))},se.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(j.ON_LISTENER+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(j.ON_LISTENER+" event "+e+" no found"),!1)},se.prototype.offListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(j.OFF_LISTENER+" listener callBack must be funciton"),!1):(-1!==this.listenerList[e].indexOf(t)&&(this.listenerList[e]=this.listenerList[e].filter((function(e){return e!==t}))),!0):(this.logger.error(j.OFF_LISTENER+" event "+e+" no found"),!1)},Object.defineProperty(se.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),se.prototype.proxyRes=function(e,t,n){return{interResolve:function(n){t(n),e.end()},interReject:function(t,r){var o;void 0===r&&(r=""),(o=t.code<2e9&&1e9<t.code?H.decodeServerError(t.code,t.msg):{code:t.code,message:t.msg})&&e.setAttributes({error:o.code,message:o.message+r}),e.end(),n({errorCode:t.code})}}};var ie=se;function se(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this.appConfigFetched=!1,this.requestList={},this.mode=E.MODE_ONLINE,this.connectState="connected",this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_netAppConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=s.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=F.modeNo}ce.prototype.init=function(e){var t=this,n=e.body.hearbeat_interval<3e3?3e3:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){t.start(n)}),n),this.initCount++},ce.prototype.start=function(e){var t,n=this,r=(this.logger.info(j.HEARTBEAT_START+" call"),this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},J.kZMRoomHB.event));this.room.isLogin()?3<++this.tryHeartbeatCount?(this.logger.error(j.HEARTBEAT_START+" come to try limit"),this.stateCenter.reporter.setError(r,J.kZMRoomHB.error.HB_TIMEOUT),this.hbLogout(N.HEARTBEAT_TIMEOUT),this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},J.kZMHbTimeout.event).end()):((this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).heartBeat(t=function(e,t){var o=e.body&&e.body.err_code;e.header&&e.body?0!==o&&(o=H.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message),r.setAttributes({error:o.code,message:o.message+e.body.err_code})):r.setAttributes({error:(0<e.code?e:N.ROOM_INNER_ERROR).code,message:e.msg||N.ROOM_INNER_ERROR}),n.handleHeartbeatRsp(e,t),0===(null==(o=null==e?void 0:e.body)?void 0:o.err_code)&&r.setAttributes({interval:J.kZMRoomHB.interval(null==(t=null==e?void 0:e.body)?void 0:t.hearbeat_interval),stream_seq:J.kZMRoomHB.stream_seq(null==(o=null==e?void 0:e.body)?void 0:o.stream_seq),server_user_seq:J.kZMRoomHB.server_user_seq(null==(t=null==e?void 0:e.body)?void 0:t.server_user_seq)}),r.end()},t,this.room),this.heartbeatInterval=e,t=this.heartbeatInterval,2<=this.initCount?(t=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):t=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){n.start(n.heartbeatInterval)}),t),this.logger.info(j.HEARTBEAT_START+" call success")):(this.logger.error(j.HEARTBEAT_START+" state error"),this.stateCenter.reporter.setError(r,J.kZMRoomHB.error.NOT_LOGIN))},ce.prototype.handleHeartbeatRsp=function(e,t){if(e.body&&e.body.err_code&&0!==e.body.err_code)return this.logger.error(j.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.err_code),1000000152==e.body.err_code?void this.hbLogout(N.HEARTBEAT_TIMEOUT):void this.hbLogout(H.getServerError(e.body.err_code));e.header&&e.body?((this.tryHeartbeatCount=0)!==e.body.hearbeat_interval&&(this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<3e3&&(this.heartbeatInterval=3e3)),this.heartbeatRspNotiFy(e,this.room.roomID),this.logger.info(j.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(j.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(e)+", seq = "+t),this.hbLogout(e))},ce.prototype.heartbeatRspNotiFy=function(e,t){},ce.prototype.hbLogout=function(e){},ce.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(j.HEARTBEAT_RESET+" call success")};var ae=ce;function ce(e,t,n,r,o,i){this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.liveRoomHandler=o,this.room=i,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}le.prototype.resetTokenTimer=function(e){var t=this;this.logger.info(j.ROOM_RESETTOKEN_TIMER+"  call: "+(e=2147483647<(e=(e-=3e4)<0?0:e)?2147483647:e)),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},le.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},le.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},le.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},le.prototype.reportLogoutSpan=function(e){var t,n=(this.stateCenter.isMultiRoom?J.kZMQuitLiveroom:J.kZMSwitchLogout).event;n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLogoutRoom.event,par:this.room.roomID},{key:""},n),e&&this.stateCenter.useNetAgent&&"0"===this.liveRoomHandler.roomServicer.zPushSid&&(this.liveRoomHandler.roomServicer.zPushSid=null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()),e=this.stateCenter.useNetAgent?e?null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.zPushSid:null==(t=null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.switchSessionID)?void 0:t.toString():void 0;n.setAttributes({room_id:J.kZMLogoutRoom.room_id(null==(t=this.room)?void 0:t.roomID),room_sid_string:J.kZMLogoutRoom.room_sid_string(null==(t=this.room)?void 0:t.roomSessionID),liveroom_sid_string:J.kZMQuitLiveroom.liveroom_sid_string(null==(t=this.room)?void 0:t.sessionID),sdk_zpush_sessionid_string:J.kZMQuitLiveroom.sdk_zpush_sessionid_string(e)}),n.end()},le.prototype.resetRoom=function(e){var t,n=this;(e=(this.logger.info(j.ROOM_RESET_ROOM+" call"),1<this.stateCenter.roomModulesList.length&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),"0"===this.room.sessionID||this.room.runState===o.logout||this.room.isDisConnect()||(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).logout(this.room,t=function(e){n.handleLogoutRsp(e,!n.room.isMulti)},t),this.reportLogoutSpan(e),this.setRunState(o.logout),this.room.sessionID="0",this.room.roomSessionID="0",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent?null!=(t=this.liveRoomHandler)&&t.reset():this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==n.room})),this.stateCenter.roomModulesList[0]))&&(e.isMulti=!1,e.runState!==o.login&&e.roomTryHandler&&(e.roomTryHandler.startMaxTime(),e.roomTryHandler.active())),this.stateCenter.isMultiRoom&&0===this.stateCenter.roomModulesList.length&&(this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLogoutRoom.event,par:this.room.roomID},{key:""},J.kZMMultiLogout.event).end(),this.liveRoomHandler.roomServicer.zPushSid="0"),this.logger.info(j.ROOM_RESET_ROOM+" call success")},le.prototype.resetRoomCallBack=function(){},le.prototype.loginSuccessCallBack=function(e,t){},le.prototype.handlePushKickout=function(e,t,n){var r,s,a=this;this.logger.info(j.ROOM_KICK_OUT+"  call "+JSON.stringify(e)),n||this.room.sessionID===e.header.session_id||this.room.sessionID===e.body.session_id?(n=H.getKickoutError(e.body.reason||(null==(n=e.body)?void 0:n.kickout_reason),this.stateCenter.useNetAgent),(r=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},J.kZMKickout.event)).setAttributes({error:null==(s=N[n.name||"ROOM_INNER_ERROR"])?void 0:s.code,message:n.message,kickout_reason:J.kZMKickout.kickout_reason((null==(s=e.body)?void 0:s.reason)||(null==(s=e.body)?void 0:s.kickout_reason)),need_relogin:J.kZMKickout.need_relogin(null==(s=null==e?void 0:e.body)?void 0:s.need_relogin)}),r.end(),(s=this.room.roomTryHandler)?(s.onactive=function(e,t){a.disconnectedHandle(t),a.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin?(this.room.sessionID="0",s.startMaxTime(),s.active()):(this.setRunState(o.logout),this.resetRoom(t),r={},e&&e.body.custom_reason?r.custom_kickout_message=e.body.custom_reason:n.name&&N[n.name]&&(s=e.body.reason||e.body.kickout_reason,r.custom_kickout_message=N[n.name].msg+"; kickout reason: "+s),n.name&&N[n.name]?this.disconnectedHandle(N[n.name],{extendedData:JSON.stringify(r),isKickout:!0}):this.disconnectedHandle(N.ROOM_INNER_ERROR,{extendedData:JSON.stringify(r),isKickout:!0}),this.stateCenter.actionListener("_kickout",{code:N.MANUAL_KICKOUT.code,msg:N.MANUAL_KICKOUT.msg+e.body.reason||e.body.kickout_reason}))):this.logger.info(j.ROOM_KICK_OUT+" try handler no found")):this.logger.info(j.ROOM_KICK_OUT+" session id wrong, ignore")},le.prototype.handleHbLogout=function(e){var t=this,n=this.room.roomTryHandler;n&&(n.onactive=function(e,n){t.disconnectedHandle(n)},[N.HEARTBEAT_TIMEOUT,N.SOCKET_CLOSE].includes(e)||[105,152,2001].includes(null==e?void 0:e.code)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(n.startMaxTime(),n.active()):[N.TIMEOUT].includes(e)?this.logger.warn(j.ROOM_HANDLE_Hb_LOGOUT+" timeout"):(this.logger.warn(j.ROOM_HANDLE_Hb_LOGOUT+" unexpected error: "+JSON.stringify(e)),n.stopMaxTime(),n.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},le.prototype.onDisconnect=function(e){var t=this;(e=(this.logger.error(j.ROOM_DISCONNECT+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code||"number"==typeof e.code&&(e.code<2e9&&1e9<e.code||e.code<1e6?H.decodeServerError(e.code,e.msg):(e.code,e.msg)),H.unregisterCallback(J.kZMReLoginRoom.event,this.stateCenter.reportList),this.room.roomTryHandler))?(e.onactive=function(e,n){n&&0!==n.code?t.roomStateHandle("DISCONNECTED",T.ReconnectFailed,n):t.roomStateHandle("CONNECTED",T.Reconnected,n)},e.startMaxTime(),e.active()):this.logger.error(j.ROOM_DISCONNECT+" try handler no found")},le.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",T.Logining,e)},le.prototype.disconnectedHandle=function(e,t){var n;e&&0!==e.code?(this.stopTokenTimer(),n=null!=t&&t.isKickout?T.Kickout:T.ReconnectFailed,this.roomStateHandle("DISCONNECTED",n,e,(null==t?void 0:t.extendedData)||e.msg)):this.roomStateHandle("CONNECTED",T.Reconnected,e,null==t?void 0:t.extendedData)},le.prototype.roomStateHandle=function(e,t,n,r,o){if(!t||t!=T.Reconnecting||(this.reconectTimes++,1!=this.reconectTimes)){this.logger.info(j.ROOM_STATUS_CALLBACK+" "+e+" "+JSON.stringify(n)),["CONNECTED","DISCONNECTED"].includes(e)&&(this.reconectTimes=0);var s,a,c=0;switch(t=(t=(t=t&&[T.LoginFailed,T.ReconnectFailed].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.fail?T.LoginFailed:T.ReconnectFailed:t)&&[T.Logined,T.Reconnected].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.success?T.Logined:T.Reconnected:t)&&[T.Logining,T.Reconnecting].includes(t)?null!=(a=this.room.roomTryHandler)&&a.loginRoomCallback.success?T.Logining:T.Reconnecting:t){case T.Reconnecting:s=J.kZMTempBroken,this.tempBrokenTime=(new Date).getTime();break;case T.ReconnectFailed:s=J.kZMSdkDisconnect;break;case T.Reconnected:s=J.kZMReconnect,c=(new Date).getTime()-this.tempBrokenTime}this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,n?n.code:0,r,o),o||(this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,n?n.code:0,r),this.stateCenter.actionListener("roomStateChanged",this.room.roomID,t,n?n.code:0,r)),s&&(a=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:""},s.event),t===T.Reconnected?a.setAttributes({room_broken_time:J.kZMReconnect.room_broken_time(c)}):a.setAttributes({error:(null==n?void 0:n.code)||0,message:r||""}),a.end()))}},le.prototype.login=function(e,t,n,r,s,a,c){this.logger.info(j.ROOM_LOGIN_ROOM+" call:"+t+" "+n),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,t,"",r.userID,"",this.stateCenter.sdKVersion),s&&(s.userUpdate&&"boolean"==typeof s.userUpdate&&(this.stateCenter.userStateUpdate=s.userUpdate),s.maxMemberCount&&"number"==typeof s.maxMemberCount&&(this.room.maxMemberCount=s.maxMemberCount)),this.stateCenter.configOK?(this.room.runState!==o.trylogin&&this.setRunState(o.trylogin),this.room.roomID=t,this.room.token=n,this.room.thirdToken=n,this.stateCenter.idName=r.userID,this.stateCenter.nickName=r.userName||r.userID,this.loginCallback.success=a,this.loginCallback.fail=c,this.server=e,this.stateCenter.reporter.spanSetAttributes({key:J.kZMSubLogin.event,bak_key:J.kZMReLoginRoom.event,par:t},{server:this.stateCenter.useNetAgent?void 0:J.kZMSubLogin.server(this.server)}),this.liveRoomLoginKey=this.room.isMulti?J.kZMLiveRoomEnter:J.kZMSwitchLogin,this.stateCenter.reporter.createSpan(i.H,{key:J.kZMSubLogin.event,bak_key:J.kZMReLoginRoom.event,par:this.room.roomID},{key:this.liveRoomLoginKey.event,par:this.room.roomID},this.liveRoomLoginKey.event,!0),this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(j.ROOM_LOGIN_ROOM+" call success")):(this.logger.error(j.ROOM_LOGIN_ROOM+" init sdk wrong"),c(N.INIT))},le.prototype.tryLogin=function(e){var t,n=this;if(this.room.runState!==o.trylogin)this.logger.error("zb.rh.tl state error");else if((0!==this.stateCenter.reportSeqList.login?J.kZMLoginRoom:J.kZMReLoginRoom).event,this.stateCenter.useNetAgent)this.room.isMulti&&this.room.isDisConnect()?this.logger.warn(j.ROOM_TRY_LOGIN+" liveroom is not connected"):(i=function(e,t){n.handleLoginRsp(e,t)},null!=(t=this.liveRoomHandler)&&t.isUaConnect()?(this.stateCenter.reporter.spanSetAttributes({key:this.liveRoomLoginKey.event,par:null==(t=this.room)?void 0:t.roomID},{sdk_zpush_sessionid_string:null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()}),this.liveRoomHandler.login(this.room,i,i)):(this.tryLoginTimer=setTimeout((function(){n.logger.info(j.ROOM_TRY_LOGIN+" over time no response, login timeout"),n.loginCallback.fail&&n.loginCallback.fail(J.kZMLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.warn(j.ROOM_TRY_LOGIN+" ua is not connected")));else{if(this.service.isDisConnect())try{if(this.service.closeSocket(),this.logger.debug(j.ROOM_TRY_LOGIN+" new websocket"),!this.stateCenter.useNetAgent&&!H.isRightServerForAppid(e,this.stateCenter.appid))throw this.logger.error(j.ROOM_TRY_LOGIN+" the server does not match the appID"),new Error("The server does not match the appID");this.service.createSocket(e);var r=Date.now();this.service.openHandler((function(){var e;n.stateCenter.reporter.spanSetAttributes({key:n.liveRoomLoginKey.event,par:null==(e=n.room)?void 0:e.roomID},{connect_consume:Date.now()-r}),n.openHandler()})),this.service.closeHandler((function(e){n.logger.error(j.ROOM_TRY_LOGIN+" close "+JSON.stringify(e.code||e)),n.service.closeSocket(),n.closeHandler(e)})),this.service.errorHandler((function(e){n.logger.error(j.ROOM_TRY_LOGIN+" error "+JSON.stringify(e.code||e)),n.service.closeSocket(),n.closeHandler(e)}))}catch(e){this.logger.error(j.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(j.ROOM_TRY_LOGIN+" use current websocket and sent login");var i=function(e,t){n.handleLoginRsp(e,t)};this.service.login(this.room,i,i)}this.tryLoginTimer=setTimeout((function(){n.logger.info(j.ROOM_TRY_LOGIN+" over time no response, login timeout"),n.loginCallback.fail&&n.loginCallback.fail(J.kZMLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(j.ROOM_TRY_LOGIN+" call success")}},le.prototype.openHandler=function(){function e(e,n){t.handleLoginRsp(e,n)}var t=this;this.logger.info(j.ROOM_OPEN_HANDLER+" websocket.onpen call"),this.service.onPush(),this.service.login(this.room,e,e)},le.prototype.handleLoginRsp=function(e,t){this.logger.info(j.ROOM_HANDLE_LOGINRSP+" seq: "+t+" "+JSON.stringify(e)),(0!==this.stateCenter.reportSeqList.login?J.kZMLoginRoom:J.kZMReLoginRoom).event,this.room.runState!==o.trylogin?this.logger.error(j.ROOM_HANDLE_LOGINRSP+" state error"):e.header&&e.body?e.header.seq!==t&&0==this.room.isMulti?this.logger.error(j.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",t+"",",recv=",e.header.seq):0!==e.body.err_code?(this.logger.error(j.ROOM_HANDLE_LOGINRSP+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(j.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(e)):(this.logger.error(j.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(e)),this.handleLoginFail(e))},le.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=J.kZMLoginRoom.error.INNER_ERROR;e.header&&e.body?t=H.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{error:t.code,message:t.msg}),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},le.prototype.handleLoginSuccess=function(e){var t,n,r={},i=(this.room.roomSessionID!==e.body.room_session_id&&(this.room.loginTime=Date.now()),this.room.lastRunState),s=(this.setRunState(o.login),this.stateCenter.userid=e.body.user_id,this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id,(s={})[this.room.roomID]={room_sid_string:this.room.roomSessionID},this.stateCenter.reporter.setPublicPros(s),this.room.lvKey=e.body.lv_key,null==(s=null==e?void 0:e.body)?void 0:s.token_remain_time);this.stateCenter.configRoomAuth=0<s,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))&&(n=(t=(new Date).getTime())-e.body.ret_timestamp,this.stateCenter.local_time_deviation=n<5e3?0:n,n=0<s?1e3*s:1e3*H.decodeTokenExpire(this.room.token.substring(2))-t,this.resetTokenTimer(n-this.stateCenter.local_time_deviation)),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent||(e.body.config_info&&(s=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||e.body.config_info.log_level,this.logger.setRemoteLogLevel(s),r.log_level=s,""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),r.log_url=e.body.config_info.log_url)),e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,r.test_environment="true",this.stateCenter.debugCustom||(this.stateCenter.debug=!0))),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{server:this.stateCenter.useNetAgent?void 0:J.kZMSubLogin.server(this.server),room_id:null==(n=this.room)?void 0:n.roomID,room_sid_string:null==(s=this.room)?void 0:s.roomSessionID,zpush_sessionid_string:this.stateCenter.useNetAgent&&null!=(r=null==(t=null==e?void 0:e.header)?void 0:t.session_id)?r.toString():void 0,liveroom_sid_string:null==(n=null==e?void 0:e.body)?void 0:n.session_id}),this.resetTryLogin(),this.loginSuccessCallBack(i,e),this.roomStateHandle("CONNECTED",T.Logined,{code:0,msg:""}),this.loginCallback.success&&this.loginCallback.success(!0)},le.prototype.closeHandler=function(e){this.logger.error(j.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(e.code||e)),this.room.runState!==o.logout?this.room.runState===o.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?J.kZMLoginRoom.error.LOGIN_TIMEOUT:e)):this.room.runState===o.login&&(this.logger.info(j.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(J.kZMLoginRoom.error.NETWORK_BROKEN)):this.logger.info(j.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},le.prototype.logout=function(e,t){this.logger.info(j.ROOM_LOGOUT+" call"),this.room.runState===o.logout?this.logger.warn("zb.rh.lo at logout"):(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",T.Logout,{code:0,msg:""},void 0,t),this.stopTokenTimer(),this.logger.info(j.ROOM_LOGOUT+" call success"))},le.prototype.handleLogoutRsp=function(e,t){this.logger.info(j.ROOM_LOGOUT+" result=",e.body&&e.body.err_code?e.body.err_code:"-1"),this.stateCenter.useNetAgent&&t&&null!=(e=this.liveRoomHandler)&&e.closeRequest()};var ue=le;function le(e,t,n,r,o,i){this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.room=o,this.liveRoomHandler=i,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.server="",this.tempBrokenTime=0,this.reconectTimes=0,this.loginCallback={}}var he=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},pe=(de.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info(j.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(t)},de.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(j.USER_HB_PATCH+" call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeMap||(this.userSeqMergeMap={}),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},de.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},de.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn(j.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info(j.USER_FETCH_USER+" the first time call"))},de.prototype.fetchUserListWithPage=function(e,t){function n(e){r.handleFetchUserListRsp(e,t)}var r=this,o={user_index:e,sort_type:0},s=J.kZMGetCurrentUserList;this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:this.room.roomID},{key:s.event,par:this.room.roomID},s.event,!0).setAttribute("user_index",s.user_index(e)),(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchUserList(o,n,n,this.room)},de.prototype.handleFetchUserListRsp=function(e,t){var n=this;if(this.stateCenter.reporter.spanEnd({key:J.kZMGetCurrentUserList.event,par:this.room.roomID},{error:(null==(r=null==e?void 0:e.body)?void 0:r.err_code)||(null==e?void 0:e.code),message:(null==(r=null==e?void 0:e.body)?void 0:r.err_message)||(null==e?void 0:e.msg)}),e.body&&0!=e.body.err_code)this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(j.USER_FETCH_USER_RSP+" fetch error "+e.body.err_code);else if(e.header&&e.body){if(this.stateCenter.userStateUpdate){this.userTempList=he(he([],this.userTempList),e.body.user_baseinfos);var r=e.body.ret_user_index;if(r!=e.body.server_user_index)this.logger.info(j.USER_FETCH_USER_RSP+" fetch another page"),this.fetchUserListWithPage(r+1,t);else{this.userSeq=e.body.server_user_seq;for(var i=[],s=[],a=0;a<this.userTempList.length;a++){var c={userID:this.userTempList[a].id_name,userName:this.userTempList[a].nick_name,role:this.userTempList[a].role};i.push(c),s.push({idName:this.userTempList[a].id_name,nickName:this.userTempList[a].nick_name,role:this.userTempList[a].role})}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,s),t==o.login?(this.userList&&H.mergeUserList(this.logger,this.userList,i,(function(e,t){0!==e.length&&n.onUserStateUpdate(n.room.roomID,"ADD",e),0!==t.length&&n.onUserStateUpdate(n.room.roomID,"DELETE",t)})),this.userList=i):0!==(this.userList=i).length&&this.onUserStateUpdate(this.room.roomID,"ADD",i),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(j.USER_FETCH_USER_RSP+" call success user_list "+i+" count "+i.length)}}}else this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(j.USER_FETCH_USER_RSP+" fetch error "+e)},de.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(j.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq===e.body.user_list_seq)this.logger.warn(j.USER_USER_PUSH+" user_list_seq is the same with local seq");else if(this.userSeq+e.body.user_actions.length!==e.body.user_list_seq)this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else{this.userSeq=e.body.user_list_seq;for(var t=[],n=0;n<e.body.user_actions.length;n++){var r={action:e.body.user_actions[n].Action,idName:e.body.user_actions[n].IdName,nickName:e.body.user_actions[n].NickName,role:e.body.user_actions[n].Role,loginTime:e.body.user_actions[n].LoginTime};t.push(r)}this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,t);var o=[],i=[];t.forEach((function(e){1==e.action?o.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&i.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(o).filter((function(e){return!i.some((function(t){return t.userID==e.userID}))}))),0!==o.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"ADD",o),0!==i.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"DELETE",i),this.logger.info(j.USER_USER_PUSH+" call success")}else this.logger.info(j.USER_USER_PUSH+" userStateUpdate is false")},de.prototype.onUserStateUpdate=function(e,t,n){var r=this;n=n.filter((function(e){return e.userID!==r.stateCenter.idName}));0!=n.length&&(n=n.map((function(e){return{userID:e.userID,userName:e.userName}})),this.stateCenter.actionListener("roomUserUpdate",e,t,n))},de.prototype.mergeUserByUserSeq=function(e,t){var n=this;this.userSeqMergeMap||(this.logger.warn(j.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){n.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn(j.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},de.prototype.mergeUser=function(e){var t=this,n=(this.logger.info(j.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval,{}),r=((e=(e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){n[e.IdName]=e}))})),this.userSeqMergeMap=null,Object.values(n).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}})))).sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)})),[]),o=[];e.forEach((function(e){1==e.action?r.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(r).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))})),0!==r.length&&this.onUserStateUpdate(this.room.roomID,"ADD",r),0!==o.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",o),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,e)},de.prototype.handleMergeTimeout=function(){var e,t=this,n=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));n[n.length-1]-n[0]+1===n.length||n[n.length-1]>=this.minUserSeq?this.mergeUser(n):(this.userSeqMergeMap=null,e=this.lastUserQueryTime-Date.now(),this.logger.info(j.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+n.join(",")+" wait "+e),0<e?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){t.fetchUserList()}),e)):this.fetchUserList())},de.prototype.loginPrivateRsp=function(e){this.logger.info(j.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},de);function de(e,t,n,r,o,i){this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.liveRoomHandler=o,this.room=i,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}fe.prototype.initMessageHandler=function(){},fe.prototype.initLiveHandler=function(){},fe.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},fe.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t,n){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t,n)}},fe.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,n){e.logger.info(j.LIVEROOMMODULES_BINDROOMHANDLER+" login suc "+t),e.heartBeatHandler.init(n),e.stateCenter.useNetAgent?e.liveRoomHandler.startCheck():(e.service.stopCheck(),e.service.startCheck()),e.userHandler.loginRsp(n,t),e.messageHandler&&e.messageHandler.loginRsp(n),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(n)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.stateCenter.useNetAgent&&e.liveRoomHandler&&e.liveRoomHandler.stopCheck(),e.userHandler.resetUserHandler(),e.service.stopCheck(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime())}},fe.prototype.bindUserHandler=function(){},fe.prototype.bindMessageHandler=function(){},fe.prototype.bindLiveHandler=function(){},fe.prototype.HBResponse=function(e,t){this.stateCenter.actionListener("HBResponse",e,t)},fe.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},fe.prototype.handleMultiRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.runState!==o.login&&t.roomTryHandler&&1==t.isMulti&&(t.roomTryHandler.onactive=function(n,r){var o;r&&0!==r.code?(0!==r.code&&(o=H.getLiveRoomError(r.code,e.stateCenter.useNetAgent))&&N[o]&&(r=N[o]),t.roomHandler.roomStateHandle("DISCONNECTED",T.ReconnectFailed,r,r.msg)):t.roomHandler.roomStateHandle("CONNECTED",T.Reconnected,r)},t.roomTryHandler.startMaxTime(),t.roomTryHandler.active())}))},fe.prototype.isLogin=function(){return this.runState===o.login},fe.prototype.isLogout=function(){return this.runState===o.logout},fe.prototype.isTryLogin=function(){return this.runState===o.trylogin},fe.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},fe.prototype.retryConnect=function(){this.logger.info("zm.lrm.rc call"),this.stateCenter.useNetAgent&&(this.resetSessionInfo(),this.liveRoomHandler.closeRequest())},fe.prototype.retryRoom=function(){this.logger.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.sessionID="0",this.roomSessionID="0",this.roomTryHandler.active(!0))},fe.prototype.resetSessionInfo=function(){var e;this.logger.info("zm.lrm.rsi call"),this.sessionID="0",this.roomSessionID="0",null!=(e=this.liveRoomHandler)&&e.reset()};var _e=fe;function fe(e,t,n,r,i,s,a){this.roomID=e,this.stateCenter=t,this.logger=n,this.dataReport=r,this.service=i,this.rtm=s,this.liveRoomHandler=a,this.runState=o.logout,this.lastRunState=o.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.maxMemberCount=0,this.lvKey="",this.roomName="",this.roomHandler=new ue(this.logger,this.stateCenter,this.dataReport,this.service,this,a),this.heartBeatHandler=new ae(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.userHandler=new pe(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}me.prototype.createSocket=function(e){this.socket=Object(h.createZegoWebSocket)(e,this.ENV%2)},me.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},me.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},me.prototype.sendMessage=function(e,t,n,r,o){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o={timeOut:6e3}),o={data:t={header:e,body:t},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:o.timeOut,success:n,error:r},n=this.sendCommandList.push(o),this.sendCommandMap[o.seq]=n,this.socket&&this.socket.send(JSON.stringify(t)),e.seq},me.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},me.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)!function(){var n,r,o;e.remove(t),t&&t._data&&(n=t._data.error,r=t._data.seq,o=t._data.data.body.custom_msg,setTimeout((function(){n&&n(N.TIMEOUT,r,o)}),0)),t=e.getFirst()}()},me.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),o=0,i=this;null!=n&&"break"!==function(){return n._data&&n._data.sendTime+n._data.timeOut>r?"break":(n._data&&delete t[n._data.data.header.seq],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+i.sendDataDropTimeout<r||n&&n._data&&(s=n._data.error,a=n._data.seq,c=n._data.data.body.custom_msg,setTimeout((function(){s&&s(N.TIMEOUT,a,c)}),0)),++o>=i.sendDataCheckOnceCount?"break":void(n=e.getFirst()));var s,a,c}(););},me.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},me.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),this.sendCommandMap={},clearTimeout(this.sendDataCheckTimer)},me.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.socket.binaryType="arraybuffer",t.responseHandler(),e(n)})},me.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},me.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},me.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},me.prototype.onMessage=function(e){};var ge=me;function me(e){this.socket=null,this.sendCommandList=new m,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}var ye=function(){return(ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ve=(be.prototype.checkResponse=function(e){return 0!=this.stateCenter.roomModulesList.filter((function(e){return e.runState!==o.logout})).length&&(e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid)},be.prototype.handleSendCommandMsgRsp=function(e){var t,n=this,r=this.service.sendCommandMap[e.header.seq];null!=r&&(t=r._data,delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(r),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,n.cmdSeq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,n.cmdSeq)}),0))},be.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error(j.SERVICE_PUSH+" cmd="+t.header.cmd+", err_code="+t.body.err_code+", err_message="+t.body.err_message+" "):e.logger.info(j.SERVICE_PUSH+" cmd="+t.header.cmd+", msg="+JSON.stringify(t)+" "),-1<["login","logout"].indexOf(t.header.cmd)?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(j.SERVICE_PUSH+"  check session fail."):(e.logger.info(j.SERVICE_PUSH+" cmd="+t.header.cmd+",function="+!!e.responseRouters[t.header.cmd]),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error(j.SERVICE_PUSH+" msg type error ")}},be.prototype.handlePushKickout=function(e){var t,n;void 0===(null==(n=null==e?void 0:e.body)?void 0:n.protocol)||1===(null==(n=null==e?void 0:e.body)?void 0:n.protocol)?function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}([],this.stateCenter.roomModulesList).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)})):(t=null==(n=null==e?void 0:e.header)?void 0:n.room_id,(n=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t})))?n.roomHandler.handlePushKickout(e):this.logger.error(j.SERVICE_PUSH+" room no found ignore "+JSON.stringify(null==(n=e.header)?void 0:n.room_id)))},be.prototype.handlePushCustomMsg=function(e){},be.prototype.handlePushRoomMsg=function(e){},be.prototype.handlePushUserStateUpdateMsg=function(e){var t,n=null==(r=null==e?void 0:e.header)?void 0:r.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==n})),o=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:n},{key:""},J.kZMRoomRecvUserUpdateInfo.event);r?(o.setAttributes({user_list_seq:null==(t=null==e?void 0:e.body)?void 0:t.user_list_seq,update_user:null==(t=null==e?void 0:e.body)?void 0:t.user_actions}),o.end(),r.userHandler.handlePushUserStateUpdateMsg(e)):(this.logger.error(j.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e)),this.stateCenter.reporter.setError(o,J.kZMRoomRecvUserUpdateInfo.error.ROOM_NOT_EXIST))},be.prototype.handlePushMergeMsg=function(e){},be.prototype.handlePushTransMsg=function(e){},be.prototype.handleBigImMsgRsp=function(e){},be.prototype.handlePushSignalMsg=function(e){},be.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},be.prototype.closeHandler=function(e){this.service.closeHandler(e)},be.prototype.openHandler=function(e){this.service.openHandler(e)},be.prototype.errorHandler=function(e){this.service.errorHandler(e)},be.prototype.getHeader=function(e,t,n,r){return{Protocol:"req",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:n||"",room_session_id:r||"",biz_version:this.stateCenter.bizVersion||""}},be.prototype.startCheck=function(){this.logger.info(j.SERVICE_START_CHECK+" start"),this.service.startCheck()},be.prototype.stopCheck=function(){this.logger.info(j.SERVICE_STOP_CHECK+" stop"),this.service.stopCheck()},be.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},be.prototype.createSocket=function(e){var t=this;this.stateCenter.roomServer=e,this.service.createSocket(e),this.responseRouters=ye(ye({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},be.prototype.closeSocket=function(){this.service.closeSocket()},be.prototype.sendMessage=function(e,t,n,r,o,i){var s,a;return this.service.isDisConnect()?(this.logger.error(j.SERVICE_SEND+" socket is disconnect"),r(N.SOCKET_CLOSE),0):(s=null!=i&&i.roomID?i.roomID:null==(s=this.stateCenter.roomModulesList[0])?void 0:s.roomID,a=null!=i&&i.roomSessionID?i.roomSessionID:null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomSessionID,i=null!=i&&i.sessionID?i.sessionID:null==(i=this.stateCenter.roomModulesList[0])?void 0:i.sessionID,o=o||this.getHeader(e,i,s,a),this.logger.info(j.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:o,body:t})),this.service.sendMessage(o,t,n,r))},be.prototype.on=function(e,t){this.responseRouters[e]=t},be.prototype.login=function(e,t,n){var r=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID);e={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?c.ClientType_Webrtc:c.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat};return this.sendMessage("",e,t,n,r)},be.prototype.logout=function(e,t,n){var r=e.isMulti?"quit":"logout",o={reserve:0};return"logout"==r&&(o.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(r,o,t,n,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},be.prototype.heartBeat=function(e,t,n){return this.sendMessage("hb",{reserve:0},e,t,void 0,n)},be.prototype.fetchUserList=function(e,t,n,r){return this.sendMessage("user_list",e,t,n,void 0,r)},be.prototype.fetchUserListV2=function(e,t,n,r){return this.sendMessage("user_list_v2",e,t,n,void 0,r)},be.prototype.fetchReliableMessage=function(e,t,n,r){return this.sendMessage("trans_fetch",e,t,n,void 0,r)},be.prototype.sendReliableMessage=function(e,t,n,r){return this.sendMessage("trans",e,t,n,void 0,r)},be.prototype.sendRoomMsg=function(e,t,n,r){return this.sendMessage("im_chat",e,t,n,void 0,r)},be.prototype.sendCustomCommand=function(e,t,n,r){return this.sendMessage("custommsg",e,t,n,void 0,r)},be.prototype.sendBigRoomMessage=function(e,t,n,r){return this.sendMessage("bigim_chat",e,t,n,void 0,r)},be.prototype.sendRelayMessage=function(e,t,n,r){return this.sendMessage("relay",e,t,n,void 0,r)},be.prototype.sendSignalCmd=function(e,t,n,r){return this.sendMessage("signal",e,t,n,void 0,r)},be.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==s.offline?(this.logger.error(j.RTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(e)},be);function be(e,t,n){this.stateCenter=e,this.logger=t,this.rtm=n,this.service=new ge(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}Oe.prototype.setSetting=function(e,t){var n,r,o=Array.isArray(t)&&0<t.length;for(n in e)if("number"==typeof e[n].ctrlmode&&[1,2].includes(e[n].ctrlmode))this.setting[n]=e[n],this.setting[n+"_ctrlmode"]=e[n].ctrlmode;else for(var i in e[n])i.endsWith("_ctrlmode")||o&&-1==t.indexOf(i)||(1===(r=e[n][i+"_ctrlmode"])||2===r?this.setting[i]=e[n][i]:this.defaultSetting[i]&&(this.setting[i]=this.defaultSetting[i]),"number"==typeof r&&(this.setting[i+"_ctrlmode"]=e[n][i+"_ctrlmode"]))},Oe.prototype.getSetting=function(e,t){return(t=void 0!==t&&t)&&2!=this.setting[e+"_ctrlmode"]?void 0:this.setting[e]};var Ee=Oe;function Oe(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}var Se=n(0),Te=n.n(Se),ke=(t=n(7),n(8)),Re=n.n(ke),Ce=(ke=n(10),n.n(ke)),we=(ke=n(15),n.n(ke)),Ne=(ke=n(4),n.n(ke)),Ie={d:(e,t)=>{for(var n in t)Ie.o(t,n)&&!Ie.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Me=(((e,t,n)=>{function r(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function o(e,t){return e&t}function i(e,t){return e|t}function s(e,t){return e^t}function a(e,t){return e&~t}n.d(t,{default:()=>ie});var c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(e){for(var t,n="",r=0;r+3<=e.length;r+=3)t=parseInt(e.substring(r,r+3),16),n+=u.charAt(t>>6)+u.charAt(63&t);for(r+1==e.length?(t=parseInt(e.substring(r,r+1),16),n+=u.charAt(t<<2)):r+2==e.length&&(t=parseInt(e.substring(r,r+2),16),n+=u.charAt(t>>2)+u.charAt((3&t)<<4));0<(3&n.length);)n+="=";return n}function h(e){for(var t="",n=0,o=0,i=0;i<e.length&&"="!=e.charAt(i);++i){var s=u.indexOf(e.charAt(i));s<0||(n=0==n?(t+=r(s>>2),o=3&s,1):1==n?(t+=r(o<<2|s>>4),o=15&s,2):2==n?(t=(t+=r(o))+r(s>>2),o=3&s,3):(t=(t+=r(o<<2|s>>4))+r(15&s),0))}return 1==n&&(t+=r(o<<2)),t}var p,d={decode:function(e){if(void 0===p){var t="= \f\n\r\t\u2028\u2029";for(p=Object.create(null),i=0;i<64;++i)p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)]=i;for(p["-"]=62,p._=63,i=0;i<t.length;++i)p[t.charAt(i)]=-1}for(var n=[],r=0,o=0,i=0;i<e.length;++i){var s=e.charAt(i);if("="==s)break;if(-1!=(s=p[s])){if(void 0===s)throw new Error("Illegal character at offset "+i);r|=s,4<=++o?(n[n.length]=r>>16,n[n.length]=r>>8&255,n[n.length]=255&r,o=r=0):r<<=6}}switch(o){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=r>>10;break;case 3:n[n.length]=r>>16,n[n.length]=r>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=d.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return d.decode(e)}},_=(m.prototype.mulAdd=function(e,t){for(var n,r=this.buf,o=r.length,i=0;i<o;++i)(n=r[i]*e+t)<1e13?t=0:n-=1e13*(t=0|n/1e13),r[i]=n;0<t&&(r[i]=t)},m.prototype.sub=function(e){for(var t,n=this.buf,r=n.length,o=0;o<r;++o)e=(t=n[o]-e)<0?(t+=1e13,1):0,n[o]=t;for(;0===n[n.length-1];)n.pop()},m.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,n=t[t.length-1].toString(),r=t.length-2;0<=r;--r)n+=(1e13+t[r]).toString().substring(1);return n},m.prototype.valueOf=function(){for(var e=this.buf,t=0,n=e.length-1;0<=n;--n)t=1e13*t+e[n];return t},m.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},m),f=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,g=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function m(e){this.buf=[+e||0]}function y(e,t){return e.length>t?e.substring(0,t)+"":e}H.prototype.get=function(e){if((e=void 0===e?this.pos++:e)>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},H.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},H.prototype.hexDump=function(e,t,n){for(var r="",o=e;o<t;++o)if(r+=this.hexByte(this.get(o)),!0!==n)switch(15&o){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},H.prototype.isASCII=function(e,t){for(var n=e;n<t;++n){var r=this.get(n);if(r<32||176<r)return!1}return!0},H.prototype.parseStringISO=function(e,t){for(var n="",r=e;r<t;++r)n+=String.fromCharCode(this.get(r));return n},H.prototype.parseStringUTF=function(e,t){for(var n="",r=e;r<t;){var o=this.get(r++);n+=o<128?String.fromCharCode(o):191<o&&o<224?String.fromCharCode((31&o)<<6|63&this.get(r++)):String.fromCharCode((15&o)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},H.prototype.parseStringBMP=function(e,t){for(var n,r,o="",i=e;i<t;)n=this.get(i++),r=this.get(i++),o+=String.fromCharCode(n<<8|r);return o},H.prototype.parseTime=function(e,t,n){return e=this.parseStringISO(e,t),(t=(n?f:g).exec(e))?(n&&(t[1]=+t[1],t[1]+=+t[1]<70?2e3:1900),e=t[1]+"-"+t[2]+"-"+t[3]+" "+t[4],t[5]&&(e+=":"+t[5],t[6]&&(e+=":"+t[6],t[7]&&(e+="."+t[7]))),t[8]&&(e+=" UTC","Z"!=t[8]&&(e+=t[8],t[9]&&(e+=":"+t[9]))),e):"Unrecognized time: "+e},H.prototype.parseInteger=function(e,t){for(var n,r=this.get(e),o=127<r,i=o?255:0,s="";r==i&&++e<t;)r=this.get(e);if(0==(n=t-e))return o?-1:0;if(4<n){for(s=r,n<<=3;0==(128&(+s^i));)s=+s<<1,--n;s="("+n+" bit)\n"}o&&(r-=256);for(var a=new _(r),c=e+1;c<t;++c)a.mulAdd(256,this.get(c));return s+a.toString()},H.prototype.parseBitString=function(e,t,n){for(var r=this.get(e),o="("+((t-e-1<<3)-r)+" bit)\n",i="",s=e+1;s<t;++s){for(var a=this.get(s),c=s==t-1?r:0,u=7;c<=u;--u)i+=a>>u&1?"1":"0";if(i.length>n)return o+y(i,n)}return o+i},H.prototype.parseOctetString=function(e,t,n){if(this.isASCII(e,t))return y(this.parseStringISO(e,t),n);var r=t-e,o="("+r+" byte)\n";r>(n/=2)&&(t=e+n);for(var i=e;i<t;++i)o+=this.hexByte(this.get(i));return n<r&&(o+=""),o},H.prototype.parseOID=function(e,t,n){for(var r="",o=new _,i=0,s=e;s<t;++s){var a=this.get(s);if(o.mulAdd(128,127&a),i+=7,!(128&a)){if(""===r?r=(o=o.simplify())instanceof _?(o.sub(80),"2."+o.toString()):(a=o<80?o<40?0:1:2)+"."+(o-40*a):r+="."+o.toString(),r.length>n)return y(r,n);o=new _,i=0}}return 0<i&&(r+=".incomplete"),r};var v=H,b=(D.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},D.prototype.content=function(e){if(void 0!==this.tag){void 0===e&&(e=1/0);var t=this.posContent(),n=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+n,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+n);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+n,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+n,e);case 6:return this.stream.parseOID(t,t+n,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return y(this.stream.parseStringUTF(t,t+n),e);case 18:case 19:case 20:case 21:case 22:case 26:return y(this.stream.parseStringISO(t,t+n),e);case 30:return y(this.stream.parseStringBMP(t,t+n),e);case 23:case 24:return this.stream.parseTime(t,t+n,23==this.tag.tagNumber)}}return null},D.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},D.prototype.toPrettyString=function(e){var t=(e=void 0===e?"":e)+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var n=0,r=this.sub.length;n<r;++n)t+=this.sub[n].toPrettyString(e)}return t},D.prototype.posStart=function(){return this.stream.pos},D.prototype.posContent=function(){return this.stream.pos+this.header},D.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},D.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},D.decodeLength=function(e){var t=127&(n=e.get());if(t==n)return t;if(6<t)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0==t)return null;for(var n=0,r=0;r<t;++r)n=256*n+e.get();return n},D.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,n=2*this.length;return e.substr(t,n)},D.decode=function(e){function t(){var e=[];if(null!==o){for(var t=i+o;n.pos<t;)e[e.length]=D.decode(n);if(n.pos!=t)throw new Error("Content size is not correct for container starting at offset "+i)}else try{for(;;){var r=D.decode(n);if(r.tag.isEOC())break;e[e.length]=r}o=i-n.pos}catch(e){throw new Error("Exception while decoding undefined length content: "+e)}return e}var n=e instanceof v?e:new v(e,0),r=(e=new v(n),new E(n)),o=D.decodeLength(n),i=n.pos,s=i-e.pos,a=null;if(r.tagConstructed)a=t();else if(r.isUniversal()&&(3==r.tagNumber||4==r.tagNumber))try{if(3==r.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=t();for(var c=0;c<a.length;++c)if(a[c].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(e){a=null}if(null===a){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+i);n.pos=i+Math.abs(o)}return new D(e,s,o,r,a)},D),E=(A.prototype.isUniversal=function(){return 0===this.tagClass},A.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},A),O=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],S=(1<<26)/O[O.length-1],T=(P.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,o=(1<<t)-1,i=!1,s="",a=this.t,c=this.DB-a*this.DB%t;if(0<a--)for(c<this.DB&&0<(n=this[a]>>c)&&(i=!0,s=r(n));0<=a;)c<t?(n=(this[a]&(1<<c)-1)<<t-c,n|=this[--a]>>(c+=this.DB-t)):(n=this[a]>>(c-=t)&o,c<=0&&(c+=this.DB,--a)),(i=0<n||i)&&(s+=r(n));return i?s:"0"},P.prototype.negate=function(){var e=U();return P.ZERO.subTo(this,e),e},P.prototype.abs=function(){return this.s<0?this.negate():this},P.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},P.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+V(this[this.t-1]^this.s&this.DM)},P.prototype.mod=function(e){var t=U();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(P.ZERO)&&e.subTo(t,t),t},P.prototype.modPowInt=function(e,t){return t=new(e<256||t.isEven()?R:C)(t),this.exp(e,t)},P.prototype.clone=function(){var e=U();return this.copyTo(e),e},P.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},P.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},P.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},P.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},P.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var n,r=this.DB-e*this.DB%8,o=0;if(0<e--)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[o++]=n|this.s<<this.DB-r);0<=e;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(0<o||n!=this.s)&&(t[o++]=n);return t},P.prototype.equals=function(e){return 0==this.compareTo(e)},P.prototype.min=function(e){return this.compareTo(e)<0?this:e},P.prototype.max=function(e){return 0<this.compareTo(e)?this:e},P.prototype.and=function(e){var t=U();return this.bitwiseTo(e,o,t),t},P.prototype.or=function(e){var t=U();return this.bitwiseTo(e,i,t),t},P.prototype.xor=function(e){var t=U();return this.bitwiseTo(e,s,t),t},P.prototype.andNot=function(e){var t=U();return this.bitwiseTo(e,a,t),t},P.prototype.not=function(){for(var e=U(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},P.prototype.shiftLeft=function(e){var t=U();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},P.prototype.shiftRight=function(e){var t=U();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},P.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},P.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[n]^t);return e},P.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},P.prototype.setBit=function(e){return this.changeBit(e,i)},P.prototype.clearBit=function(e){return this.changeBit(e,a)},P.prototype.flipBit=function(e){return this.changeBit(e,s)},P.prototype.add=function(e){var t=U();return this.addTo(e,t),t},P.prototype.subtract=function(e){var t=U();return this.subTo(e,t),t},P.prototype.multiply=function(e){var t=U();return this.multiplyTo(e,t),t},P.prototype.divide=function(e){var t=U();return this.divRemTo(e,t,null),t},P.prototype.remainder=function(e){var t=U();return this.divRemTo(e,null,t),t},P.prototype.divideAndRemainder=function(e){var t=U(),n=U();return this.divRemTo(e,t,n),[t,n]},P.prototype.modPow=function(e,t){var n=e.bitLength(),r=z(1);if(n<=0)return r;var o=n<18?1:n<48?3:n<144?4:n<768?5:6,i=new(n<8?R:t.isEven()?w:C)(t),s=[],a=3,c=o-1,u=(1<<o)-1;if(s[1]=i.convert(this),1<o){var l=U();for(i.sqrTo(s[1],l);a<=u;)s[a]=U(),i.mulTo(l,s[a-2],s[a]),a+=2}var h,p,d=e.t-1,_=!0,f=U();for(n=V(e[d])-1;0<=d;){for(c<=n?h=e[d]>>n-c&u:(h=(e[d]&(1<<n+1)-1)<<c-n,0<d&&(h|=e[d-1]>>this.DB+n-c)),a=o;0==(1&h);)h>>=1,--a;if((n-=a)<0&&(n+=this.DB,--d),_)s[h].copyTo(r),_=!1;else{for(;1<a;)i.sqrTo(r,f),i.sqrTo(f,r),a-=2;0<a?i.sqrTo(r,f):(p=r,r=f,f=p),i.mulTo(f,s[h],r)}for(;0<=d&&0==(e[d]&1<<n);)i.sqrTo(r,f),p=r,r=f,f=p,--n<0&&(n=this.DB-1,--d)}return i.revert(r)},P.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return P.ZERO;for(var n=e.clone(),r=this.clone(),o=z(1),i=z(0),s=z(0),a=z(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(e,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);0<=n.compareTo(r)?(n.subTo(r,n),t&&o.subTo(s,o),i.subTo(a,i)):(r.subTo(n,r),t&&s.subTo(o,s),a.subTo(i,a))}return 0!=r.compareTo(P.ONE)?P.ZERO:0<=a.compareTo(e)?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},P.prototype.pow=function(e){return this.exp(e,new k)},P.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone(),r=(t.compareTo(n)<0&&(e=t,t=n,n=e),t.getLowestSetBit());if((e=n.getLowestSetBit())<0)return t;for(0<(e=r<e?r:e)&&(t.rShiftTo(e,t),n.rShiftTo(e,n));0<t.signum();)0<(r=t.getLowestSetBit())&&t.rShiftTo(r,t),0<(r=n.getLowestSetBit())&&n.rShiftTo(r,n),0<=t.compareTo(n)?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return 0<e&&n.lShiftTo(e,n),n},P.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=O[O.length-1]){for(t=0;t<O.length;++t)if(n[0]==O[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<O.length;){for(var r=O[t],o=t+1;o<O.length&&r<S;)r*=O[o++];for(r=n.modInt(r);t<o;)if(r%O[t++]==0)return!1}return n.millerRabin(e)},P.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},P.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},P.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,i=0;0<=--r;){var s=8==n?255&+e[r]:G(e,r);s<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=s:i+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=n)>=this.DB&&(i-=this.DB))}8==n&&0!=(128&+e[0])&&(this.s=-1,0<i&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&P.ZERO.subTo(this,this)},P.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},P.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},P.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},P.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,o=(1<<r)-1,i=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>r|s,s=(this[a]&o)<<n;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},P.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},P.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},P.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&P.ZERO.subTo(t,t)},P.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},P.prototype.divRemTo=function(e,t,n){if(!((u=e.abs()).t<=0)){var r=this.abs();if(r.t<u.t)null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=U());var o=U(),i=this.s,s=(e=e.s,this.DB-V(u[u.t-1])),a=(0<s?(u.lShiftTo(s,o),r.lShiftTo(s,n)):(u.copyTo(o),r.copyTo(n)),o.t),c=o[a-1];if(0!=c){var u=c*(1<<this.F1)+(1<a?o[a-2]>>this.F2:0),l=this.FV/u,h=(1<<this.F1)/u,p=1<<this.F2,d=n.t,_=d-a,f=null==t?U():t;for(o.dlShiftTo(_,f),0<=n.compareTo(f)&&(n[n.t++]=1,n.subTo(f,n)),P.ONE.dlShiftTo(a,f),f.subTo(o,o);o.t<a;)o[o.t++]=0;for(;0<=--_;){var g=n[--d]==c?this.DM:Math.floor(n[d]*l+(n[d-1]+p)*h);if((n[d]+=o.am(0,g,n,_,0,a))<g)for(o.dlShiftTo(_,f),n.subTo(f,n);n[d]<--g;)n.subTo(f,n)}null!=t&&(n.drShiftTo(a,t),i!=e&&P.ZERO.subTo(t,t)),n.t=a,n.clamp(),0<s&&n.rShiftTo(s,n),i<0&&P.ZERO.subTo(n,n)}}}},P.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},P.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},P.prototype.exp=function(e,t){if(4294967295<e||e<1)return P.ONE;var n,r=U(),o=U(),i=t.convert(this),s=V(e)-1;for(i.copyTo(r);0<=--s;)t.sqrTo(r,o),0<(e&1<<s)?t.mulTo(o,i,r):(n=r,r=o,o=n);return t.revert(r)},P.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},P.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=z(n),o=U(),i=U(),s="";for(this.divRemTo(r,o,i);0<o.signum();)s=(n+i.intValue()).toString(e).substr(1)+s,o.divRemTo(r,o,i);return i.intValue().toString(e)+s},P.prototype.fromRadix=function(e,t){this.fromInt(0);for(var n=this.chunkSize(t=null==t?10:t),r=Math.pow(t,n),o=!1,i=0,s=0,a=0;a<e.length;++a){var c=G(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(o=!0):(s=t*s+c,++i>=n&&(this.dMultiply(r),this.dAddOffset(s,0),s=i=0))}0<i&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),o&&P.ZERO.subTo(this,this)},P.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(P.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(P.ONE.shiftLeft(e-1),this);else{var r=7&e;(n=[]).length=1+(e>>3),t.nextBytes(n),0<r?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}},P.prototype.bitwiseTo=function(e,t,n){for(var r,o=Math.min(e.t,this.t),i=0;i<o;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},P.prototype.changeBit=function(e,t){return e=P.ONE.shiftLeft(e),this.bitwiseTo(e,t,e),e},P.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},P.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},P.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},P.prototype.multiplyLowerTo=function(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;0<r;)n[--r]=0;for(var o=n.t-this.t;r<o;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(o=Math.min(e.t,t);r<o;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()},P.prototype.multiplyUpperTo=function(e,t,n){var r=n.t=this.t+e.t- --t;for(n.s=0;0<=--r;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},P.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(0<this.t)if(0==t)n=this[0]%e;else for(var r=this.t-1;0<=r;--r)n=(t*n+this[r])%e;return n},P.prototype.millerRabin=function(e){var t=this.subtract(P.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>O.length&&(e=O.length);for(var o=U(),i=0;i<e;++i){o.fromInt(O[Math.floor(Math.random()*O.length)]);var s=o.modPow(r,this);if(0!=s.compareTo(P.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<n&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(P.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},P.prototype.square=function(){var e=U();return this.squareTo(e),e},P.prototype.gcda=function(e,t){var n,r=this.s<0?this.negate():this.clone(),o=e.s<0?e.negate():e.clone(),i=(r.compareTo(o)<0&&(e=r,r=o,o=e),r.getLowestSetBit()),s=o.getLowestSetBit();s<0?t(r):(0<(s=i<s?i:s)&&(r.rShiftTo(s,r),o.rShiftTo(s,o)),n=function(){0<(i=r.getLowestSetBit())&&r.rShiftTo(i,r),0<(i=o.getLowestSetBit())&&o.rShiftTo(i,o),0<=r.compareTo(o)?(r.subTo(o,r),r.rShiftTo(1,r)):(o.subTo(r,o),o.rShiftTo(1,o)),0<r.signum()?setTimeout(n,0):(0<s&&o.lShiftTo(s,o),setTimeout((function(){t(o)}),0))},setTimeout(n,10))},P.prototype.fromNumberAsync=function(e,t,n,r){var o,s,a;"number"==typeof t?e<2?this.fromInt(1):(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(P.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0),o=this,s=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(P.ONE.shiftLeft(e-1),o),o.isProbablePrime(t)?setTimeout((function(){r()}),0):setTimeout(s,0)},setTimeout(s,0)):(n=7&e,(a=[]).length=1+(e>>3),t.nextBytes(a),0<n?a[0]&=(1<<n)-1:a[0]=0,this.fromString(a,256))},P),k=(L.prototype.convert=function(e){return e},L.prototype.revert=function(e){return e},L.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},L.prototype.sqrTo=function(e,t){e.squareTo(t)},L),R=(M.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},M.prototype.revert=function(e){return e},M.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},M.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},M.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},M),C=(I.prototype.convert=function(e){var t=U();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(T.ZERO)&&this.m.subTo(t,t),t},I.prototype.revert=function(e){var t=U();return e.copyTo(t),this.reduce(t),t},I.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},I.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},I.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},I),w=(N.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=U();return e.copyTo(t),this.reduce(t),t},N.prototype.revert=function(e){return e},N.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},N.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},N.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},N);function N(e){this.m=e,this.r2=U(),this.q3=U(),T.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}function I(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function M(e){this.m=e}function L(){}function P(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function A(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=0!=(32&t),this.tagNumber=31&t,31==this.tagNumber){for(var n=new _;t=e.get(),n.mulAdd(128,127&t),128&t;);this.tagNumber=n.simplify()}}function D(e,t,n,r,o){if(!(r instanceof E))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=n,this.tag=r,this.sub=o}function H(e,t){this.hexDigits="0123456789ABCDEF",e instanceof H?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=t)}function U(){return new T(null)}function j(e,t){return new T(e,t)}t=(n="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(T.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;o=((c=s*c+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*u+(o>>>30),n[r++]=1073741823&c}return o},30):n&&"Netscape"!=navigator.appName?(T.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},26):(T.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;o=((c=s*c+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*u,n[r++]=268435455&c}return o},28),T.prototype.DB=t,T.prototype.DM=(1<<t)-1,T.prototype.DV=1<<t,T.prototype.FV=Math.pow(2,52),T.prototype.F1=52-t,T.prototype.F2=2*t-52;for(var x=[],B="0".charCodeAt(0),q=0;q<=9;++q)x[B++]=q;for(B="a".charCodeAt(0),q=10;q<36;++q)x[B++]=q;for(B="A".charCodeAt(0),q=10;q<36;++q)x[B++]=q;function G(e,t){return null==(e=x[e.charCodeAt(t)])?-1:e}function z(e){var t=U();return t.fromInt(e),t}function V(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}T.ZERO=z(0),T.ONE=z(1),Y.prototype.init=function(e){for(var t,n,r=0;r<256;++r)this.S[r]=r;for(r=t=0;r<256;++r)t=t+this.S[r]+e[r%e.length]&255,n=this.S[r],this.S[r]=this.S[t],this.S[t]=n;this.i=0,this.j=0},Y.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var F,Z=Y,K=null;function Y(){this.i=0,this.j=0,this.S=[]}K=[];var W=0,X=void 0;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var J=new Uint32Array(256);for(window.crypto.getRandomValues(J),X=0;X<J.length;++X)K[W++]=255&J[X]}te.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=function(){if(null==F){for(F=new Z;W<256;){var e=Math.floor(65536*Math.random());K[W++]=255&e}for(F.init(K),W=0;W<K.length;++W)K[W]=0;W=0}return F.next()}()};var Q=te,$=(n=(ee.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ee.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},ee.prototype.setPublic=function(e,t){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=j(e,16),this.e=parseInt(t,16)):console.error("Invalid RSA public key")},ee.prototype.encrypt=function(e){var t=this.n.bitLength()+7>>3;e=function(e,t){if(t<e.length+11)return console.error("Message too long for RSA"),null;for(var n=[],r=e.length-1;0<=r&&0<t;){var o=e.charCodeAt(r--);o<128?n[--t]=o:127<o&&o<2048?(n[--t]=63&o|128,n[--t]=o>>6|192):(n[--t]=63&o|128,n[--t]=o>>6&63|128,n[--t]=o>>12|224)}n[--t]=0;for(var i=new Q,s=[];2<t;){for(s[0]=0;0==s[0];)i.nextBytes(s);n[--t]=s[0]}return n[--t]=2,n[--t]=0,new T(n)}(e,t);if(null==e)return null;if(null==(e=this.doPublic(e)))return null;for(var n=e.toString(16),r=n.length,o=0;o<2*t-r;o++)n="0"+n;return n},ee.prototype.setPrivate=function(e,t,n){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=j(e,16),this.e=parseInt(t,16),this.d=j(n,16)):console.error("Invalid RSA private key")},ee.prototype.setPrivateEx=function(e,t,n,r,o,i,s,a){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=j(e,16),this.e=parseInt(t,16),this.d=j(n,16),this.p=j(r,16),this.q=j(o,16),this.dmp1=j(i,16),this.dmq1=j(s,16),this.coeff=j(a,16)):console.error("Invalid RSA private key")},ee.prototype.generate=function(e,t){var n=new Q,r=e>>1;this.e=parseInt(t,16);for(var o=new T(t,16);;){for(;this.p=new T(e-r,1,n),0!=this.p.subtract(T.ONE).gcd(o).compareTo(T.ONE)||!this.p.isProbablePrime(10););for(;this.q=new T(r,1,n),0!=this.q.subtract(T.ONE).gcd(o).compareTo(T.ONE)||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(i=this.p,this.p=this.q,this.q=i);var i=this.p.subtract(T.ONE),s=this.q.subtract(T.ONE),a=i.multiply(s);if(0==a.gcd(o).compareTo(T.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(a),this.dmp1=this.d.mod(i),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},ee.prototype.decrypt=function(e){if(e=j(e,16),null==(e=this.doPrivate(e)))return null;for(var t=this.n.bitLength()+7>>3,n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var o="";++r<n.length;){var i=255&n[r];i<128?o+=String.fromCharCode(i):191<i&&i<224?(o+=String.fromCharCode((31&i)<<6|63&n[r+1]),++r):(o+=String.fromCharCode((15&i)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return o},ee.prototype.generateAsync=function(e,t,n){var r=new Q,o=e>>1,i=(this.e=parseInt(t,16),new T(t,16)),s=this,a=function(){var t=function(){s.p.compareTo(s.q)<=0&&(e=s.p,s.p=s.q,s.q=e);var e=s.p.subtract(T.ONE),t=s.q.subtract(T.ONE),r=e.multiply(t);0==r.gcd(i).compareTo(T.ONE)?(s.n=s.p.multiply(s.q),s.d=i.modInverse(r),s.dmp1=s.d.mod(e),s.dmq1=s.d.mod(t),s.coeff=s.q.modInverse(s.p),setTimeout((function(){n()}),0)):setTimeout(a,0)},c=function(){s.q=U(),s.q.fromNumberAsync(o,1,r,(function(){s.q.subtract(T.ONE).gcda(i,(function(e){0==e.compareTo(T.ONE)&&s.q.isProbablePrime(10)?setTimeout(t,0):setTimeout(c,0)}))}))};setTimeout((function t(){s.p=U(),s.p.fromNumberAsync(e-o,1,r,(function(){s.p.subtract(T.ONE).gcda(i,(function(e){0==e.compareTo(T.ONE)&&s.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(t,0)}))}))}),0)};setTimeout(a,0)},ee.prototype.sign=function(e,t,n){return n=function(e,t){if(t<e.length+22)return console.error("Message too long for RSA"),null;for(var n=t-e.length-6,r="",o=0;o<n;o+=2)r+="ff";return j("0001"+r+"00"+e,16)}(($[n]||"")+t(e).toString(),this.n.bitLength()/4),null==n||null==(t=this.doPrivate(n))?null:0==(1&(e=t.toString(16)).length)?e:"0"+e},ee.prototype.verify=function(e,t,n){return t=j(t,16),null==(t=this.doPublic(t))?null:function(e){for(var t in $)if($.hasOwnProperty(t)){var n=(t=$[t]).length;if(e.substr(0,n)==t)return e.substr(n)}return e}(t.toString(16).replace(/^1f+00/,""))==n(e).toString()},ee),{md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"});function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function te(){}(t={}).lang={extend:function(e,t,n){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function r(){}if(r.prototype=t.prototype,e.prototype=new r,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),n){for(var o in n)e.prototype[o]=n[o];t=function(){};var i=["toString","valueOf"];try{"undefined"!=typeof navigator&&/MSIE/.test(navigator.userAgent)&&(t=function(e,t){for(o=0;o<i.length;o+=1){var n=i[o],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(e){}t(e.prototype,n)}}};var ne={};void 0!==ne.asn1&&ne.asn1||(ne.asn1={}),ne.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){return(e=e.toString(16)).length%2==1?"0"+e:e},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",o=0;o<n;o++)r+="f";t=new T(r,16).xor(e).add(T.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t,n=(t=ne.asn1).DERBoolean,r=t.DERInteger,o=t.DERBitString,i=t.DEROctetString,s=t.DERNull,a=t.DERObjectIdentifier,c=t.DEREnumerated,u=t.DERUTF8String,l=t.DERNumericString,h=t.DERPrintableString,p=t.DERTeletexString,d=t.DERIA5String,_=t.DERUTCTime,f=t.DERGeneralizedTime,g=t.DERSequence,m=t.DERSet,y=t.DERTaggedObject,v=t.ASN1Util.newObject;if(1!=(t=Object.keys(e)).length)throw"key of param shall be only one.";if(t=t[0],-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+t+":"))throw"undefined key: "+t;if("bool"==t)return new n(e[t]);if("int"==t)return new r(e[t]);if("bitstr"==t)return new o(e[t]);if("octstr"==t)return new i(e[t]);if("null"==t)return new s(e[t]);if("oid"==t)return new a(e[t]);if("enum"==t)return new c(e[t]);if("utf8str"==t)return new u(e[t]);if("numstr"==t)return new l(e[t]);if("prnstr"==t)return new h(e[t]);if("telstr"==t)return new p(e[t]);if("ia5str"==t)return new d(e[t]);if("utctime"==t)return new _(e[t]);if("gentime"==t)return new f(e[t]);if("seq"==t){for(var b=e[t],E=[],O=0;O<b.length;O++){var S=v(b[O]);E.push(S)}return new g({array:E})}if("set"==t){for(b=e[t],E=[],O=0;O<b.length;O++)S=v(b[O]),E.push(S);return new m({array:E})}if("tag"==t){if(n=e[t],"[object Array]"===Object.prototype.toString.call(n)&&3==n.length)return r=v(n[2]),new y({tag:n[0],explicit:n[1],obj:r});if(o={},void 0!==n.explicit&&(o.explicit=n.explicit),void 0!==n.tag&&(o.tag=n.tag),void 0===n.obj)throw"obj shall be specified for 'tag'.";return o.obj=v(n.obj),new y(o)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ne.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),o=2;o<e.length;o+=2){var i=("00000000"+parseInt(e.substr(o,2),16).toString(2)).slice(-8);r+=i.substr(1,7),"0"==i.substr(0,1)&&(t=t+"."+new T(r,2).toString(10),r="")}return t},ne.asn1.ASN1Util.oidIntToHex=function(e){function t(e){return 1==(e=e.toString(16)).length?"0"+e:e}if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",r=e.split(".");n+=t(e=40*parseInt(r[0])+parseInt(r[1])),r.splice(0,2);for(var o=0;o<r.length;o++)n+=function(e){var n="",r=new T(e,10).toString(2),o=7-r.length%7;7==o&&(o=0);for(var i="",s=0;s<o;s++)i+="0";for(r=i+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n}(r[o]);return n},ne.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(15<n)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return null!=this.hTLV&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},ne.asn1.DERAbstractString=function(e){ne.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},t.lang.extend(ne.asn1.DERAbstractString,ne.asn1.ASN1Object),ne.asn1.DERAbstractTime=function(e){ne.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,n){var r=this.zeroPadding,o=(e=this.localDateToUTC(e),String(e.getFullYear()));t=(o="utc"==t?o.substr(2,2):o)+r(String(e.getMonth()+1),2)+r(String(e.getDate()),2)+r(String(e.getHours()),2)+r(String(e.getMinutes()),2)+r(String(e.getSeconds()),2);return(t=!0===n&&0!=(o=e.getMilliseconds())?t+"."+r(String(o),3).replace(/[0]+$/,""):t)+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,n,r,o,i){e=new Date(Date.UTC(e,t-1,n,r,o,i,0)),this.setByDate(e)},this.getFreshValueHex=function(){return this.hV}},t.lang.extend(ne.asn1.DERAbstractTime,ne.asn1.ASN1Object),ne.asn1.DERAbstractStructured=function(e){ne.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},t.lang.extend(ne.asn1.DERAbstractStructured,ne.asn1.ASN1Object),ne.asn1.DERBoolean=function(){ne.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},t.lang.extend(ne.asn1.DERBoolean,ne.asn1.ASN1Object),ne.asn1.DERInteger=function(e){ne.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ne.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new T(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(ne.asn1.DERInteger,ne.asn1.ASN1Object),ne.asn1.DERBitString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=ne.asn1.ASN1Util.newObject(e.obj),e.hex="00"+t.getEncodedHex()),ne.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;e="0"+e,this.hTLV=null,this.isModified=!0,this.hV=e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var o=e.substr(n,8);r+=o=1==(o=parseInt(o,2).toString(16)).length?"0"+o:o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)1==e[n]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},t.lang.extend(ne.asn1.DERBitString,ne.asn1.ASN1Object),ne.asn1.DEROctetString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=ne.asn1.ASN1Util.newObject(e.obj),e.hex=t.getEncodedHex()),ne.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},t.lang.extend(ne.asn1.DEROctetString,ne.asn1.DERAbstractString),ne.asn1.DERNull=function(){ne.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},t.lang.extend(ne.asn1.DERNull,ne.asn1.ASN1Object),ne.asn1.DERObjectIdentifier=function(e){var t=function(e){return 1==(e=e.toString(16)).length?"0"+e:e};ne.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",r=e.split(".");e=40*parseInt(r[0])+parseInt(r[1]);n+=t(e),r.splice(0,2);for(var o=0;o<r.length;o++)n+=function(e){var n="",r=new T(e,10).toString(2),o=7-r.length%7;7==o&&(o=0);for(var i="",s=0;s<o;s++)i+="0";for(r=i+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n}(r[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(e){var t=ne.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},t.lang.extend(ne.asn1.DERObjectIdentifier,ne.asn1.ASN1Object),ne.asn1.DEREnumerated=function(e){ne.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ne.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new T(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(ne.asn1.DEREnumerated,ne.asn1.ASN1Object),ne.asn1.DERUTF8String=function(e){ne.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},t.lang.extend(ne.asn1.DERUTF8String,ne.asn1.DERAbstractString),ne.asn1.DERNumericString=function(e){ne.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},t.lang.extend(ne.asn1.DERNumericString,ne.asn1.DERAbstractString),ne.asn1.DERPrintableString=function(e){ne.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},t.lang.extend(ne.asn1.DERPrintableString,ne.asn1.DERAbstractString),ne.asn1.DERTeletexString=function(e){ne.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},t.lang.extend(ne.asn1.DERTeletexString,ne.asn1.DERAbstractString),ne.asn1.DERIA5String=function(e){ne.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},t.lang.extend(ne.asn1.DERIA5String,ne.asn1.DERAbstractString),ne.asn1.DERUTCTime=function(e){ne.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},t.lang.extend(ne.asn1.DERUTCTime,ne.asn1.DERAbstractTime),ne.asn1.DERGeneralizedTime=function(e){ne.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},t.lang.extend(ne.asn1.DERGeneralizedTime,ne.asn1.DERAbstractTime),ne.asn1.DERSequence=function(e){ne.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},t.lang.extend(ne.asn1.DERSequence,ne.asn1.DERAbstractStructured),ne.asn1.DERSet=function(e){ne.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},t.lang.extend(ne.asn1.DERSet,ne.asn1.DERAbstractStructured),ne.asn1.DERTaggedObject=function(e){ne.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},t.lang.extend(ne.asn1.DERTaggedObject,ne.asn1.ASN1Object),re=function(e,t){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var re,oe=function(e){function t(n){var r=e.call(this)||this;return n&&("string"==typeof n?r.parseKey(n):(t.hasPrivateKeyProperty(n)||t.hasPublicKeyProperty(n))&&r.parsePropertiesFrom(n)),r}var n=t,r=e;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return re(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),t.prototype.parseKey=function(e){try{var t=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?function(e){if(void 0===c){var t="0123456789ABCDEF",n=" \f\n\r\t\u2028\u2029";for(c={},s=0;s<16;++s)c[t.charAt(s)]=s;for(t=t.toLowerCase(),s=10;s<16;++s)c[t.charAt(s)]=s;for(s=0;s<n.length;++s)c[n.charAt(s)]=-1}for(var r=[],o=0,i=0,s=0;s<e.length;++s){var a=e.charAt(s);if("="==a)break;if(-1!=(a=c[a])){if(void 0===a)throw new Error("Illegal character at offset "+s);o|=a,2<=++i?(r[r.length]=o,i=o=0):o<<=4}}if(i)throw new Error("Hex encoding incomplete: 4 bits missing");return r}(e):d.unarmor(e),o=b.decode(r);if(9===(o=3===o.sub.length?o.sub[2].sub[0]:o).sub.length){t=o.sub[1].getHexStringValue(),this.n=j(t,16),n=o.sub[2].getHexStringValue(),this.e=parseInt(n,16);var i=o.sub[3].getHexStringValue(),s=(this.d=j(i,16),o.sub[4].getHexStringValue()),a=(this.p=j(s,16),o.sub[5].getHexStringValue()),u=(this.q=j(a,16),o.sub[6].getHexStringValue()),l=(this.dmp1=j(u,16),o.sub[7].getHexStringValue()),h=(this.dmq1=j(l,16),o.sub[8].getHexStringValue());this.coeff=j(h,16)}else{if(2!==o.sub.length)return!1;var p=o.sub[1].sub[0];t=p.sub[0].getHexStringValue();this.n=j(t,16),n=p.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(e){return!1}},t.prototype.getPrivateBaseKey=function(){var e={array:[new ne.asn1.DERInteger({int:0}),new ne.asn1.DERInteger({bigint:this.n}),new ne.asn1.DERInteger({int:this.e}),new ne.asn1.DERInteger({bigint:this.d}),new ne.asn1.DERInteger({bigint:this.p}),new ne.asn1.DERInteger({bigint:this.q}),new ne.asn1.DERInteger({bigint:this.dmp1}),new ne.asn1.DERInteger({bigint:this.dmq1}),new ne.asn1.DERInteger({bigint:this.coeff})]};return new ne.asn1.DERSequence(e).getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var e=new ne.asn1.DERSequence({array:[new ne.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new ne.asn1.DERNull]}),t=new ne.asn1.DERSequence({array:[new ne.asn1.DERInteger({bigint:this.n}),new ne.asn1.DERInteger({int:this.e})]});t=new ne.asn1.DERBitString({hex:"00"+t.getEncodedHex()});return new ne.asn1.DERSequence({array:[e,t]}).getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},t.wordwrap=function(e,t){return e?(t="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})",e.match(RegExp(t,"g")).join("\n")):e},t.prototype.getPrivateKey=function(){return"-----BEGIN RSA PRIVATE KEY-----\n"+t.wordwrap(this.getPrivateBaseKeyB64())+"\n-----END RSA PRIVATE KEY-----"},t.prototype.getPublicKey=function(){return"-----BEGIN PUBLIC KEY-----\n"+t.wordwrap(this.getPublicBaseKeyB64())+"\n-----END PUBLIC KEY-----"},t.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},t}(n);se.prototype.setKey=function(e){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new oe(e)},se.prototype.setPrivateKey=function(e){this.setKey(e)},se.prototype.setPublicKey=function(e){this.setKey(e)},se.prototype.decrypt=function(e){try{return this.getKey().decrypt(h(e))}catch(e){return!1}},se.prototype.encrypt=function(e){try{return l(this.getKey().encrypt(e))}catch(e){return!1}},se.prototype.sign=function(e,t,n){try{return l(this.getKey().sign(e,t,n))}catch(e){return!1}},se.prototype.verify=function(e,t,n){try{return this.getKey().verify(e,h(t),n)}catch(e){return!1}},se.prototype.getKey=function(e){if(!this.key){if(this.key=new oe,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},se.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},se.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},se.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},se.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},se.version="3.2.1";const ie=se;function se(e){this.default_key_size=(e=(e=void 0===e?{}:e)||{}).default_key_size?parseInt(e.default_key_size,10):1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}})(0,ke={},Ie),ke.default),Le=(Object.defineProperty(Pe.prototype,"publicKey",{get:function(){return"-----BEGIN PUBLIC KEY-----\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxtEM51skf+Bg29Mdb+WN\n        IkgbGDZ/wOP4MTntlut65WpPpXOkg2m9EKscmzfE6kUNLYnYV77fZGFSjr+Wkmoz\n        VK1lJ3seswBNyP6X5LUszkf1WoeEyBbfegTf3XkHEeWJ5BlD9syurlA2Fh+cTaNO\n        RNlAGBZO7SdgTHPYAcHu0fAnJZwCZ9+ZZkVnjyTBqQckovMttKqvtoUKcp7NgGve\n        w0OJxFKwIITu1keGdZ+yN9wBul4qJfTy8otOcwGL4bnoABMhCNvJc3xA70BuaaF0\n        fvhxA8diV/2W+qg+LAzdqajLaNciuDHIY5Y+z5kZI1eBa3J3aqUASse4YzzTYv48\n        7wIDAQAB\n        -----END PUBLIC KEY-----"},enumerable:!1,configurable:!0}),Pe.prototype.encrypt=function(e){return e=L.a.encrypt(this.uint8Array2WordArray(e),this.key2,{iv:this.iv2}).toString(),Re.a.toByteArray(e)},Pe.prototype.decrypt=function(e){return this.wordArray2Uint8Array(L.a.decrypt(Re.a.fromByteArray(e),this.key2,{iv:this.iv2}))},Pe.prototype.generateK1Sign=function(){var e=this.generateNonce(),t=((t=(this.key1=P.a.parse(e),this.iv1=Ce.a.parse(Ne()(e).toString().toLowerCase()),new Me)).setPublicKey(this.publicKey),t.getKey().encrypt(e));return this.wordArray2Uint8Array(Ce.a.parse(t))},Pe.prototype.decryptK2Sign=function(e){try{this.key2=L.a.decrypt(Re.a.fromByteArray(e),this.key1,{iv:this.iv1}),this.iv2=Ne()(this.key2)}catch(e){}},Pe.prototype.generateNonce=function(){var e=Math.random().toString().substr(2,16);return e.length<16&&(e+=e.substr(0,16-e.length)),e},Pe.prototype.md5=function(e){return Ne()(e).toString()},Pe.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(Ne()(this.uint8Array2WordArray(e)))},Pe.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r[o]=i}return r},Pe.prototype.uint8Array2WordArray=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e[r])<<24-r%4*8;return we.a.create(n,t)},Pe);function Pe(){}function Ae(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))}function De(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))}var He={"/lr/login_room_rsp":"LoginRoomRsp","/lr/logout_room_rsp":"LogoutRoomRsp","/sw/push_kickout":"PushKickout","/sw/push":"PushReq","/sw/merge_push":"CmdMergePushReq","/lr/room/hb_rsp":"HbRsp","/lr/userlist/userlist_rsp":"UserlistRsp","/lr/stream/add_rsp":"StreamAddRsp","/lr/stream/delete_rsp":"StreamDeleteRsp","/lr/stream/update_rsp":"StreamUpdateRsp","/lr/stream/list_rsp":"StreamListRsp","/lr/push/stream_add":"PushStream","/lr/push/stream_delete":"PushStream","/lr/push/stream_update":"PushStream","/lr/signal/liverequest_rsp":"SignalLiveRsp","/lr/signal/liverresult_rsp":"SignalLiveResulRsp","/lr/signal/liveinvite_rsp":"SignalLiveInviteRsp","/lr/signal/livestop_rsp":"SignalLiveStopRsp","/lr/signal/livescustom_rsp":"SignalLiveCustomRsp","/lr/im/chat_rsp":"ImChatRsp","/lr/room/enter_rsp":"EnterRsp","/lr/room/quit_rsp":"QuitRsp","/lr/trans/trans_rsp":"TransRsp","/lr/trans/transfetch_rsp":"TransFetchRsp","/lr/bigim/chat_rsp":"BigimChatRsp","/lr/relay_rsp":"RelayRsp","/lr/token/renew_token_rsp":"RenewTokenRsp","/lr/push/user_updated":"PushUserInfoUpdated","/lr/push/user_token_expire":"PushUserTokenExpire","/lr/push/im_chat":"PushImChat","/lr/push/bigim_chat":"PushBigImChat","/lr/push/trans":"PushTrans","/lr/push/user_kickout":"PushUserKickout","/lr/push/user_logreport":"PushUserLogReport","/lr/push/usertrans":"PushUserTrans"},Ue=(ke=n(1),n.n(ke)),je=function(){return(je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.util.Long=Ue.a,t.configure();var xe,Be=((ke=xe=xe||{})[ke.disconnected=0]="disconnected",ke[ke.broken=1]="broken",ke[ke.connected=2]="connected",Object.defineProperty(qe.prototype,"nickName",{get:function(){return Ae(this.stateCenter.nickName)},enumerable:!1,configurable:!0}),qe.prototype.isDisConnect=function(){return this.state!==xe.connected},qe.prototype.getHeader=function(e){e={cmd:e,seq:++this.seq,timestamp:(new Date).getTime(),session_id:this.switchSessionID,controls:this.controls,flags:this.flags};var t=Se.proto_switch.Header.create(e);t=Se.proto_switch.Header.encode(t).finish();return[e.seq,t]},qe.prototype.isUaConnect=function(){return this.ua.isConnect()},qe.prototype.sendMessage=function(e,t,n,r,o,i,s){var a=this;if(void 0===o&&(o={timeout:6e3}),void 0===i&&(i=!0),this.logger.info(j.LIVEROOMHANDLER_SENDMESSAGE+" call"),"/lr/login_room"!==e&&this.state!==xe.connected)return this.logger.warn(j.LIVEROOMHANDLER_SENDMESSAGE+" state "+this.state),-1;var c=this.getHeader(e),u=c[1],l=t;!this.unEncryptCmdList.includes(e)&&this.isEncrypt&&(l=this.crypto.encrypt(t)),t=this.getHead(u.length,l.length),t=new Uint8Array(Array.from(t).concat(Array.from(u)).concat(Array.from(l))),i&&(u={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:o.timeout,success:n,error:function(e,t,n){var o;if(a.logger.info(j.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+t+" "+JSON.stringify(e)+" "+JSON.stringify(n)),"/lr/login_room_rsp"!==(null==(o=null==e?void 0:e.header)?void 0:o.cmd)&&-1<[1002,105].indexOf(null==(o=null==e?void 0:e.body)?void 0:o.err_code))return null!=n&&n.roomID?(o=a.stateCenter.roomModulesList.find((function(e){return e.roomID==n.roomID})))?void o.retryRoom():void a.logger.error(j.LIVEROOMHANDLER_SENDMESSAGE+" room no found ignore "):void a.rtm.retryRoom();[207,208].indexOf(null==(o=null==e?void 0:e.body)?void 0:o.err_code),r&&r(e,t)},params:s},l=this.sendCommandList.push(u),this.sendCommandMap[u.seq]=l),this.logger.info(j.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+c[0]+" cmd: "+e),i="/lr/login_room"===e;return null!=(o=this.liveroomRequest)&&o.sendRequest({payload:t,ack:i},(function(e){a.logger.info(j.LIVEROOMHANDLER_SENDMESSAGE+" fail")}),(function(){a.logger.info(j.LIVEROOMHANDLER_SENDMESSAGE+" ack")})),c[0]},qe.prototype.getHead=function(e,t){var n=new Uint8Array(7);return n[0]=33,n[1]=e>>8,n[2]=e-(n[1]<<8),n.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),n},qe.prototype.handlePush=function(e,t){if(void 0===t&&(t=!1),33===(n=e[0])){var n=(e[1]<<8)+e[2],r=Se.proto_switch.Header.decode(e.slice(7,7+n)),o=n=e.slice(7+n);if(!this.unEncryptCmdList.includes(r.cmd)&&this.isEncrypt){if(!this.hasCryptSign)return this.logger.warn(j.LIVEROOMHANDLER_HANDLEPUSH+" decrypt early "+r.cmd),void this.waitDecryptCmdList.push(e);try{o=this.crypto.decrypt(n)}catch(e){this.logger.warn(j.LIVEROOMHANDLER_HANDLEPUSH+" decrypt fail "+r.cmd)}}if(He[r.cmd]){if(e=this.decodeResponseBody(r,o),this.swPushCmdList.includes(r.cmd))return t&&"/lr/push/user_updated"===(null==(n=null==e?void 0:e.head)?void 0:n.sub_cmd)?void this.logger.info(j.LIVEROOMHANDLER_HANDLEPUSH+" ignore user updated"):void this.handleSwitchPush(r,e);this.logger.info(j.LIVEROOMHANDLER_HANDLEPUSH+" down "+r.cmd+" "+JSON.stringify(this.transBuf(e))),t={header:this.transHeader(r),body:this.transRsp(e)},this.handleSendCommandMsgRsp(t)}else this.logger.info(j.LIVEROOMHANDLER_HANDLEPUSH+" cmd is not rtc"),this.onSwitchMessage(r,o)}},qe.prototype.handleSwitchPush=function(e,t){if("/sw/push"===e.cmd){var n=(a=this.transRsp(t.head)).room_id;if(this.stateCenter.roomModulesList.find((function(e){return e.roomID==n}))){var r=void 0,o={header:a,body:r=this.unStructCmdList.includes(t.head.sub_cmd)?{signal_msg:De(t.msg_body),sub_cmd:this.joinLiveMap[t.head.sub_cmd]}:"/lr/push/signal_custom"===t.head.sub_cmd?{custommsg:De(t.msg_body)}:He[t.head.sub_cmd]?this.transRsp(this.decode(Se.liveroom_cs[He[t.head.sub_cmd]],t.msg_body)):{}};if(this.logger.info(j.LIVEROOMHANDLER_HANDLESWITCHPUSH+" push "+JSON.stringify(this.transBuf(o))),this.whiteboardPushCmdList.includes(t.head.sub_cmd))this.logger.info(j.LIVEROOMHANDLER_HANDLESWITCHPUSH+" white "),this.onSwitchMessage(e,t);else switch(t.head.sub_cmd){case"/lr/push/user_updated":this.handlePushUserStateUpdateMsg(o);break;case"/lr/push/user_kickout":this.handlePushKickout(o,!1);break;case"/lr/push/trans":this.handlePushTransMsg(o);break;case"/lr/push/im_chat":this.handlePushRoomMsg(o);break;case"/lr/push/signal_custom":this.handlePushCustomMsg(o);break;case"/lr/push/stream_add":case"/lr/push/stream_delete":case"/lr/push/stream_update":this.handlePushStreamMsg(o);break;case"/lr/push/joinlive_request":case"/lr/push/joinlive_result":case"/lr/push/joinlive_invite":case"/lr/push/joinlive_stop":this.handlePushSignalMsg(o);break;case"/lr/push/user_token_expire":this.handlePushTokenExpire(o)}1==t.head.qos_flag&&(c={code:0,message:"",sub_cmd:t.head.sub_cmd,msg_id:t.head.msg_id,server_send_time:t.head.send_time},u=Se.proto_switch.PushRsp.create(c),l=Se.proto_switch.PushRsp.encode(u).finish(),this.sendMessage("/sw/push_rsp",l,void 0,void 0))}else this.logger.warn(j.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")}else{var i,s,a,c,u,l;"/sw/merge_push"===e.cmd?(i=(a=this.transRsp(t.head)).room_id,this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}))?(s=[],t.messages.forEach((function(e){var t;s.push({sub_cmd:e.sub_cmd,sub_seq:e.sub_seq,msg_id:e.msg_id}),"/lr/push/bigim_chat"===e.sub_cmd&&(t=Se.liveroom_cs.PushBigImChat.decode(e.msg_body),e.msg_body=t)})),delete(a={header:(r=this.transRsp(t)).head,body:r}).body.head,this.handlePushMergeMsg(a),1==t.head.qos_flag&&(u=Se.proto_switch.CmdMergePushRsp.create(c={messages:s}),l=Se.proto_switch.CmdMergePushRsp.encode(u).finish(),this.sendMessage("/sw/merge_push_rsp",l,void 0,void 0))):this.logger.warn(j.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")):"/sw/push_kickout"===e.cmd&&(r={reason:900<t.reason?t.reason-900:t.reason,msg:t.message,need_relogin:void 0!==t.need_relogin?t.need_relogin:0},this.handlePushKickout({header:e,body:r},!0))}},qe.prototype.handlePushTokenExpire=function(e){},qe.prototype.handlePushKickout=function(e,t){},qe.prototype.handlePushStreamMsg=function(e){},qe.prototype.handlePushSignalMsg=function(e){},qe.prototype.handlePushMergeMsg=function(e){},qe.prototype.handlePushCustomMsg=function(e){},qe.prototype.handlePushRoomMsg=function(e){},qe.prototype.handlePushTransMsg=function(e){},qe.prototype.onSwitchMessage=function(e,t){},qe.prototype.decodeResponseBody=function(e,t){var n=this.onSwitchCmdList.includes(e.cmd)?"proto_switch":"liveroom_cs";return this.decode(this.protoInstance[n][He[e.cmd]],t)},qe.prototype.handleWaitDecryptCmdList=function(){var e=this;this.waitDecryptCmdList.forEach((function(t){e.handlePush(t,!0)})),this.waitDecryptCmdList=[]},qe.prototype.handlePushUserStateUpdateMsg=function(e){},qe.prototype.login=function(e,t,n){var o,i,s,a,c=this,u=(this.state==xe.disconnected&&(this.logger.info(j.LIVEROOMHANDLER_LOGIN+" state disconnect"),this.closeRequest()),(new Date).getTime()+"");e.isMulti?(s={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,net_type:H.getNetTypeNum(),config:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0},lv_key:e.lvKey,third_token:Ae(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",conn_type:2,room_name:Ae(e.roomName)},i=je(je({},s),{room_name:e.roomName,third_token:e.token}),this.logger.info(j.LIVEROOMHANDLER_LOGIN+" enter "+JSON.stringify(i)),s=Se.liveroom_cs.EnterReq.create(s),a=Se.liveroom_cs.EnterReq.encode(s).finish(),this.sendMessage("/lr/room/enter",a,(function(e,n){c.longToStringNumber(e.body,["user_session_id","room_session_id","ret_timestamp"],"toString"),c.transKeysName(e.body,[["user_session_id","session_id"],["hb_interval","hearbeat_interval"]]),c.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,n)}),(function(e,t){n&&n(e,t)}),void 0,void 0,{roomID:e.roomID})):(o={app_id:this.stateCenter.appid,id_name:Ae(this.stateCenter.idName),device_id:this.stateCenter.deviceID,term_type:this.stateCenter.ENV%2==0?r.TT_WEB:r.TT_MINIPROGRAM,net_type:H.getNetTypeNum(),sdk_ver:parseInt(this.rtm.version.replace(/\./g,"")),proto_ver:131072,nick_name:this.nickName,client_stamp:Ae(u),crypt_version:1,k1_sign:this.crypto.generateK1Sign(),relogin_token:this.switchSessionID.notEquals(Ue.a.fromInt(0))?Ae(this.reloginToken):"",role:this.stateCenter.role,liveroom_session_id:Ue.a.fromString(e.sessionID),room_id:Ae(e.roomID),room_name:Ae(e.roomName),biz_type:0,room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0,lv_key:e.lvKey,third_token:Ae(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",biz_version:this.stateCenter.bizVersion||"",login_logic:this.stateCenter.isMultiRoom?3:1,sdk_conn_type:2},i=je(je({},o),{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,client_stamp:u,k1_sign:void 0,relogin_token:this.reloginToken,liveroom_session_id:e.sessionID,room_id:e.roomID,room_name:e.roomName,third_token:e.token}),this.logger.info(j.LIVEROOMHANDLER_LOGIN+" login "+JSON.stringify(i)),this.k1SignLogoutBuffer=this.crypto.md5Bytes(o.k1_sign),s=Se.proto_switch.LoginRoomReq.create(o),a=Se.proto_switch.LoginRoomReq.encode(s).finish(),this.sendMessage("/lr/login_room",a,(function(e,n){c.switchSessionID=e.header.session_id,c.reloginToken=e.body.relogin_token,c.logger.info(j.LIVEROOMHANDLER_LOGIN+" login rsp"),c.crypto.decryptK2Sign(e.body.k2_sign),1===e.body.crypt_option?c.isEncrypt=!1:void 0===e.body.crypt_option&&(c.isEncrypt=!0),c.hasCryptSign=!0,c.waitDecryptTimer=setTimeout((function(){c.handleWaitDecryptCmdList()}),0),c.longToStringNumber(e.body,["liveroom_session_id","room_session_id","ret_timestamp"],"toString"),delete e.body.heartbeat_interval,delete e.body.heartbeat_timeout,c.transKeysName(e.body,[["liveroom_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"]]),c.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,n)}),(function(e,t){n&&n(e,t)})))},qe.prototype.transKeysName=function(e,t){t.forEach((function(t){e[t[1]]=e[t[0]],delete e[t[0]]}))},qe.prototype.keysExist=function(e,t){t.forEach((function(t){void 0===e[t]&&(e[t]=0)}))},qe.prototype.longToStringNumber=function(e,t,n){t.forEach((function(t){Ue.a.isLong(e[t])&&(e[t]=e[t][n]())}))},qe.prototype.logout=function(e,t,n){var r,o,i,s;return e.isMulti?(r={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,config_list:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0}},o=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_LOGOUT+" quit "+JSON.stringify(o)),i=Se.liveroom_cs.QuitReq.create(r),s=Se.liveroom_cs.QuitReq.encode(i).finish(),this.sendMessage("/lr/room/quit",s,t,n)):(r={logout_code:0,logout_check:this.crypto.md5Bytes(Ae(e.token)),liveroom_session_id:Ue.a.fromString(e.sessionID),room_id:Ae(e.roomID),role:this.stateCenter.role,nickname:this.nickName,logout_logic:this.stateCenter.isMultiRoom?3:1},o=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_LOGOUT+" logout "+JSON.stringify(o)),i=Se.proto_switch.LogoutRoomReq.create(r),s=Se.proto_switch.LogoutRoomReq.encode(i).finish(),this.sendMessage("/lr/logout_room",s,t,n))},qe.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(N.TIMEOUT,t._data.seq)}),0),t=e.getFirst()},qe.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),o=0,i=this;null!=n&&"break"!==function(){return n._data&&n._data.sendTime+n._data.timeout>r?"break":(n._data&&delete t[n._data.seq],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+i.sendDataDropTimeout<r||(s=n&&n._data&&n._data.error,a=n&&n._data&&n._data.seq,setTimeout((function(){s&&s(N.TIMEOUT,a)}),0)),++o>=i.sendDataCheckOnceCount?"break":void(n=e.getFirst()));var s,a}(););},qe.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},qe.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},qe.prototype.handleSendCommandMsgRsp=function(e){var t,n,r=this,o=this.sendCommandMap[e.header.seq];null!=o&&(t=o._data,n=null==t?void 0:t.params,delete this.sendCommandMap[e.header.seq],this.sendCommandList.remove(o),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,r.seq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,r.seq,n)}),0))},qe.prototype.getReqHead=function(e){return{room_id:e.roomID,user_session_id:Ue.a.fromString(e.sessionID),room_session_id:Ue.a.fromString(e.roomSessionID)}},qe.prototype.heartBeat=function(e,t,n){var r=this;n={req_head:this.getReqHead(n),role:this.stateCenter.role,lv_key:n.lvKey},n=Se.liveroom_cs.HbReq.create(n),n=Se.liveroom_cs.HbReq.encode(n).finish();this.sendMessage("/lr/room/hb",n,(function(t){r.transKeysName(t.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"]]),t.body.server_user_seq=t.body.user_seq.toNumber(),r.longToStringNumber(t.body,["dati_time_window"],"toNumber"),e&&e(t)}),t)},qe.prototype.fetchUserList=function(e,t,n,r){var o=this;r=this.getReqHead(r),r=je({req_head:r},e),e=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_FETCH_USER_LIST+" "+JSON.stringify(e)),e=Se.liveroom_cs.UserlistReq.create(r),r=Se.liveroom_cs.UserlistReq.encode(e).finish();return this.sendMessage("/lr/userlist/userlist",r,(function(e,n){o.logger.info(j.LIVEROOMHANDLER_FETCH_USER_LIST+" suc "+n),o.transKeysName(e.body,[["user_basic_list","user_baseinfos"]]),o.longToStringNumber(e.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),t&&t(e,n)}),n)},qe.prototype.sendRoomMsg=function(e,t,n,r){var o=this;r={req_head:this.getReqHead(r),msg_category:e.msg_category,msg_priority:e.msg_priority,msg_type:e.msg_type,msg_content:Ae(e.msg_content)},e=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_SENDROOMMSG+" "+JSON.stringify(e)),e=Se.liveroom_cs.ImChatReq.create(r),r=Se.liveroom_cs.ImChatReq.encode(e).finish();return this.sendMessage("/lr/im/chat",r,(function(e){o.longToStringNumber(e.body,["msg_id"],"toNumber"),t&&t(e)}),n)},qe.prototype.sendReliableMessage=function(e,t,n,r){return r={req_head:this.getReqHead(r),role:this.stateCenter.role,nick_name:this.nickName,trans_type:Ae(e.trans_type),trans_data:Ae(e.trans_data),trans_local_seq:e.trans_local_seq,trans_channel:Ae(e.trans_channel)},e=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_SENDRELIABLEMESSAGE+" "+JSON.stringify(e)),e=Se.liveroom_cs.TransReq.create(r),r=Se.liveroom_cs.TransReq.encode(e).finish(),this.sendMessage("/lr/trans/trans",r,t,n)},qe.prototype.fetchReliableMessage=function(e,t,n,r){r=this.getReqHead(r);var o=e.fetch_array.map((function(e){return{trans_type:Ae(e.trans_type),trans_local_seq:e.trans_seq}}));r={req_head:r,trans_channel:Ae(e.trans_channel),fetch_array:o},e=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE+" "+JSON.stringify(e)),o=Se.liveroom_cs.TransFetchReq.create(r),e=Se.liveroom_cs.TransFetchReq.encode(o).finish();return this.sendMessage("/lr/trans/transfetch",e,t,n)},qe.prototype.sendCustomCommand=function(e,t,n,r){var o=this,i=(r=this.getReqHead(r),e.dest_id_name.map((function(e){return{id_name:Ae(e)}})));r=je({req_head:r,dst_userlist:i,push_message:Ae(e.custom_msg)},e),i=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_SENDCUSTOMCOMMAND+" "+JSON.stringify(i)),e=Se.liveroom_cs.SignalLiveReq.create(r),i=Se.liveroom_cs.SignalLiveReq.encode(e).finish();return this.sendMessage("/lr/signal/livescustom",i,(function(e){t&&t(o.transRsp(e))}),(function(e){n&&n(e)}))},qe.prototype.sendBigRoomMessage=function(e,t,n,r){return r=this.getReqHead(r),e=e.msgs.map((function(e){return{msg_category:e.msg_category,msg_type:e.msg_type,msg_timestamp:Ue.a.fromNumber(Date.now()),msg_content:Ae(e.msg_content),bigmsg_client_id:Ae(e.bigmsg_client_id)}})),r={req_head:r,nick_name:this.nickName,role:this.stateCenter.role,msgs:e},e=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_SENDBIGROOMMESSAGE+" "+JSON.stringify(e)),e=Se.liveroom_cs.BigimChatReq.create(r),r=Se.liveroom_cs.BigimChatReq.encode(e).finish(),this.sendMessage("/lr/bigim/chat",r,t,n)},qe.prototype.sendRelayMessage=function(e,t,n,r){return r={req_head:this.getReqHead(r),nick_name:this.nickName,role:this.stateCenter.role,relay_type:Ae(e.relay_type),relay_data:Ae(e.relay_data)},e=Se.liveroom_cs.RelayReq.create(r),r=Se.liveroom_cs.RelayReq.encode(e).finish(),this.sendMessage("/lr/relay",r,t,n)},qe.prototype.sendSignalCmd=function(e,t,n,r){var o="",i="";switch(e.sub_cmd){case 1003:o="/lr/signal/liveinvite",i="SignalLiveInviteReq";break;case 1001:o="/lr/signal/liverequest",i="SignalLiveReq";break;case 1002:o="/lr/signal/liverresult",i="SignalLiveResultReq";break;case 1004:o="/lr/signal/livestop",i="SignalLiveStopReq"}r=this.getReqHead(r);var s=e.dest_id_name.map((function(e){return{id_name:Ae(e)}}));r={req_head:r,push_message:Ae(e.signal_msg),dst_userlist:s},e=this.transBuf(r),this.logger.info(j.LIVEROOMHANDLER_SENDSIGNALCMD+" "+JSON.stringify(e)),s=Se.liveroom_cs[i].create(r),e=Se.liveroom_cs[i].encode(s).finish();return Se.liveroom_cs[i].decode(e),this.sendMessage(o,e,t,n)},qe.prototype.sendStreamUpdate=function(e,t,n,r){var o,i=this;try{o=JSON.parse(e.stream_msg)}catch(e){}var s,a,c="",u=(this.logger.info(j.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(e)),this.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID})));if(!u)return this.logger.error(j.LIVEROOMHANDLER_SENDSTREAMUPDATE+" room no found ignore "),-1;switch(e.sub_cmd){case 2001:c="/lr/stream/add",s="StreamAddReq",a={req_head:this.getReqHead(u),stream_id:Ae(o.stream_id),extra_info:Ae(o.extra_info),client_req_seq:this.seq+1,login_mode:1,third_token:Ae(e.third_token||"")};break;case 2002:c="/lr/stream/delete",s="StreamDeleteReq",a={req_head:this.getReqHead(u),stream_id:Ae(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1};break;case 2003:c="/lr/stream/update",s="StreamUpdateReq",a={req_head:this.getReqHead(u),stream_id:Ae(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1,extra_info:Ae(o.extra_info)}}var l=this.transBuf(a);this.logger.info(j.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(l)),l=Se.liveroom_cs[s].create(a),l=Se.liveroom_cs[s].encode(l).finish();return this.sendMessage(c,l,(function(e){i.logger.info(j.LIVEROOMHANDLER_SENDSTREAMUPDATE+" suc "+c+" "+JSON.stringify(e)),e.header.room_id=u.roomID,t&&t(e)}),(function(e){i.logger.info(j.LIVEROOMHANDLER_SENDSTREAMUPDATE+" fail "+c+" "+JSON.stringify(e)),n&&n(e)}))},qe.prototype.getStreamList=function(e,t,n,r){var o,i=this.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID}));i?(i={req_head:this.getReqHead(i)},o=this.transBuf(i),this.logger.info(j.LIVEROOMHANDLER_GETSTREAMLIST+" "+JSON.stringify(o)),o=Se.liveroom_cs.StreamListReq.create(i),i=Se.liveroom_cs.StreamListReq.encode(o).finish(),this.sendMessage("/lr/stream/list",i,(function(e){var n;null!=(n=e.body)&&n.stream_info.forEach((function(e){e.create_time=e.create_time.toNumber()})),t&&t(e)}),(function(e){n&&n(e)}))):this.logger.error(j.LIVEROOMHANDLER_GETSTREAMLIST+" room no found ignore "+r.roomID)},qe.prototype.transBuf=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){["logout_check","k2_sign","k1_sign"].includes(r)?n[r]=e[r]:t.transReqBytes(n,e,r)})),n},qe.prototype.transReqBytes=function(e,t,n){var r=this;if(Ue.a.isLong(t[n]))e[n]=t[n].toString();else if("[object Object]"===Object.prototype.toString.call(t[n]))e[n]={},Object.keys(t[n]).forEach((function(o){return r.transReqBytes(e[n],t[n],o)}));else if("[object Array]"===Object.prototype.toString.call(t[n])&&"[object Object]"===Object.prototype.toString.call(t[n][0])){e[n]=[];for(var o=0;o<t[n].length;o++)!function(o){var i={};Object.keys(t[n][o]).forEach((function(e){r.transReqBytes(i,t[n][o],e)})),e[n].push(i)}(o)}else"[object Uint8Array]"===Object.prototype.toString.call(t[n])?e[n]=De(t[n]):e[n]=t[n]},qe.prototype.transHeader=function(e){return e.timestamp=Ue.a.isLong(e.timestamp)?e.timestamp.toString():e.timestamp,e},qe.prototype.transRsp=function(e){var t=this,n=e&&e.rsp_head?this.transRspHead(e.rsp_head):{},r=je(je({},e),n),o=(delete r.rsp_head,{});return Object.keys(r).forEach((function(e){"k2_sign"===e?o[e]=r[e]:t.transBytes(o,r,e)})),o},qe.prototype.transBytes=function(e,t,n){var r=this;if(Ue.a.isLong(t[n]))e[n]=t[n];else if("[object Object]"===Object.prototype.toString.call(t[n]))e[n]={},Object.keys(t[n]).forEach((function(o){return r.transBytes(e[n],t[n],o)}));else if("[object Array]"===Object.prototype.toString.call(t[n])&&"[object Object]"===Object.prototype.toString.call(t[n][0])){e[n]=[];for(var o=0;o<t[n].length;o++)!function(o){var i={};Object.keys(t[n][o]).forEach((function(e){r.transBytes(i,t[n][o],e)})),e[n].push(i)}(o)}else"[object Uint8Array]"===Object.prototype.toString.call(t[n])?e[n]=De(t[n]):e[n]=t[n]},qe.prototype.transRspHead=function(e){return e?{err_code:e.code||0,err_message:e.message}:{}},qe.prototype.decode=function(e,t){return je({},e.decode(t))},qe.prototype.handleDisconnected=function(e,t){var n=this;this.logger.info(j.LIVEROOMHANDLER_HANDLEDISCONNECTED+" call"),this.state=xe.disconnected,this.resetWaitCmd(),this.stateCenter.useNetAgent&&e===O.TIMEOUT&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(n.ua.isConnect()?(n.logger.info(j.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is connect"),e.roomTryHandler.active()):(n.logger.info(j.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is disconnect"),n.ua.connectUa()))}))},qe.prototype.handleBroken=function(){this.logger.info(j.LIVEROOMHANDLER_HANDLEBROKEN+" call"),this.state=xe.broken,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,n){e.roomHandler.disconnectedHandle(n)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",T.Reconnecting,N.NETWORK_BROKEN))}))},qe.prototype.handleConnected=function(e){var t=this;this.logger.info(j.LIVEROOMHANDLER_HANDLECONNECTED+" call "+e),this.state=xe.connected,this.hasCryptSign=!1,this.resetWaitCmd(),this.stateCenter.useNetAgent&&(e===v.AUTO?this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&t.ua.isConnect()&&e.roomTryHandler.active()})):this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.stopMaxTime(),e.roomTryHandler.invalid())})))},qe.prototype.resetWaitCmd=function(){this.waitDecryptCmdList=[],clearTimeout(this.waitDecryptTimer),this.waitDecryptTimer=null},qe.prototype.renewToken=function(e,t,n,r){var o=this;r={req_head:this.getReqHead(r),token:e.token},e=Se.liveroom_cs.RenewTokenReq.create(r),e=Se.liveroom_cs.RenewTokenReq.encode(e).finish(),r=this.transBuf(r);this.logger.info(j.LIVEROOMHANDLER_RENEW_TOKEN+" "+JSON.stringify(r)),this.sendMessage("/lr/token/renew_token",e,(function(e,n){o.keysExist(e.body,["token_remain_time"]),t&&t(e,n)}),n)},qe.prototype.reset=function(){this.logger.info(j.LIVEROOMHANDLER_RESET+" call "),this.state=xe.disconnected,this.switchSessionID=Ue.a.fromInt(0),this.sendDataCheckTimer&&clearTimeout(this.sendDataCheckTimer)},qe.prototype.closeRequest=function(){var e;null!=(e=this.liveroomRequest)&&e.closeRequest()},qe.prototype.resetSessionInfo=function(){this.switchSessionID=Ue.a.fromInt(0)},qe);function qe(e,t,n,r,o){var s=this;this.logger=e,this.stateCenter=t,this.ua=n,this.dataReport=r,this.rtm=o,this.seq=0,this.controls=new Uint8Array(1),this.flags=new Uint8Array(1),this.sendCommandList=new m,this.sendCommandMap={},this.isEncrypt=!0,this.hasCryptSign=!1,this.waitDecryptCmdList=[],this.zPushSid="0",this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.protoInstance=Te.a,this.swPushCmdList=["/sw/push","/sw/merge_push","/sw/push_kickout","/sw/push_redirect"],this.onSwitchCmdList=["/lr/login_room_rsp","/lr/logout_room_rsp","/sw/push_kickout","/sw/push","/sw/merge_push"],this.unEncryptCmdList=["/lr/login_room","/lr/login_room_rsp"],this.whiteboardPushCmdList=["/edu/push/set_room","/edu/push/set_user","/edu/push/joinlive","/edu/push/set_mod","/edu/push/draw_graphics","/edu/push/clear_graphics","/edu/push/draw_page_graphics","/edu/push/clear_page_graphics","/edu/push/clear_user_graphic_list","/edu/push/qaa","/edu/push/set_user_auth","/edu/push/set_room_auth"],this.state=xe.disconnected,this.unStructCmdList=["/lr/push/joinlive_request","/lr/push/joinlive_result","/lr/push/joinlive_invite","/lr/push/joinlive_stop"],this.joinLiveMap={"/lr/push/joinlive_request":11001,"/lr/push/joinlive_result":11002,"/lr/push/joinlive_invite":11003,"/lr/push/joinlive_stop":11004},this.reloginToken="",this.crypto=new Le,this.liveroomRequest=this.ua.getPCRequest(S.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Ue.a.fromInt(0),null!=(e=this.liveroomRequest)&&e.on("connected",(function(e){s.handleConnected(e)})),null!=(t=this.liveroomRequest)&&t.on("broken",(function(e){s.handleBroken()})),null!=(n=this.liveroomRequest)&&n.on("disconnected",(function(e,t){s.handleDisconnected(e,t)})),null!=(r=this.liveroomRequest)&&r.on("downLoadMessage",(function(e){s.handlePush(e)})),null!=(o=this.liveroomRequest)&&o.on("pcBrokenEvent",(function(e){var t=J.kZegoSDKProxyBroken,n=s.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},t.event);n.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),n.end()})),null!=(e=this.liveroomRequest)&&e.on("pcDisconnectedEvent",(function(e){var t=J.kZegoSDKProxyDisconnect,n=s.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},t.event);n.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),n.end()})),null!=(t=this.liveroomRequest)&&t.on("pcConnectedEvent",(function(e){var t=J.kZegoSDKProxyConnect,n=s.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},t.event);n.setAttributes({service_no:t.service_no(e.service_no),recv_time:t.recv_time((new Date).getTime()),proxy_link_sources:t.proxy_link_sources(e.proxy_link_sources),connect_stream:t.connect_stream(e.connect_stream)}),n.end()}))}var Ge=(ze.prototype.listenCallBack=function(){var e=this;this.roomServicer.handlePushCustomMsg=function(t){e.handlePushCustomMsg(t)},this.roomServicer.handlePushTokenExpire=function(t){var n,r=null==(r=null==(r=null==t?void 0:t.body)?void 0:r.stop_stream)?void 0:r.stream_id_list.map(De);null!=(n=null==(n=null==t?void 0:t.body)?void 0:n.stop_stream)&&(n.stream_id_list=r),e.stateCenter.actionListener("_tokenExpired",t)},this.roomServicer.handlePushKickout=function(t,n){var r;n?function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}([],e.stateCenter.roomModulesList).forEach((function(e){e.roomHandler.handlePushKickout(t,!0,!0)})):(r=null==(n=null==t?void 0:t.header)?void 0:n.room_id,n=e.stateCenter.roomModulesList.find((function(e){return e.roomID==r})),e.roomServicer.longToStringNumber(t.body,["session_id"],"toString"),n?n.roomHandler.handlePushKickout(t):e.logger.error(j.LIVEROOMHANDLER_PUSHKICKOUT+" room no found ignore "+JSON.stringify(null==(n=t.header)?void 0:n.room_id)))},this.roomServicer.handlePushStreamMsg=function(t){e.handlePushStreamMsg(t)},this.roomServicer.handlePushSignalMsg=function(t){e.handlePushSignalMsg(t)},this.roomServicer.handlePushMergeMsg=function(t){e.handlePushMergeMsg(t)},this.roomServicer.handlePushRoomMsg=function(t){e.handlePushRoomMsg(t)},this.roomServicer.handlePushTransMsg=function(t){e.handlePushTransMsg(t)},this.roomServicer.onSwitchMessage=function(t,n){e.onSwitchMessage(t,n)},this.roomServicer.handlePushUserStateUpdateMsg=function(t){var n,r,o,s=null==(a=null==t?void 0:t.header)?void 0:a.room_id,a=e.stateCenter.roomModulesList.find((function(e){return e.roomID==s}));a?(o=t.body.user_list.map((function(e){return{Action:e.action,IdName:e.id_name,NickName:e.nick_name,Role:e.role,LoginTime:e.login_time.toString()}})),r=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:s},{key:""},J.kZMRoomRecvUserUpdateInfo.event),o={body:{user_actions:o,user_list_seq:t.body.server_user_seq.toNumber(),room_id:t.body.room_id}},r.setAttributes({user_list_seq:null==(n=null===o?void 0:o.body)?void 0:n.user_list_seq,update_user:null==(n=null===o?void 0:o.body)?void 0:n.user_actions}),r.end(),a.userHandler.handlePushUserStateUpdateMsg(o)):e.logger.error(j.LIVEROOMHANDLER_PUSHUSERUPDATE+" room no found ignore "+JSON.stringify(t))}},ze.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},ze.prototype.isUaConnect=function(){var e;return null==(e=this.roomServicer)?void 0:e.isUaConnect()},ze.prototype.sendMessage=function(e,t,n,r,o,i){var s;return null==(s=this.roomServicer)?void 0:s.sendMessage(e,t,n,r,o)},ze.prototype.handlePushTokenExpire=function(e){},ze.prototype.handlePushKickout=function(e,t){},ze.prototype.handlePushStreamMsg=function(e){},ze.prototype.handlePushSignalMsg=function(e){},ze.prototype.handlePushMergeMsg=function(e){},ze.prototype.handlePushCustomMsg=function(e){},ze.prototype.handlePushRoomMsg=function(e){},ze.prototype.handlePushTransMsg=function(e){},ze.prototype.onSwitchMessage=function(e,t){},ze.prototype.handlePushUserStateUpdateMsg=function(e){},ze.prototype.login=function(e,t,n){var r;null!=(r=this.roomServicer)&&r.login(e,t,n)},ze.prototype.logout=function(e,t,n){var r;return null==(r=this.roomServicer)?void 0:r.logout(e,t,n)},ze.prototype.startCheck=function(){var e;null!=(e=this.roomServicer)&&e.startCheck()},ze.prototype.stopCheck=function(){var e;null!=(e=this.roomServicer)&&e.stopCheck()},ze.prototype.getReqHead=function(e){var t;return null==(t=this.roomServicer)?void 0:t.getReqHead(e)},ze.prototype.heartBeat=function(e,t,n){var r;null!=(r=this.roomServicer)&&r.heartBeat(e,t,n)},ze.prototype.fetchUserList=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.fetchUserList(e,t,n,r)},ze.prototype.sendRoomMsg=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendRoomMsg(e,t,n,r)},ze.prototype.sendReliableMessage=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendReliableMessage(e,t,n,r)},ze.prototype.fetchReliableMessage=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.fetchReliableMessage(e,t,n,r)},ze.prototype.sendCustomCommand=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendCustomCommand(e,t,n,r)},ze.prototype.sendBigRoomMessage=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendBigRoomMessage(e,t,n,r)},ze.prototype.sendRelayMessage=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendRelayMessage(e,t,n,r)},ze.prototype.sendSignalCmd=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendSignalCmd(e,t,n,r)},ze.prototype.sendStreamUpdate=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.sendStreamUpdate(e,t,n,r)},ze.prototype.getStreamList=function(e,t,n,r){var o;return null==(o=this.roomServicer)?void 0:o.getStreamList(e,t,n,r)},ze.prototype.renewToken=function(e,t,n,r){var o;null!=(o=this.roomServicer)&&o.renewToken(e,t,n,r)},ze.prototype.reset=function(){var e;null!=(e=this.roomServicer)&&e.reset()},ze.prototype.closeRequest=function(){var e;null!=(e=this.roomServicer)&&e.closeRequest()},ze);function ze(e,t,n,r,o){this.logger=e,this.stateCenter=t,this.ua=n,this.dataReport=r,this.rtm=o,this.roomServicer=new Be(e,t,n,r,o),this.listenCallBack()}var Ve=function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Fe=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},Ze=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Ke=(Object.defineProperty(Ye.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Ye.prototype.getSettingUnify=function(e){var t=this.stateCenter.settingConfig.getSetting("unify",e=void 0!==e&&e);return this.logger.info(j.RTM_GET_SETTING_UNIFY+" "+e+" "+JSON.stringify(t)),t?(e=t.enable,t=t.sdk_conn_ver,!!(e&&t<=F.connectVer)):this.stateCenter.useNetAgent},Ye.prototype.initCallback=function(){this.proxyRes=H.proxyRes,this.actionSuccessCallback=H.actionSuccessCallback,this.actionErrorCallback=H.actionErrorCallback,this.getServerError=H.getServerError,this.generateRandumNumber=H.generateRandumNumber,this.unregisterCallback=H.unregisterCallback,this.logReportCallback=H.logReportCallback,this.registerCallback=H.registerCallback},Ye.prototype.initSpans=function(){this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMListener.event},J.kZMListener.event,!0).end()},Ye.prototype.getStoreAppConfig=function(){this.logger.info(j.RTM_GETSTOREAPPCONFIG+" call");var e=localStorage.getItem(V+"_"+this.getAppID()+"_"+(this.stateCenter.mode||F.modeNo));if(e)try{var t=H.decryptStores(e,G);t?(this.stateCenter.appConfig=JSON.parse(t),this.stateCenter.reporter.spanSetAttributes({key:J.kZMInitSetting.event},{is_from_cache:J.kZMInitSetting.is_from_cache(!0)}),this.stateCenter.actionListener("_appConfigRsp"),this.handleLogUpload()):localStorage.removeItem(V+"_"+this.getAppID()+"_"+(this.stateCenter.mode||F.modeNo))}catch(e){this.logger.warn(j.RTM_GETSTOREAPPCONFIG+" "+JSON.stringify(e))}else this.logger.info(j.RTM_GETSTOREAPPCONFIG+" no store config")},Ye.prototype.createNetAgent=function(){var e=this,t=(this.logger.info(j.RTM_CREATENETAGENT+" call"),this.netAgent.on("disconnected",(function(t){e.logger.info(j.RTM_CREATENETAGENT+" netAgent disconnect")})),this.netAgent.on("connected",(function(){e.logger.info(j.RTM_CREATENETAGENT+" netAgent connect"),e.stateCenter.reporter.setNetStateCheck(),e.stateCenter.useNetAgent?(e.fetchAppConfig(),e.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&t.roomTryHandler.active(!0)}))):e.logger.info(j.RTM_CREATENETAGENT+" unify false")})),this.netAgent.on("broken",(function(t){e.logger.info(j.RTM_CREATENETAGENT+" netAgent broken"),t===b.CLOSE&&e.stateCenter.roomModulesList.forEach((function(e){e.resetSessionInfo()}))})),this.netAgent.on("dispatchEvent",(function(t,n,r){var o;e.logger.info(j.RTM_CREATENETAGENT+" dispatch"),"start"===n?(o=e.stateCenter.reporter.createSpan(i.H,{key:J.kZegoConnConnect.event},{key:""},J.kZegoConnDispatch.event),e.stateCenter.requestList[t]=o):"end"===n&&(o=e.stateCenter.requestList[t])&&(o.setAttributes({domain_list:J.kZegoConnDispatch.domain_list(r.domains)}),o.end())})),this.netAgent.on("dispatchResultUpdate",(function(t){t=t.servers,e.logger.info(j.RTM_CREATENETAGENT+" dispatchResult "+JSON.stringify(t)),t=H.encryptStores(JSON.stringify(t),G),localStorage.setItem(z+"_"+e.stateCenter.appid+"_"+(e.stateCenter.mode||F.modeNo),t)})),this.netAgent.on("connectedEvent",(function(t,n,r){var o;e.logger.info(j.RTM_CREATENETAGENT+" connect"),"start"===n?(o=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZegoConnConnect.event},J.kZegoConnConnect.event,!0),e.stateCenter.requestList[t]=o):"end"===n&&(o=e.stateCenter.requestList[t])&&(o.setAttributes({request_count:J.kZegoConnConnect.request_count(r.count),connect_id:J.kZegoConnConnect.connect_id(r.connectid),events:J.kZegoConnConnect.events(r.connectEvents)}),o.end())})),this.netAgent.on("requestEvent",(function(t,n,r){var o;e.logger.info(j.RTM_CREATENETAGENT+" request"),"start"===n?(o=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZegoRequest.event},J.kZegoRequest.event,!0),e.stateCenter.requestList[t]=o):"end"===n&&(o=e.stateCenter.requestList[t])&&(o.setAttributes({req_location:J.kZegoRequest.req_location(r.na_req_location),http_code:r.status_code,error:r.err_code}),o.end())})),this.netAgent.on("disConnectedEvent",(function(t){var n=t.duration,r=t.server,o=(t=t.connectid,e.logger.info(j.RTM_CREATENETAGENT+" disconnect"),e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZegoConnDisConnect.event));o.setAttributes({url:J.kZegoConnDisConnect.url(r),connect_duration:J.kZegoConnDisConnect.connect_duration(n),connect_id:J.kZegoConnDisConnect.connect_id(t)}),o.end()})),null!=(t=this.netAgent)&&t.on("clientInfo",(function(t){"number"==typeof(null==t?void 0:t.timeOffset)&&e.stateCenter.reporter.setTimeOffset(null==t?void 0:t.timeOffset),e.updateTimeOffsetInterval()})),(null!=(t=this.options)&&t.accessDomains&&0<(null==(t=this.options)?void 0:t.accessDomains.length)?null==(t=this.options)?void 0:t.accessDomains:F.domains).map((function(e){return"wss://"+e+"/accesshub"})));this.netAgent.setBackupDomains(F.primaryDomains),this.netAgent.setNetAgentDefaultServers(t),null!=(t=this.options)&&t.customDomain&&this.netAgent.setNetAgentSpecifiedServers(["wss://accesshub-wss."+this.options.customDomain+"/accesshub"]),this.dispatchServers=this.getDispatchUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Ye.prototype.getDispatchUrl=function(){var e=localStorage.getItem(z+"_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||F.modeNo));if(e&&(e=H.decryptStores(e,G)))try{return JSON.parse(e)}catch(e){}return[]},Ye.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),n=H.getBrowser(),r="micromessenger"==(o=navigator.userAgent).toLowerCase().match(/MicroMessenger/i),o=-1<o.indexOf("Android")||-1<o.indexOf("Adr"),s=t||r&&o?"pagehide":"Firefox"===n?"beforeunload":"unload";window.addEventListener(s,(function(){e.logger.info(j.RTM_BIND_WINDOW_LISTENER+" "+s),e.stateCenter.reporter.setUnloadState(i.I),e._onBeforePageUnload&&e._onBeforePageUnload(),e.logoutRoom()})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},Ye.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},Ye.prototype.retryRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&(t.resetSessionInfo(),t.roomTryHandler.active(!0))}))},Ye.prototype.netOnLineHandle=function(){var e=this;this.logger.info(j.RTM_BIND_WINDOW_LISTENER+" network is online"),this.stateCenter.networkState=s.online,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",T.Reconnected,{code:0,msg:""}))}))},Ye.prototype.netOffLineHandle=function(){this.logger.info(j.RTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=s.offline,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,n){e.roomHandler.disconnectedHandle(n)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",T.Reconnecting,N.NETWORK_BROKEN))}))},Ye.prototype.setLogConfig=function(e){this.logger.info(j.RTM_SET_LOG_CONFIG+" call");var t,n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMSetLog.event},J.kZMSetLog.event);if(e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),n.setAttributes({log_level:J.kZMSetLog.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&n.setAttributes({remote_log_level:J.kZMSetLog.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))this.logger.setLogServer(e.logURL),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})),n.setAttributes({log_url:J.kZMSetLog.log_url(e.logURL)}),n.end();else if(e.logURL)return this.logger.error(j.RTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.stateCenter.reporter.setError(n,J.kZMSetLog.error.kInvalidParamError),!1;return this.logger.info(j.RTM_SET_LOG_CONFIG+" call success"),n.end(),!0},Ye.prototype.setDebugVerbose=function(e){var t=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMSetDebug.event},J.kZMSetDebug.event);"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,t.setAttributes({debug:J.kZMSetDebug.debug(e?"true":"false")})),t.end(),this.logger.info(j.RTM_SET_DEBUG_VERBOSE+" call success")},Ye.prototype.setDebug=function(e){"string"==typeof e&&-1<e.indexOf("wss")?this.stateCenter.debug=H.isTestEnv(e):Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("wss")}))?this.stateCenter.debug=H.isTestEnv(e[0]):this.logger.info(j.RTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},Ye.prototype.renewToken=function(e,t){var n,r=this,o=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:t},{key:""},J.kZMReNewToken.event);if(void 0!==t&&("string"!=typeof t||""==t))return this.logger.error(j.RTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var s,a,c=this.getRoomModules(t)||this.stateCenter.roomModulesList[0];return c?"string"==typeof e&&c.roomTryHandler?(e===c.roomTryHandler.token?(this.logger.info(j.RTM_RENEWTOKEN+" token has not changed"),o.setAttributes({error:J.kZMReNewToken.error.INPUT_PARAM.code,message:"token has not changed"}),o.end()):(o.setAttributes({token:J.kZMReNewToken.token(e)}),this.stateCenter.configRoomAuth?(s=function(t){var n;null!=(n=c.roomTryHandler)&&n.renewLocalToken(e,null==(n=null==t?void 0:t.body)?void 0:n.token_remain_time),r.cloudSetting.setToken(e),r.reporter.setReporterInfo(r.stateCenter.idName||"",e),r.stateCenter.configCheckToken=!0,o.end(),r.logger.info(j.RTM_RENEWTOKEN+" "+JSON.stringify(t))},a=function(t){var n=null==(n=null==t?void 0:t.body)?void 0:n.err_code;r.stateCenter.reporter.setError(o,t),!n||1000002014!==n&&2014!==n?r.logger.error(j.RTM_RENEWTOKEN+" "+JSON.stringify(t)):(r.stateCenter.configCheckToken=!1,null!=(n=c.roomTryHandler)&&n.renewLocalToken(e),r.cloudSetting.setToken(e),r.logger.warn(j.RTM_RENEWTOKEN+" "+JSON.stringify(t)))},this.stateCenter.useNetAgent?null!=(n=this.liveRoomHandler)&&n.renewToken({token:e},s,a,c):this.service.sendMessage("renew_token",{token:e},s,a,void 0,{sessionID:c.sessionID,roomID:t,roomSessionID:c.roomSessionID})):(null!=(n=c.roomTryHandler)&&n.renewLocalToken(e),this.cloudSetting.setToken(e),this.reporter.setReporterInfo(this.stateCenter.idName||"",e),o.end())),!0):("string"!=typeof e||c.roomTryHandler?(this.logger.error(j.RTM_RENEWTOKEN+" token must be string and not empty"),this.stateCenter.reporter.setError(o,J.kZMReNewToken.error.INPUT_PARAM)):(this.logger.error(j.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(o,J.kZMReNewToken.error.NOT_LOGIN)),!1):(this.logger.error(j.RTM_RENEWTOKEN+" calling must after loginRoom"),this.stateCenter.reporter.setError(o,J.kZMReNewToken.error.NOT_LOGIN),!1)},Ye.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info(j.RTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("http")}))&&this.cloudSetting.init({product:x.product,appID:this.stateCenter.appid,urls:e,env:this.stateCenter.ENV,pollingNotify:function(e,n){t.logger.info(j.RTM_SET_CLOUD_SETTING_URLS," setting file changed "+e+" "+JSON.stringify(n)),t.stateCenter.actionListener("_cloudSettingNotify",e,n)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent})},Ye.prototype.loginRoom=function(e,t,n,r){var i=this;return this.logger.info(j.RTM_LOGIN_ROOM+" call by user "+(null==n?void 0:n.userID)+" "+e+" "+this.version),new Promise((function(a,c){return Ve(i,void 0,void 0,(function(){var i,u,l,h,p,d=this;return Fe(this,(function(_){switch(_.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){wx.getNetworkType({success:function(t){d.stateCenter.networkState="none"===t.networkType?s.offline:s.online,e()},fail:function(t){d.logger.error(j.RTM_CONSTRUCTOR+" network "+JSON.stringify(t)),d.stateCenter.networkState=s.online,e()}})}))];case 1:_.sent(),_.label=2;case 2:return u=this.loginReport(a,c,e,t,r),h=u.interResolve,i=u.interReject,u=u.loginSpan,(r=r||{}).maxMemberCount||(r.maxMemberCount=0),this.netAgent&&(this.stateCenter.idName=n.userID,this.netAgent.setUserInfo(n.userID),this.stateCenter.actionListener("_roomLogin",e,t),this.netAgent.isConnect()&&this.fetchAppConfig(t)),this.cloudSetting.setUserID(n.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.reporter.setCommonAttributes({id_name:n.userID}),this.stateCenter.reporter.setReporterInfo(n.userID,t),l=this.getRoomModules(e),p=J.kZMLoginRoom.error,l?(this.logger.setSessionInfo(this.stateCenter.appid,e,"",n.userID,"",this.stateCenter.sdKVersion),i(p.REPEATEDLY_LOGIN)):((l=new _e(e,this.stateCenter,this.logger,this.dataReport,this.service,this,this.liveRoomHandler)).roomTryHandler||(l.roomTryHandler=new te(this.logger,this.stateCenter,l)),l.roomTryHandler.init(this.stateCenter.roomRetryTime),l.roomTryHandler.initRoom(l.roomHandler,e,t,n,this.stateCenter.server,this.stateCenter.serverBak,r),l.roomTryHandler.setLoginRoomCallback(h,i),l.roomHandler.roomStateHandle("CONNECTING",T.Logining,{code:0,msg:""}),(h=function(e,t){var n,r,o=[],i={};for(n in e)i[e[n].order]=e[n],e[n].key=n;for(r in i)o.push(i[r]);for(var s=0;s<o.length;s++)for(var a=o[s].rules,c=0;c<a.length;c++){var u={key:o[s].key,value:o[s].value,action:t.action,logger:t.logger},l=u.value,h=a[c].name?""+a[c].name:"";if((void 0===l&&h===ee.NOT_EMPTY||void 0!==l)&&oe[h]&&(h=oe[h](u.key,l,u.action,u.logger,a[c]))!=re)return h}return re}({roomID:{order:0,value:e,rules:[{name:ee.NOT_EMPTY,error:p.ROOM_ID_NULL},{name:ee.TYPE_STRING,error:p.INPUT_PARAM,extMsg:"roomID must be string"},{name:ee.MAX_LENGTH_128,error:p.ROOM_ID_TOO_LONG},{name:ee.ILLEGAL_CHARACTERS,error:p.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:ee.NOT_EMPTY,error:p.INPUT_PARAM},{name:ee.TYPE_STRING,error:p.INPUT_PARAM}]},user:{order:2,value:n,rules:[{name:ee.NOT_EMPTY,error:p.INPUT_PARAM,extMsg:" param user error."},{name:ee.TYPE_OBJECT,error:p.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:n.userID,rules:[{name:ee.NOT_EMPTY,error:p.USER_ID_NULL,extMsg:" param user error."},{name:ee.TYPE_STRING,error:p.INPUT_PARAM,extMsg:" param userID error."},{name:ee.MAX_LENGTH_64,error:p.USER_ID_TOO_LONG},{name:ee.ILLEGAL_CHARACTERS,error:p.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:n.userName,rules:[{name:ee.TYPE_STRING,error:p.INPUT_PARAM,extMsg:" userName must be string."},{name:ee.MAX_LENGTH_256,error:p.USER_NAME_TOO_LONG}]},config:{order:5,value:r,rules:[]},"config.maxMemberCount":{order:6,value:r.maxMemberCount,rules:[{name:ee.TYPE_INTEGER,error:p.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:j.RTM_LOGIN_ROOM,logger:this.logger}))!==re?(l.roomHandler.roomStateHandle("DISCONNECTED",T.LoginFailed,h.error,h.extMsg),i(h.error,h.extMsg)):(0<this.stateCenter.roomModulesList.length&&1==this.stateCenter.isMultiRoom?l.isMulti=!0:Ze([],this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout()})),r&&(l.config=r),this.stateCenter.roomModulesList.push(l),this.stateCenter.reporter.setSpanInMap(u,{key:J.kZMLoginRoom.event,par:e}),p=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(p)&&0<p.length&&(this.logger.info(j.RTM_LOGIN_ROOM," setting room_server "+p),this.stateCenter.server=p[0],this.stateCenter.serverBak=p[1]||p[0]),this.stateCenter.setMultiRoom=!0,l.roomTryHandler.startMaxTime(),this.stateCenter.useNetAgent&&!this.netAgent.isConnect()?(this.logger.info(j.RTM_LOGIN_ROOM," us is not connected"),l.roomHandler.setRunState(o.trylogin),this.netAgent.connectUa()):(this.stateCenter.useNetAgent&&(this.stateCenter.networkState=s.online),l.roomTryHandler.active(!0)))),[2]}}))}))}))},Ye.prototype.handleLogUpload=function(){var e=this.stateCenter.appConfig.app_config.domain;this.logger.info(j.RTM_HANDLE_LOG_UPLOAD+" call"),this.logger.url?this.logger.info(j.RTM_HANDLE_LOG_UPLOAD+" log is connected"):(this.stateCenter.testEnvironment?(this.stateCenter.logDomain="weblogger-hk-test.zegocloud.com",e="zegocloud.com"):this.stateCenter.logDomain="weblogger"+this.stateCenter.appid+"-api."+e,e?(e="",0===this.stateCenter.ENV?(e="wss://"+this.stateCenter.logDomain+"/log",this.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})):e="https://"+this.stateCenter.logDomain+"/httplog",this.logger.setLogServer(e)):this.logger.warn(j.RTM_HANDLE_LOG_UPLOAD+" appconfig no domain"))},Ye.prototype.fetchAppConfig=function(e){return Ve(this,void 0,void 0,(function(){var t,n,r,o,s,a;return Fe(this,(function(c){switch(c.label){case 0:if(this.stateCenter.appConfigFetched)return this.logger.warn(j.RTM_FETCH_APP_CONFIG+" config fetched"),[2];if(!this.getUserID())return this.logger.warn(j.RTM_FETCH_APP_CONFIG+" user not exist"),[2];if(t="",e)t=e;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(j.RTM_FETCH_APP_CONFIG+" token not exist"),[2];t=this.getToken()}n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZegoSDKConfigInit.event),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",t,5e3)];case 2:return o=c.sent(),a=o.code,r=o.data,o=o.retryCount,n.setAttributes({trigger_reason:J.kZegoSDKConfigInit.trigger_reason(this.stateCenter.appConfig?"refresh":"normal"),try_count:J.kZegoSDKConfigInit.try_count(o||0)}),n.end(),this.stateCenter.appConfigFetched=!0,this.logger.info(j.RTM_LOGIN_ROOM+" initConfig code:"+a+" data: "+JSON.stringify(r)),o=r.app_config,a=r.media_config,s=a.publish_config,a=a.play_config,r=r.speedlog_config.charge_info_report_no_playing,this.stateCenter.appConfig={app_config:o,media_config:{publish_config:s,play_config:a},speedlog_config:{charge_info_report_no_playing:r||0}},o=JSON.stringify(this.stateCenter.appConfig),s=H.encryptStores(o,G),localStorage.setItem(V+"_"+this.getAppID()+"_"+(this.stateCenter.mode||F.modeNo),s),this.handleLogUpload(),this.stateCenter.appConfig||this.stateCenter.actionListener("_appConfigRsp"),this.stateCenter.netAppConfig||(this.stateCenter.netAppConfig=Object.assign(this.stateCenter.appConfig),this.stateCenter.actionListener("_netAppConfigRsp",this.stateCenter.netAppConfig),this._onAppConfigUpdate&&this._onAppConfigUpdate(this.stateCenter.netAppConfig)),[3,4];case 3:return a=c.sent(),this.logger.error(j.RTM_LOGIN_ROOM+" fail "+JSON.stringify(a)),n.setAttributes({error:null==a?void 0:a.code}),n.end(),[20012,20008].includes(null==a?void 0:a.code)&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&e.roomTryHandler.loginFail(N.APPID_INVALID)})),[3,4];case 4:return[2]}}))}))},Ye.prototype.getCloudSetting=function(){var e=this;this.cloudSetting.fetchMultiSetting([q,"room"]).then((function(t){var n,r;e.logger.info(j.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t)),t&&(e.stateCenter.settingConfig.setSetting(null==(t=null==t?void 0:t.init)?void 0:t.setting,["remote_log_level"]),(t=e.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(e.logger.info(j.RTM_LOGIN_ROOM+"  setting remote_log_level "+t),e.logger.setRemoteLogLevel(t)),(t=e.stateCenter.settingConfig.getSetting("unify",e.stateCenter.netHasSet))&&(e.logger.info(j.RTM_LOGIN_ROOM+" unify "+JSON.stringify(t)),r=t.enable,t=t.sdk_conn_ver,n=!0,n=!!(r&&t<=F.connectVer),!0===e.stateCenter.useNetAgent&&!1===n&&(e.cloudSetting.setOptions({unify:!1}),"connecting"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connecting",e.stateCenter.actionListener("_connectChanged","connecting")),r=Ze([],e.stateCenter.roomModulesList),Ze([],e.stateCenter.roomModulesList).forEach((function(e){e.roomHandler.logout(!0,!0)})),e.stateCenter.useNetAgent=n,r.forEach((function(t){var n;e.stateCenter.roomModulesList.push(t),t.roomTryHandler||(t.roomTryHandler=new te(e.logger,e.stateCenter,t)),t.roomTryHandler.init(e.stateCenter.roomRetryTime),t.roomTryHandler.initRoom(t.roomHandler,t.roomID,t.token,{userID:e.stateCenter.idName,userName:e.stateCenter.nickName},e.stateCenter.server,e.stateCenter.serverBak,t.config),null!=(n=t.roomTryHandler)&&n.startMaxTime(),t.roomTryHandler.onactive=function(n,r){n?"connected"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connected",e.stateCenter.actionListener("_connectChanged","connected",{roomID:t.roomID})):t.roomHandler.disconnectedHandle(r)},null!=(n=t.roomTryHandler)&&n.active()})))),(t=e.stateCenter.settingConfig.getSetting("report_script"))&&(n=t.url,r=t.key,t=t.hash,e.logger.info(j.RTM_LOGIN_ROOM+" report script "+n+" "+r+" "+t),e.stateCenter.reporter.loadScript(!0,n,r,t)))})).catch((function(t){e.logger.warn(j.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t))})),this.stateCenter.onListener("_cloudSettingNotify",(function(t,n){var r=e.cloudSetting.getEnvVariables(),o=e.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZMCloudSettingRefresh.event);o.setAttributes({request_kv:J.kZMCloudSettingRefresh.request_kv(r),files:J.kZMCloudSettingRefresh.files([{name:t,content:n.setting,versions:n.versions,code:null==n?void 0:n.code,message:null==n?void 0:n.message}])}),o.end(),t===q&&(e.stateCenter.settingConfig.setSetting(null==n?void 0:n.setting,["remote_log_level"]),(r=e.stateCenter.settingConfig.getSetting("remote_log_level"))&&(e.logger.info(j.RTM_LOGIN_ROOM," setting remote_log_level "+r),e.logger.setRemoteLogLevel(r)))}))},Ye.prototype.cloudReportNotify=function(e,t,n){0!==(null==n?void 0:n.code)||!1===(null==n?void 0:n.polling)?"request_start"===t?this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:J.kZMCloudSettingRequest.event,par:e+""},J.kZMCloudSettingRequest.event,!0):"request_end"===t&&this.stateCenter.reporter.spanEnd({key:J.kZMCloudSettingRequest.event,par:e+""},{request_detail:J.kZMCloudSettingRequest.request_detail(null==n?void 0:n.reportData),files:J.kZMCloudSettingRequest.files(null==n?void 0:n.files),code:null==n?void 0:n.code,request_params:null==n?void 0:n.params,request_kv:null==n?void 0:n.requestKV}):this.logger.info(j.RTM_CLOUD_REPORT_NOTIFY+" not report")},Ye.prototype.loginReport=function(e,t,n,r,o){var s=this,a=J.kZMLoginRoom,c=this.stateCenter.reporter.createSpan(i.I,{key:J.kZMInitSetting.event},{key:""},a.event);return c.setAttributes({svr_env:a.svr_env(this.stateCenter.testEnvironment?"test":"online"),token:a.token(r)}),o&&("boolean"==typeof o.userUpdate&&c.setAttribute("user_state_update",a.user_state_update(o.userUpdate?1:0)),"number"==typeof o.maxMemberCount&&c.setAttributes({max_member_cnt:a.max_member_cnt(o.maxMemberCount)})),{interResolve:function(t){var r=s.getRoomSessionID(n),o=s.getRoomModules(n),i=s.getSessionId(n);c.setAttributes({room_id:a.room_id(n),room_sid_string:a.room_sid_string(r),liveroom_sid_string:a.liveroom_sid_string(i),try_cnt:a.try_cnt(null==(r=null==o?void 0:o.roomTryHandler)?void 0:r.retryActiveCount),server:a.server(null==(i=null==o?void 0:o.roomHandler)?void 0:i.server),room_mode:a.room_mode(s.stateCenter.isMultiRoom?1:0),role:a.role(s.stateCenter.role),audience_create_room:a.audience_create_room(s.stateCenter.roomCreateFlag?1:0),max_member_cnt:a.max_member_cnt((null==o?void 0:o.maxMemberCount)||0)}),c.end(),e(t)},interReject:function(e,r){var o,i;void 0===r&&(r=""),c.setAttributes({room_id:a.room_id(n)}),e.code<2e9&&1e9<e.code||e.code<1e6?(o=H.decodeServerError(e.code,e.msg),i=H.getLiveRoomError(e.code,s.stateCenter.useNetAgent)):o={code:e.code,message:e.msg},o&&s.stateCenter.reporter.setError(c,{code:o.code,msg:o.message+r}),i&&N[i]&&(e.code=N[i].code,e.msg.includes("unknown")&&(e.msg=N[i].msg)),e.code&&e.msg&&""!==r?t({code:e.code,msg:e.msg+r}):t(e)},loginSpan:c}},Ye.prototype.logoutRoom=function(e){var t,n=this;this.logger.info(j.RTM_LOGOUT_ROOM+" call by user "+e),this.stateCenter.roomModulesList.length?void 0===e?(Ze([],this.stateCenter.roomModulesList).forEach((function(e){n.logoutSpan(e),e.roomHandler.logout(!0)})),this.cloudSetting.uninit()):"string"!=typeof e||""==e?(this.logger.error(j.RTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.logoutSpan(void 0,J.kZMLogoutRoom.error.INPUT_PARAM)):(t=this.getRoomModules(e))?(this.logoutSpan(t),t.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit()):(this.logger.error(j.RTM_LOGOUT_ROOM+" room not exist"),this.logoutSpan(void 0,J.kZMLogoutRoom.error.ROOM_NOT_EXIST,e)):this.logger.warn(j.RTM_LOGOUT_ROOM+" no room")},Ye.prototype.loginHall=function(e,t,n){var r=this;return new Promise((function(e,t){return Ve(r,void 0,void 0,(function(){return Fe(this,(function(e){return[2]}))}))}))},Ye.prototype.loginHallReport=function(e,t,n,r){},Ye.prototype.logoutHall=function(){},Ye.prototype.enterRoom=function(e,t){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype.leaveRoom=function(){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype.sendCustomCommand=function(e,t,n){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype._sendCustomCommand=function(e,t,n){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype._sendBroadcastMessage=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=1),new Promise((function(e,t){console.error(k),t()}))},Ye.prototype.setRoomExtraInfo=function(e,t,n){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype._setRoomExtraInfo=function(e,t,n){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(k),t()}))},Ye.prototype._sendBarrageMessage=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=1),new Promise((function(e,t){console.error(k),t()}))},Ye.prototype.sendRelayMessage=function(e,t,n,r,o){console.error(k)},Ye.prototype.requestJoinLive=function(e,t,n,r,o){return console.error(k),!1},Ye.prototype.inviteJoinLive=function(e,t,n,r,o){return console.error(k),!1},Ye.prototype.endJoinLive=function(e,t,n,r){return console.error(k),!1},Ye.prototype.respondJoinLive=function(e,t,n,r,o){return console.error(k),!1},Ye.prototype.getVersion=function(){return this.version},Ye.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},Ye.prototype.on=function(e,t){var n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMListener.event},{key:""},J.kZMOnListener.event);return n.setAttributes({listener:J.kZMOnListener.listener(e)}),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(j.RTM_ON+" listener callBack must be funciton"),this.stateCenter.reporter.setError(n,J.kZMOnListener.error.INPUT_PARAM," listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),n.end(),!0):(this.logger.error(j.RTM_ON+" event "+e+" no found"),this.stateCenter.reporter.setError(n,J.kZMOnListener.error.INPUT_PARAM," event "+e+" no found"),!1)},Ye.prototype.off=function(e,t){var n=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMListener.event},{key:""},J.kZMOffListener.event);if(n.setAttributes({listener:J.kZMOffListener.listener(e)}),!this.stateCenter.listenerList[e])return this.logger.error(j.RTM_OFF+" listener no found"),this.stateCenter.reporter.setError(n,J.kZMOnListener.error.INPUT_PARAM," event "+e+" no found"),!1;var r=this.stateCenter.listenerList[e];return t?r.splice(r.indexOf(t),1):this.stateCenter.listenerList[e]=[],n.end(),!0},Ye.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(j.RTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(j.RTM_ON+" event "+e+" no found"),!1)},Ye.prototype._off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(j.RTM_OFF+" listener no found"),!1;var n=this.stateCenter.listenerList[e];return t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},Ye.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},Ye.prototype.isLogin=function(e){return!!(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&e.isLogin()},Ye.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},Ye.prototype.getAppID=function(){return this.stateCenter.appid},Ye.prototype.getUserID=function(){return this.stateCenter.idName},Ye.prototype.getUseNetAgent=function(){return this.stateCenter.useNetAgent},Ye.prototype.getUserName=function(){return this.stateCenter.nickName},Ye.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},Ye.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},Ye.prototype.setRole=function(e){this.stateCenter.role=e},Ye.prototype.getSessionId=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.sessionID:"0"},Ye.prototype.getRoomSessionID=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.roomSessionID:"0"},Ye.prototype.getAppConfig=function(){return this.stateCenter.appConfig},Ye.prototype.setAccess=function(e){this.stateCenter.configOK&&(this.stateCenter.netHasSet=!0,this.stateCenter.useNetAgent=e,this.stateCenter.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.stateCenter.useNetAgent),this.cloudSetting.setOptions({unify:this.stateCenter.useNetAgent}))},Ye.prototype.enableMultiRoom=function(e){var t=this.stateCenter.reporter.createSpan(i.H,{key:J.kZMInitSetting.event},{key:""},J.kZegoEnableMultiRoom.event);return"boolean"!=typeof e?(this.logger.error(j.RTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.stateCenter.reporter.setError(t,J.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(t.setAttribute("is_multi",J.kZegoEnableMultiRoom.is_multi(e)),0<this.stateCenter.roomModulesList.length||this.stateCenter.setMultiRoom?(this.logger.error(j.RTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.stateCenter.reporter.setError(t,J.kZegoEnableMultiRoom.error.kInvalidParamError),!1):(t.end(),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0))},Ye.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},Ye.prototype._onAppConfigUpdate=function(e){},Ye.prototype._onBeforePageUnload=function(){},Ye.use=function(e){switch(e.type){case"message":case"live":e.install(Ye,_e,ve,Ge)}},Ye.prototype.resetRoomTokenTimer=function(e,t){(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&t&&0<t&&e.roomHandler.resetTokenTimer(1e3*t-this.stateCenter.local_time_deviation)},Ye.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Ye.prototype.sendMessage=function(e,t,n,r){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendMessage(e,t,n,r)},Ye.prototype.setProtoFormat=function(e){if(!["json","pb"].includes(e=void 0===e?"json":e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},Ye.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},Ye.prototype.sendMessageByService=function(e,t,n,r,o,i){return this.service.sendMessage(e,t,n,r,o,i)},Ye.prototype.getHeader=function(e){var t,n,r=this.stateCenter.roomModulesList[0];if(r&&r.isLogin())return t=r.roomID,n=r.sessionID,r=r.roomSessionID,this.service.getHeader(e,n,t,r);this.logger.error(j.RTM_GET_HEADER+" room no found or no login")},Ye.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error(j.RTM_SEND_PB+" type error"),!1)},Ye.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},Ye.prototype.getRoomID=function(){return this.stateCenter.roomid},Ye.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},Ye.prototype.isUseNetAgent=function(){return this.stateCenter.useNetAgent},Ye.prototype.getReqHead=function(e){return e="string"==typeof e&&""!==e&&this.getRoomModules(e)||this.stateCenter.roomModulesList[0],this.liveRoomHandler.getReqHead(e)},Ye.prototype.sendSwitchMessage=function(e,t){return"string"==typeof e&&t?this.liveRoomHandler.sendMessage(e,t,void 0,void 0,void 0,!1):-1},Ye.prototype.onSwitchMessage=function(e){e&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=e)},Ye.prototype.onAppConfigUpdate=function(e){e&&(this._onAppConfigUpdate=e)},Ye.prototype.onBeforePageUnload=function(e){e&&(this._onBeforePageUnload=e)},Ye.prototype.logoutSpan=function(e,t,n){var r=this,o=this.stateCenter.reporter.createSpan(i.I,{key:J.kZMInitSetting.event},{key:J.kZMLogoutRoom.event,par:null==e?void 0:e.roomID},J.kZMLogoutRoom.event,!0);o.setAttributes({is_multi:J.kZMLogoutRoom.is_multi(this.stateCenter.isMultiRoom),is_send_cmd_net:J.kZMLogoutRoom.is_send_cmd_net(!0)}),e?o.setAttributes({room_id:J.kZMLogoutRoom.room_id(null==e?void 0:e.roomID),room_sid_string:J.kZMLogoutRoom.room_sid_string(null==e?void 0:e.roomSessionID),liveroom_sid_string:J.kZMLogoutRoom.liveroom_sid_string(null==e?void 0:e.sessionID)}):"string"==typeof n&&o.setAttributes({room_id:J.kZMLogoutRoom.room_id(n)}),t?this.stateCenter.reporter.setError(o,t):o.end(),setTimeout((function(){r.reporter.flush()}),200)},Ye.prototype.getMsgSpan=function(e,t,n){return this.stateCenter.reporter.createSpan(i.H,{key:J.kZMLoginRoom.event,par:t},{key:e,par:t},e,n=void 0!==n&&n)},Ye.prototype.updateTimeOffsetInterval=function(){var e=this;"number"==typeof this.netAgent.timeOffset&&this.stateCenter.reporter.setTimeOffset(this.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout((function(){e.updateTimeOffsetInterval()}),9e5)},Ye);function Ye(e,t,n,r,o,a,c,u,l){var h,p=this,f=(this.logger=n,this.dataReport=r,this.reporter=o,this.cloudSetting=a,this.version=c,this.options=l,this.roomLoginResponseListener=function(){clearTimeout(p.cloudSettingTimer),p.cloudSettingTimer=setTimeout((function(){p.logger.info(j.RTM_LOGIN_ROOM+"fetch cloud setting"),p.getCloudSetting(),p.stateCenter.actionListener("_settingCanFetch")}),100)},this.stateCenter=new ie(this.logger,this.dataReport),this.stateCenter.ENV=u,this.stateCenter.product=B.product,this.getReportSeq=_,this.getSeq=d,this.initCallback(),this.stateCenter.deviceID=H.generateUUID(u),this.reporter.init(e,u,this.stateCenter.deviceID),this.reporter.setLogger(this.logger),this.stateCenter.reporter=this.reporter,J.kZMInitSetting),g=this.stateCenter.reporter.createSpan(i.H,{key:""},{key:f.event},f.event,!0);0!=u&&1!=u||this.setDebug(t),n="Express";if(null!=(r=this.options)&&r.reportData&&(h=null==(a=null==(o=this.options)?void 0:o.reportData)?void 0:a.version,n=(null==(l=null==(c=this.options)?void 0:c.reportData)?void 0:l.project)||n),g.setAttributes({biz_type:f.biz_type(0),project:f.project(n),servers:f.servers("string"==typeof t?[t]:t),liveroom_version:f.liveroom_version(h),is_from_cache:f.is_from_cache(!1),sev_env:f.sev_env(this.stateCenter.testEnvironment?"test":"online")}),H.checkConfigParam(e,t,this.logger)){this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,this.stateCenter.testEnvironment&&(this.stateCenter.mode=E.MODE_TEST),this.netAgent=new C,this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.logger),this.netAgent.setAppInfo({appID:this.stateCenter.appid,env:this.stateCenter.ENV,mode:this.stateCenter.mode}),this.liveRoomHandler=new Ge(this.logger,this.stateCenter,this.netAgent,this.dataReport,this),this.service=new ve(this.stateCenter,this.logger,this),this.stateCenter.settingConfig=new Ee,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:x.product,appID:e,urls:x.URL,env:u,pollingNotify:function(e,t){p.logger.info(j.RTM_CONSTRUCTOR," setting file changed "+e+" "+JSON.stringify(t)),p.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent});o=((r=this.stateCenter.settingConfig.getSetting("remote_log_level"))&&(this.logger.info(j.RTM_CONSTRUCTOR+" setting remote_log_level default "+r),this.logger.setRemoteLogLevel(r)),""),a=(0===u?o="rtc":1===u&&(o="xcx"),this.cloudSetting.setEnvVariable("environment",o),this.cloudSetting.getSettingCache(q)),c=this.cloudSetting.getSettingCache("room");var m=!1,y=setTimeout((function(){p.logger.warn(j.RTM_CONSTRUCTOR+" time out, get cache settings failed!"),p.stateCenter.useNetAgent&&(m=!0,p.createNetAgent(),p.getStoreAppConfig()),g.setAttributes({use_na:f.use_na(p.stateCenter.useNetAgent?1:0)}),g.end()}),3e3);if(Promise.all([a,c]).then((function(n){y&&clearTimeout(y);var r=null==n?void 0:n[0],o=((a=((a=(p.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting),p.stateCenter.useNetAgent=p.getSettingUnify(p.stateCenter.netHasSet),p.cloudSetting.setOptions({unify:p.stateCenter.useNetAgent}),p.stateCenter.useNetAgent&&!m&&(p.createNetAgent(),p.getStoreAppConfig()),p.stateCenter.settingConfig.getSetting("remote_log_level",!0)))&&(p.logger.info(j.RTM_CONSTRUCTOR+"  setting remote_log_level "+a),p.logger.setRemoteLogLevel(a)),p.stateCenter.settingConfig.getSetting("report_script")))?(o=a.url,s=a.key,a=a.hash,p.logger.info(j.RTM_CONSTRUCTOR+" report script "+o+" "+s+" "+a),p.stateCenter.reporter.loadScript(!1,o,s,a),g.setAttributes({lua_md5:f.lua_md5(a)})):p.stateCenter.reporter.loadScript(!1,"","",""),null==n?void 0:n[1]),s=(p.stateCenter.settingConfig.setSetting(null==o?void 0:o.setting),p.stateCenter.reporter.createSpan(i.H,{key:f.event},{key:""},J.kZMCloudSettingCache.event)),a=(s.setAttributes({files:J.kZMCloudSettingCache.files([{name:q,content:JSON.stringify(null==r?void 0:r.setting),versions:JSON.stringify(null==r?void 0:r.versions),code:0,message:""},{name:"room",content:JSON.stringify(null==o?void 0:o.setting),versions:JSON.stringify(null==o?void 0:o.versions),code:0,message:""}])}),s.end(),g.setAttributes({use_na:f.use_na(p.stateCenter.useNetAgent?1:0)}),g.end(),Array.isArray(t)?t[0]:t);if(!p.stateCenter.useNetAgent&&!H.isRightServerForAppid(a,e))throw p.logger.error(j.RTM_CONSTRUCTOR+" the server does not match the appID"),new Error("The server does not match the appID")})).catch((function(e){y&&clearTimeout(y),g.setAttributes({use_na:f.use_na(p.stateCenter.useNetAgent?1:0)}),g.end(),p.logger.warn(j.RTM_CONSTRUCTOR+"  initConfig "+JSON.stringify(e))})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&0<t.length&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),0==u||2==u)this.bindWindowListener(),this.logger.info(j.RTM_CONSTRUCTOR+"  "+navigator.appVersion+" "+this.version),this.stateCenter.networkState=!navigator||navigator.onLine?s.online:s.offline,l="Firefox"===H.getBrowser()?null===navigator||void 0===navigator?void 0:navigator.userAgent:null===navigator||void 0===navigator?void 0:navigator.appVersion,g.setAttribute("sys_info",l||""),this.initSpans();else if(1==u||3==u){this.bindWxListener();try{var v=wx.getSystemInfoSync(),b={brand:v.brand,model:v.model,system:v.system,platform:v.platform,version:v.version,SDKVersion:v.SDKVersion};this.logger.warn(j.RTM_CONSTRUCTOR+" "+JSON.stringify(b)),g.setAttribute("mini_sys_infos",b),g.end()}catch(n){this.logger.warn(j.RTM_CONSTRUCTOR+" get system info error")}}this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)}else this.logger.error(j.RTM_CONSTRUCTOR+" init sdk error"),this.stateCenter.reporter.setError(g,f.error.kInvalidParamError);this.stateCenter.onListener("roomLoginResponse",this.roomLoginResponseListener)}var We=n(13),Xe=(Je.prototype.setLog=function(e){this.zegoSetting.setLog(e)},Je.prototype.init=function(e){this.zegoSetting.init(e)},Je.prototype.setEnvVariable=function(e,t){this.zegoSetting.setEnvVariable(e,t)},Je.prototype.getEnvVariables=function(){return this.zegoSetting.getEnvVariables()},Je.prototype.fetchSetting=function(e,t,n){return this.zegoSetting.fetchSetting(e,t,n)},Je.prototype.fetchMultiSetting=function(e,t,n){return this.zegoSetting.fetchMultiSetting(e,t,n)},Je.prototype.setOptions=function(e){return this.zegoSetting.setOptions(e)},Je.prototype.getSettingCache=function(e){return this.zegoSetting.getSettingCache(e)},Je.prototype.setToken=function(e){this.zegoSetting.setToken(e)},Je.prototype.setUserID=function(e){this.zegoSetting.setUserID(e)},Je.prototype.activePolling=function(){this.zegoSetting.activePolling()},Je.prototype.uninit=function(){var e;null!=(e=this.zegoSetting)&&e.uninit()},Je.prototype.getEnvVariable=function(e){this.zegoSetting.getEnvVariable(e)},Je);function Je(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new We.ZegoSetting}var Qe=n(9),$e=function(){return($e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},et=(tt.prototype.init=function(e,t,n){var r=this;this.tracer.init({product:this.product,version:"1.0.0",env:t,appID:e,deviceID:n,importantLevel:B.importLevel,levels:B.levels,bps:B.bps,spanStart:function(e){try{"function"==typeof scriptSpanStart&&scriptSpanStart(r.commonStates,r.tracer,e)}catch(e){r.logger.warn(j.TRACER_INIT+" dy span start ",JSON.stringify(e))}},spanBeforeEnd:function(e){e.setAttribute("ntype_end",H.getNetType())},spanEnd:function(e,t){try{"function"==typeof scriptSpanEnd&&scriptSpanEnd(r.commonStates,r.tracer,e)}catch(e){r.logger.warn(j.TRACER_INIT+" dy span end ",JSON.stringify(e))}},resources:{product:this.product,appid:e,device_id:n,console:0==t?"rtc":"xcx"}})},tt.prototype.setConfig=function(e){this.tracer.setConfig(e)},tt.prototype.loadScript=function(e,t,n,r){return function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var o;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var c=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.tracer.loadJs(e,t,n,r,"\nfunction scriptSpanStart(states, tracer, span) {\n    \n}\nfunction scriptSpanEnd(states, tracer, span) {\n    if (span['tags']['msg_content']) {\n        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;\n        delete span['tags']['msg_content'];\n    }\n    delete span['tags']['resp'];\n    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];\n    if (filterSpans.includes(span.name)) {\n        console.log(span.name + ' do not report');\n        span.droped = true;\n    }\n}\nfunction scriptInit(states, tracer) {\n\n}\n\n",{})];case 1:return i.sent(),"function"==typeof scriptInit&&scriptInit(this.commonStates,this.tracer),[3,3];case 2:return o=i.sent(),this.logger.warn(j.TRACER_LOAD_SCRIPT," load script fail "+JSON.stringify(o)),[3,3];case 3:return[2]}}))}))},tt.prototype.setReporterInfo=function(e,t){var n=new Map;n.set("userID",e),n.set("token",t),this.tracer.startReport(n)},tt.prototype.flush=function(e){this.tracer.flush(e)},tt.prototype.setCommonStates=function(e){this.commonStates=e},tt.prototype.setResource=function(e){this.tracer.setResource(e)},tt.prototype.setCommonAttributes=function(e){this.commonAttrs=Object.assign({},this.commonAttrs,e)},tt.prototype.createSpan=function(e,t,n){return(e=this.tracer.createSpan(e,t,{parent:n})).setAttributes($e({ntype:H.getNetType(),error:0,message:""},this.commonAttrs)),e},tt.prototype.spanEnd=function(e,t){e&&t&&e.setAttributes($e({},t)),e&&e.end()},tt.prototype.spanSetAttributes=function(e,t){e&&e.setAttributes(t)},tt.prototype.spanAppendAttribute=function(e,t,n){e&&e.appendAttribute(t,n)},tt.prototype.setError=function(e,t,n){e.setAttributes({error:t.code||t.errorCode,message:(t.msg||t.message||t.extendedData)+" "+(n=void 0===n?"":n)}),e.end()},tt.prototype.setLogger=function(e){this.tracer.setLogger(e)},tt.prototype.setTimeOffset=function(e){this.tracer.setTimeOffset(e)},tt.prototype.setUnloadState=function(e){this.isUnload=!0,this.tracer.setUnloadState(e)},tt.prototype.setNetStateCheck=function(){this.tracer.setNetStateCheck()},tt);function tt(e){this.logger=e,this.product=B.product,this.commonAttrs={},this.commonStates={},this.isUnload=!1,new Qe.DynamicCode,this.tracer=new Qe.ZegoTracer,this.tracer.setSampleConfig({level:i.L})}var nt=["/sdk/start_publish","/publish/start","/publish/restart"],rt=["/sdk/start_play","/play/start","/play/restart"],ot=(it.prototype.init=function(e,t,n){this.tracerHandler.init(e,t,n)},it.prototype.setConfig=function(e){this.tracerHandler.setConfig(e)},it.prototype.loadScript=function(e,t,n,r){return this.tracerHandler.loadScript(e,t,n,r)},it.prototype.setReporterInfo=function(e,t){this.tracerHandler.setReporterInfo(e,t)},it.prototype.flush=function(e){this.tracerHandler.flush(e)},it.prototype.setCommonStates=function(e){this.tracerHandler.setCommonStates(e)},it.prototype.setResource=function(e){this.tracerHandler.setResource(e)},it.prototype.setCommonAttributes=function(e){this.tracerHandler.setCommonAttributes(e)},it.prototype.setPublicPros=function(e){this.publicPros=Object.assign({},this.publicPros,e)},it.prototype.createSpan=function(e,t,n,r,o){var i;t&&t.key&&t.par?(s=t.par1?"_"+t.par1:"",!(i=null==(i=this.reportList[t.key])?void 0:i[t.par+s])&&t.bak_key&&(i=null==(a=this.reportList[t.bak_key])?void 0:a[t.par+s])):t&&!(i=this.reportList[t.key])&&t.bak_key&&(i=this.reportList[t.bak_key]),i=i||this.reportList[J.kZMInitSetting.event];var s,a=this.tracerHandler.createSpan(e,r,i);return"/sdk/login"===t.key&&(a.setAttribute("room_id",t.par),this.publicPros[t.par]&&a.setAttributes(this.publicPros[t.par])),(nt.includes(t.key)||rt.includes(t.key))&&a.setAttribute("stream_id",t.par),nt.includes(t.key)&&this.publicPros["_publish_"+t.par]&&a.setAttributes(this.publicPros["_publish_"+t.par]),rt.includes(t.key)&&this.publicPros["_play_"+t.par]&&a.setAttributes(this.publicPros["_play_"+t.par]),o&&(n.par?(this.reportList[n.key]||(this.reportList[n.key]={}),s=n.par1?"_"+n.par1:"",this.reportList[n.key][n.par+s]=a):this.reportList[n.key]=a),a},it.prototype.setSpanInMap=function(e,t){var n;t.par?(this.reportList[t.key]||(this.reportList[t.key]={}),n=t.par2?"_"+t.par2:"",this.reportList[t.key][t.par+n]=e):this.reportList[t.key]=e},it.prototype.spanEnd=function(e,t,n){var r;e.par?(r=e.par1?"_"+e.par1:"",r=this.reportList[e.key]&&this.reportList[e.key][e.par+r],this.reportList[e.key]&&!n&&delete this.reportList[e.key][e.par]):(r=this.reportList[e.key],n||delete this.reportList[e.key]),this.tracerHandler.spanEnd(r,t)},it.prototype.spanSetAttributes=function(e,t){var n,r;e.par?(n=e.par1?"_"+e.par1:"",!(r=this.reportList[e.key]&&this.reportList[e.key][e.par+n])&&e.bak_key&&(r=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+n])):!(r=this.reportList[e.key])&&e.bak_key&&(r=this.reportList[e.key]),this.tracerHandler.spanSetAttributes(r,t)},it.prototype.spanAppendAttribute=function(e,t,n){var r,o;e.par?(r=e.par1?"_"+e.par1:"",!(o=this.reportList[e.key]&&this.reportList[e.key][e.par+r])&&e.bak_key&&(o=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+r])):!(o=this.reportList[e.key])&&e.bak_key&&(o=this.reportList[e.key]),this.tracerHandler.spanAppendAttribute(o,t,n)},it.prototype.setError=function(e,t,n){this.tracerHandler.setError(e,t,n)},it.prototype.setLogger=function(e){this.tracerHandler.setLogger(e)},it.prototype.setTimeOffset=function(e){this.tracerHandler.setTimeOffset(e)},it.prototype.setUnloadState=function(e){this.tracerHandler.setUnloadState(e)},it.prototype.setNetStateCheck=function(){this.tracerHandler.setNetStateCheck()},it);function it(e){this.logger=e,this.reportList={},this.publicPros={},this.tracerHandler=new et(e)}at.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},at.prototype.loginRoom=function(e,t,n,r){return this.zegoWebRTM.loginRoom(e,t,n,r)},at.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},at.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},at.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},at.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},at.prototype.sendCustomCommand=function(e,t,n){return this.zegoWebRTM.sendCustomCommand(e,t,n)},at.prototype.setRoomExtraInfo=function(e,t,n){return this.zegoWebRTM.setRoomExtraInfo(e,t,n)},at.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},at.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},at.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},at.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},at.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},at.prototype.loginHall=function(e,t,n){return this.zegoWebRTM.loginHall(e,t,n)},at.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},at.prototype.enterRoom=function(e,t){return this.zegoWebRTM.enterRoom(e,t)},at.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},at.use=function(e){Ke.use(e)},at.version="1.23.1";var st=at;function at(e,t,n,r){this.logger=new h.ZegoLogger(n=void 0===n?0:n),this.dataReport=new h.ZegoDataReport(this.logger),this.cloudSetting=new Xe,this.reporter=new ot(this.logger),this.zegoWebRTM=new Ke(e,t,this.logger,this.dataReport,this.reporter,this.cloudSetting,at.version,n,r)}}],o={},n.m=r,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22);function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,o}));